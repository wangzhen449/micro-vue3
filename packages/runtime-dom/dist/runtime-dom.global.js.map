{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/toDisplayString.ts", "../../shared/src/index.ts", "../../reactivity/src/dep.ts", "../../reactivity/src/effectScope.ts", "../../reactivity/src/effect.ts", "../../reactivity/src/baseHandlers.ts", "../../reactivity/src/reactive.ts", "../../reactivity/src/ref.ts", "../../reactivity/src/computed.ts", "../../runtime-core/src/componentPublicInstance.ts", "../../runtime-core/src/componentOptions.ts", "../../runtime-core/src/componentProps.ts", "../../runtime-core/src/componentEmits.ts", "../../runtime-core/src/components/Teleport.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/componentSlots.ts", "../../runtime-core/src/component.ts", "../../runtime-core/src/componentRenderUtils.ts", "../../runtime-core/src/scheduler.ts", "../../runtime-core/src/apiLifecycle.ts", "../../runtime-core/src/components/KeepAlive.ts", "../../runtime-core/src/apiCreateApp.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../../runtime-core/src/apiInject.ts", "../../runtime-core/src/apiDefineComponent.ts", "../../runtime-core/src/apiAsyncComponent.ts", "../../runtime-core/src/apiWatch.ts", "../src/nodeOps.ts", "../src/modules/class.ts", "../src/modules/style.ts", "../src/modules/events.ts", "../src/modules/attrs.ts", "../src/patchProp.ts"],
  "sourcesContent": ["/**\n * v \u5B9A\u4E49\u4E0E\u6D4F\u89C8\u5668\u76F8\u5173\u7684rendererOptions\n * v \u901A\u8FC7rendererOptions\u751F\u6210\u6D4F\u89C8\u5668\u5E73\u53F0\u76F8\u5173\u7684\u6E32\u67D3\u5668\uFF0C\u5B9E\u73B0\u6838\u5FC3\u529F\u80FD\u4E0E\u5E73\u53F0\u7684\u89E3\u8026\n * v \u66B4\u9732\u4E24\u4E2A\u65B9\u6CD5\uFF1Arender\u548CcreateApp\n *    createRender(rendererOptions).render(h('div',1), dom)\n *    createRender(rendererOptions).createApp(component).mount(dom)\n */\nimport { createRenderer } from '@vue/runtime-core'\nimport { extend, isString } from '@vue/shared'\nimport { nodeOps } from './nodeOps'\nimport { patchProp } from './patchProp'\n\n// \u6D4F\u89C8\u5668\u76F8\u5173\u7684\u914D\u7F6E\nconst rendererOptions = extend(nodeOps, { patchProp })\n\nlet renderer\n// \u521B\u5EFA\u6E32\u67D3\u5668 \u91CD\u590D\u8C03\u7528\u4E0D\u4F1A\u91CD\u590D\u521B\u5EFA\nfunction ensureRenderer() {\n  return renderer || (renderer = createRenderer(rendererOptions))\n}\n\n// \u66B4\u9732\u7684render\u51FD\u6570\nexport const render = (...args) => {\n  ensureRenderer().render(...args)\n}\n\nexport const createApp = (...args) => {\n  const app = ensureRenderer().createApp(...args);\n\n  const { mount } = app\n  // \u91CD\u5199mount\u65B9\u6CD5\uFF0C\u89C4\u8303\u5316\u5BB9\u5668\n  app.mount = (containerOrSelector) => {\n    const container = normalizeContainer(containerOrSelector)\n    if (!container) return\n\n    // \u6E05\u7A7A\u5BB9\u5668\n    container.innerHTML = ''\n    mount(container)\n  }\n  return app\n}\n\n// \u89C4\u8303\u5316\u5BB9\u5668\uFF0C\u53EA\u5904\u7406\u5B57\u7B26\u4E32\nfunction normalizeContainer(container) {\n  if (isString(container)) {\n    const dom = document.querySelector(container)\n    return dom\n  }\n  return container\n}\n\nexport * from '@vue/runtime-core'\n", "import { isArray, isObject, isString } from './index';\n\nexport function toDisplayString(val) {\n  return isString(val) ? val\n    : val === null ? ''\n    : (isArray(val) || isObject(val)) ? JSON.stringify(val && val.__v_isRef ? val.value : val) // \u5904\u7406ref\n    : String(val)\n}", "export * from './shapeFlags'\nexport * from './patchFlags'\nexport * from './toDisplayString'\n\nconst onRE = /^on[^a-z]/\nexport const isOn = (key) => onRE.test(key)\n\nexport const isArray = Array.isArray\n\nexport const isNumber = (val: unknown): val is number => typeof val === 'number'\n\nexport const isString = (val: unknown): val is string => typeof val === 'string'\n\nexport const isSymbol = (val: unknown): val is symbol => typeof val === 'symbol'\n\nexport const isObject = (value: unknown): value is Record<any, any> =>\n  typeof value === 'object' && value !== null\n\nexport const isFunction = (value: unknown): value is Function =>\n  typeof value === 'function'\n\nexport const hasChanged = (value: any, oldValue: any): boolean =>\n  !Object.is(value, oldValue)\n\nexport const invokeArrayFns = (fns, arg?) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](arg)\n  }\n}\n\nexport const NOOP = () => {}\n\nexport const extend = Object.assign\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (obj, key) => hasOwnProperty.call(obj, key)\n\nexport const capitalize = (str: string): string =>\n  str.charAt(0).toUpperCase() + str.slice(1)\n\n// on + \u9996\u5B57\u6BCD\u5927\u5199\nexport const toHandlerKey = (str: string): string =>\n  str ? `on${capitalize(str)}` : ''\n", "import { ReactiveEffect } from './effect';\nexport type Dep = Set<ReactiveEffect>;\n\n// \u4F7F\u7528Set\u5B58\u50A8\u552F\u4E00\u7684effect\nexport function createDep(effetcs?: ReactiveEffect[]): Dep {\n  const dep = new Set<ReactiveEffect>(effetcs) as Dep;\n  return dep;\n}\n", "import { ReactiveEffect, effect } from './effect'\n\nexport let activeEffectScope\nexport class EffectScope {\n  active = true // \u6FC0\u6D3B\u6807\u8BC6\n  effects = [] // effect\u96C6\u5408\n  scopes // \u5B50scope\u96C6\u5408\n  parent // \u7236scope\n  index // \u5F53\u524D\u6240\u5728scopes\u7684\u4E0B\u6807\n  constructor(detached = false) {\n    // \u5206\u79BB\u6807\u8BC6 \u5982\u679C\u4E3Atrue\u7684\u8BDD\uFF0C\u5C31\u4E0D\u4F1A\u8BB0\u5F55\u5230parent\u4E2D\uFF0C\u4E5F\u5C31\u4E0D\u4F1A\u88AB\u7236scope stop\u6389\n    // \u5982\u679C\u4E0D\u5206\u79BB\uFF0C\u5E76\u4E14\u5F53\u524D\u6709 activeEffectScope\uFF0C\u8BF4\u660E\u5F53\u524D\u662F\u5B50EffectScope\n    if (!detached && activeEffectScope) {\n      // \u5F53\u524Dparent\n      this.parent = activeEffectScope\n      // push\u8FD4\u56DE\u6570\u7EC4\u7684\u65B0\u957F\u5EA6\uFF0C\u6240\u4EE5\u8FD9\u91CC\u8FD4\u56DE\u7684\u662Fscopes\u7684\u6700\u540E\u4E00\u4F4D\u4E0B\u6807 length - 1\u3002\u5DE7\u5999\n      this.index =\n        // parent\u4E2D\u6536\u96C6 \u5F53\u524Dscope\n        (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n          this\n        ) - 1\n    }\n  }\n  run(fn) {\n    if (this.active) {\n      const currentEffectScope = activeEffectScope\n      try {\n        activeEffectScope = this\n        return fn()\n      } finally {\n        activeEffectScope = currentEffectScope\n      }\n    }\n  }\n\n  stop() {\n    if (this.active) {\n      for (let i = 0; i < this.effects.length; i++) {\n        this.effects[i].stop()\n      }\n      // \u5982\u679C\u6709\u5B50scope\uFF0C \u5B50scope\u4E5Fstop\u6389\uFF0C\u5B9E\u9645\u8C03\u7528\u7684\u5C31\u662F\u5F53\u524D\u7684stop\u65B9\u6CD5\n      if (this.scopes) {\n        for (let i = 0; i < this.scopes.length; i++) {\n          this.scopes[i].stop()\n        }\n      }\n      // \u89E3\u9664\u7236\u5B50\u7ED1\u5B9A\uFF0C\u907F\u514D\u5185\u5B58\u6EA2\u51FA\n      if (this.parent) {\n        // \u5C06\u6309\u7167scopes\u7684\u4E0B\u6807\uFF0C\u4ECE\u524D\u5411\u540E\u6267\u884C\n\n        // 1. \u4F20\u7EDF\u505A\u6CD5 O(n)\uFF0C\u9700\u8981\u4ECE\u5934\u5230\u5C3E\u79FB\u52A8\u4F4D\u7F6E\n        // this.scopes.splice(this.index, 1)\n\n        /**\n         * 2. \u53D6\u51FA\u6700\u540E\u4E00\u4E2A\u66FF\u6362\u5F53\u524D\u4F4D\u7F6E\uFF0C\u4E5F\u5C31\u662F\u5F53\u6570\u7EC4\u6267\u884C\u5230\u4E2D\u4F4D\u6570\u662F\uFF0C\u6570\u7EC4\u540E\u9762\u5DF2\u7ECF\u5BF9\u6298\u5230\u4E86\u6570\u7EC4\u524D\u9762\u3002\u56E0\u6B64\u590D\u6742\u5EA6O(1)\u3002\n         * 0 1 2 3 4\n         * 4 1 2 3\n         * 4 3 2\n         * 4 3\n         * 4\n         * \u5220\u9664\u987A\u5E8F\u8FD8\u662F\u4ECE\u7B2C\u4E00\u4E2A\u5230\u6700\u540E\u4E00\u4E2A\uFF0C\u5DE7\u5999\n         */\n        let last = this.parent.scopes.pop()\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last\n          last.index = this.index\n        }\n      }\n      this.active = false\n    }\n  }\n}\n\nexport function effectScope(detached?) {\n  return new EffectScope(detached)\n}\n\n// scope \u6536\u96C6 effect\nexport function recordEffectScope(effect, scope = activeEffectScope) {\n  if (scope && scope.active) {\n    scope.effects.push(effect)\n  }\n}\n", "import { extend } from '@vue/shared';\nimport { createDep, Dep } from './dep'\nimport { recordEffectScope } from './effectScope';\n\n/**\n * v effect \u76D1\u542C\u51FD\u6570\u4E2D\uFF0C\u591A\u6B21\u89E6\u53D1\u76F8\u540Cgetter\uFF0C\u53EA\u6536\u96C6\u4E00\u6B21\n * v effect \u907F\u514D\u9012\u5F52\u6267\u884C\n * v effect\u8FD4\u56DErunner\u51FD\u6570\uFF0C\u652F\u6301\u624B\u52A8\u89E6\u53D1\u76D1\u542C\u51FD\u6570\n * v effect\u4F20\u5165\u4E00\u4E2Arunner\uFF0C\u4F1A\u91CD\u65B0\u5305\u88C5\uFF0C\u89E6\u53D1\u4E24\u6B21\n * v effect stop\u529F\u80FD\uFF0C\u652F\u6301\u5728\u8FD0\u884C\u4E2D\u5EF6\u8FDF\u89E6\u53D1\u548C\u8FD0\u884C\u540E\u89E6\u53D1\n * x \u5206\u652F\u7684\u5904\u7406\n * x shouldTrack\n * x trigger \u4E2D key \u4E3A\u7279\u6B8A\u5C5E\u6027\u7684\u5904\u7406\n * v \u5D4C\u5957effect \u5916\u5C42\u4E0D\u4F1A\u6536\u96C6\u5185\u5C42\u4F9D\u8D56\uFF0C\u5185\u5C42\u4E5F\u4E0D\u4F1A\u6536\u96C6\u5916\u5C42\u4F9D\u8D56\u3002\n * x effect \u4F20\u9012\u53C2\u6570\n *   v scheduler \u8C03\u5EA6\u5668 \uFF08\u5F02\u6B65\u66F4\u65B0\u7684\u6838\u5FC3\uFF09\n *\n *\n */\n\n// \u5B58\u50A8\u65B9\u5F0F\u4E3A  WeakMap(target -> Map(key -> dep))\n// \u4F7F\u7528Set\u800C\u4E0D\u662F\u8BA2\u9605\u7684Dep\u7C7B\uFF0C\u662F\u4E3A\u4E86\u8282\u7701\u6027\u80FD\u5F00\u9500\ntype KeyToDepMap = Map<any, Dep>\nconst targetMap = new WeakMap<any, KeyToDepMap>()\n\nexport type EffectScheduler = () => any\n\nexport let activeEffect: ReactiveEffect | undefined\nexport class ReactiveEffect {\n  active = true // \u7528\u4E8E\u6807\u8BC6\u662F\u5426\u88AB\u6FC0\u6D3B\uFF0C\u53EA\u6709\u6FC0\u6D3B\u662F\u624D\u53EF\u4EE5\u88AB\u6536\u96C6\u548C\u89E6\u53D1\n  deps: Dep[] = [] // \u7528\u4E8E\u5B58\u50A8\u5F53\u524Deffect\u6536\u96C6\u7684Dep\uFF0CDep\u4E2D\u5B58\u50A8\u7684\u662FReactiveEffect\u5B9E\u4F8B\n  parent: ReactiveEffect | undefined = undefined // \u4E3A\u4E86\u5D4C\u5957effect\uFF0C\u6807\u8BB0\u4E0A\u5C42activeEffect\n\n  private deferStop?: boolean // \u5EF6\u8FDF\u6E05\u7406\u7684\u6807\u8BC6\n\n  onStop: () => void // stop\u65F6\u4F1A\u6267\u884C\n  constructor(public fn, public scheduler: EffectScheduler | null = null) {\n    recordEffectScope(this)\n  }\n\n  run() {\n    // \u5982\u679C\u4E0D\u662F\u88AB\u6FC0\u6D3B\u7684\u72B6\u6001(\u6267\u884C\u8FC7onStop\u4E4B\u540E)\uFF0C\u76F4\u63A5\u6267\u884C\u76D1\u542C\u51FD\u6570\n    if (!this.active) {\n      this.fn()\n    }\n\n    try {\n      // \u4E0A\u4E00\u5C42\u7684activeEffect\u5B58\u50A8\u5230\u5BF9\u8C61\u7684parent\u5C5E\u6027\u4E0A\uFF0C\u5FC5\u987B\u5728\u8D4B\u503C\u4E3Athis\u4E4B\u524D\n      this.parent = activeEffect\n      // \u5F53\u524Deffet\uFF0C\u53EF\u88AB\u4F9D\u8D56\u6536\u96C6\n      activeEffect = this\n      // \u5148\u6267\u884C\u4E00\u6B21\n      return this.fn()\n    } finally {\n      // \u4E0B\u5C42run\u51FD\u6570\u6267\u884C\u5B8C\u3002\u5C06\u4E0A\u5C42\u4F9D\u8D56\u7684effect\uFF0C\u8FD4\u8FD8\u7ED9\u5F53\u524D\n      activeEffect = this.parent\n      // \u5F53\u524D\u7684parent\u53EF\u4EE5\u7F6E\u7A7A\u4E86\u3002\n      this.parent = undefined\n\n      // \u5EF6\u8FDF\u6267\u884Cstop\n      if (this.deferStop) {\n        this.stop()\n      }\n    }\n  }\n\n  stop() {\n    // \u5982\u679C\u8FD0\u884C\u4E2D\u6267\u884Cstop\uFF0C\u5C06\u7B49\u5230run\u51FD\u6570\u6267\u884C\u5B8C\uFF0C\u5EF6\u8FDF\u6267\u884C\u3002\n    if (activeEffect === this) {\n      this.deferStop = true\n    } else if (this.active) {\n      // \u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\n      cleanupEffect(this)\n      if (this.onStop) {\n        this.onStop()\n      }\n      // \u7F6E\u4E3A\u672A\u6FC0\u6D3B\u72B6\u6001\n      this.active = false\n    }\n  }\n}\n\nfunction cleanupEffect(effect: ReactiveEffect) {\n  const { deps } = effect\n  if (deps.length) {\n    // \u53CC\u5411\u5B58\u50A8\u7684\u597D\u5904\uFF0C\u8FD9\u91CC\u5FAA\u73AF\u7684\u662F\u6240\u6709\u4F9D\u8D56\u4E86\u5F53\u524Deffect\u7684 Dep\u3002\n    for (let i = 0; i < deps.length; i++) {\n      // \u5728Dep\u96C6\u5408\u4E2D\u5220\u9664\u6389\u5BF9\u4E8E\u5F53\u524Deffect\u7684\u4F9D\u8D56\u3002\n      deps[i].delete(effect)\n    }\n    // \u6E05\u7A7Adeps\n    deps.length = 0\n  }\n}\n\nexport interface ReactiveEffectOptions {\n  // \u8C03\u5EA6\u5668 \u5728\u4F9D\u8D56\u89E6\u53D1\u65F6\u901A\u8FC7\u8C03\u5EA6\u5668\u7684\u62E6\u622A\uFF0C\u4E0D\u6267\u884Crun\u65B9\u6CD5\uFF0C\u800C\u662F\u6267\u884C\u8C03\u5EA6\u5668\u65B9\u6CD5\n  scheduler?: EffectScheduler\n}\n\nexport interface ReactiveEffectRunner<T = any> {\n  (): T\n  effect: ReactiveEffect\n}\n\nexport function effect<T = any>(\n  fn: () => T,\n  options?: ReactiveEffectOptions\n): ReactiveEffectRunner {\n  // \u5982\u679Ceffect\u4F20\u5165\u7684\u662F\u4E00\u4E2Arunner\uFF0C\u4F7F\u7528runner\u4E0A\u7684ReactiveEffect\u5B9E\u4F8B\u4E0A\u7684fn\n  // \u8FD9\u6837\u4F1A\u91CD\u65B0\u521B\u5EFAReactiveEffect\u5BF9\u8C61 \u8FD9\u6837\u76D1\u542C\u51FD\u6570\u4F1A\u89E6\u53D1\u4E24\u6B21\u3002\uFF08\u5426\u5219\u6267\u884C\u7684\u662F\u4E0A\u6B21\u7684run\u65B9\u6CD5\uFF09\n  if ((fn as ReactiveEffectRunner).effect) {\n    fn = (fn as ReactiveEffectRunner).effect.fn\n  }\n  const _effect = new ReactiveEffect(fn)\n  if(options) {\n    extend(_effect, options)\n  }\n  // \u9996\u5148\u6267\u884C\u4E00\u6B21\uFF0C\u6536\u96C6\u4F9D\u8D56\n  _effect.run()\n\n  // \u5B58\u50A8\u76D1\u542C\u51FD\u6570\u5E76\u8FD4\u56DE\uFF0C\u8FD4\u56DE\u7684\u76D1\u542C\u51FD\u6570\u53EF\u4EE5\u4F9B\u968F\u65F6\u8C03\u7528\u3002\n  const runner = _effect.run.bind(_effect) as ReactiveEffectRunner\n  runner.effect = _effect\n  return runner\n}\n\n// \u6536\u96C6\nexport function track(target: object, key: unknown) {\n  // \u5982\u679C\u6709\u53EF\u88AB\u6536\u96C6\u7684\u4F9D\u8D56\n  if (activeEffect) {\n    // \u5B58\u50A8\u65B9\u5F0F WeakMap(target -> Map(key -> dep)) dep\u4E2D\u5B58\u50A8\u7684\u4E3AReactiveEffect\u5BF9\u8C61\n    let depsMap = targetMap.get(target)\n    if (!depsMap) {\n      targetMap.set(target, (depsMap = new Map()))\n    }\n    let dep = depsMap.get(key)\n    if (!dep) {\n      depsMap.set(key, (dep = createDep()))\n    }\n\n    trackEffects(dep)\n  }\n}\nexport function trackEffects(dep: Dep) {\n  // Set\u4E2D\u6CA1\u6709\u624D\u6267\u884C\u63D2\u5165\u52A8\u4F5C\n  if (!dep.has(activeEffect!)) {\n    dep.add(activeEffect!) // ! \u4E3ATS\u975E\u7A7A\u65AD\u8A00\n    // \u53CC\u5411\u5F15\u7528\n    activeEffect!.deps.push(dep)\n  }\n}\n\n// \u89E6\u53D1\nexport function trigger(target: object, key?: unknown, value?: unknown) {\n  const depsMap = targetMap.get(target)\n  // \u5982\u679C\u6CA1\u6709\u88AB\u6536\u96C6\u8FC7\uFF0C\u76F4\u63A5\u9000\u51FA\n  if (!depsMap) return\n\n  let deps: (Dep | undefined)[] = []\n\n  // \u4E0D\u4F7F\u7528undefined\u7684\u539F\u56E0\u662F\uFF0C\u6709\u4E9B\u6D4F\u89C8\u5668\u5BF9\u4E8Eundefined\u4E0D\u662F\u4FDD\u7559\u5B57\u6216\u5173\u952E\u5B57\uFF0C\u53EF\u5BF9\u5176\u8FDB\u884C\u4FEE\u6539\u3002\u800Cvoid 0\u8FD4\u56DE\u7684\u662F\u7EAF\u6B63\u7684undefined\n  // \u5982\u679Ckey\u6709\u503C\uFF0C\u5C06\u83B7\u53D6\u5230\u7684dep\u653E\u5165\u5230deps\u4E2D\u3002\n  if (key !== void 0) {\n    deps.push(depsMap.get(key))\n  }\n\n  if (deps.length === 1) {\n    triggerEffects(deps[0])\n  }\n}\nexport function triggerEffects(dep: Dep) {\n  // \u7EDF\u4E00\u4E3A\u6570\u7EC4\u7C7B\u578B\n  const effects = Array.isArray(dep) ? dep : [...dep]\n  for (const effect of effects) {\n    triggerEffect(effect)\n  }\n}\n\nfunction triggerEffect(effect: ReactiveEffect) {\n  // \u5904\u7406\u9012\u5F52\u5F15\u7528\uFF0C\u9020\u6210\u6808\u6EA2\u51FA\u7684\u89E3\u51B3\u65B9\u5F0F\u3002\n  // \u5F53effect\u4F20\u5165\u7684\u76D1\u542C\u51FD\u6570\u4E2D\uFF0C\u6709\u4FEE\u6539proxy\u7684\u5C5E\u6027\u503C\u65F6\uFF0C\u4F1A\u9020\u6210\u5FAA\u73AF\u8C03\u7528\u81EA\u8EABrun\u65B9\u6CD5\u7684\u95EE\u9898\u3002\n  // effect() -> run() -> fn() -> \u66F4\u6539\u5C5E\u6027\u89E6\u53D1trigger() -> run() -> fn()  \u9020\u6210\u5FAA\u73AF\u8C03\u7528\n  // \u6240\u4EE5\u5FC5\u987B\u5224\u65AD\uFF0C\u89E6\u53D1\u7684\u76D1\u542C\u51FD\u6570\u4E0D\u80FD\u662F\u5F53\u524D\u6B63\u6FC0\u6D3B\u7684activeEffect\n  if (effect !== activeEffect) {\n    // \u89E6\u53D1\u7684\u65F6\u5019\uFF0C\u8C03\u5EA6\u5668\u5C06\u62E6\u622Arun\u65B9\u6CD5\u7684\u6267\u884C\n    if(effect.scheduler) {\n      effect.scheduler()\n    } else {\n      effect.run()\n    }\n  }\n}\n", "import { extend, hasChanged, isObject } from '@vue/shared'\nimport { track, trigger } from './effect'\nimport {\n  reactive,\n  ReactiveFlags,\n  reactiveMap,\n  shallowReactiveMap,\n  Target\n} from './reactive'\n\nconst get = createGetter()\nconst shallowGet = createGetter(true)\n\nfunction createGetter(shallow = false) {\n  return function get(target: Target, key: string | symbol, receiver: object) {\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      // \u662F\u5426\u88AB\u4EE3\u7406\u7684\u6807\u8BC6\u3002\n      return true\n    } else if (key === ReactiveFlags.IS_SHALLOW) {\n      return shallow\n    } else if (\n      key === ReactiveFlags.RAW &&\n      receiver === (shallow ? shallowReactiveMap : reactiveMap).get(target)\n    ) {\n      // \u5982\u679C\u83B7\u53D6\u539F\u59CB\u5BF9\u8C61\uFF0C\u5E76\u4E14\u4EE3\u7406\u5BF9\u8C61\u662F\u4EE5\u539F\u59CB\u5BF9\u8C61\u6536\u96C6\u7684\uFF0C\u76F4\u63A5\u8FD4\u56DE\u539F\u59CB\u5BF9\u8C61\n      return target\n    }\n    const res = Reflect.get(target, key)\n    // \u6536\u96C6\u4F9D\u8D56 \u521B\u5EFAdep -> effects\u4E2D\u63D2\u5165 -> effect\n    track(target, key)\n\n    // \u53EA\u4EE3\u7406\u7B2C\u4E00\u5C42\n    if (shallow) {\n      return res\n    }\n\n    // \u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u4E5F\u8F6C\u4E3A\u4EE3\u7406\n    if (isObject(res)) {\n      return reactive(res)\n    }\n    return res\n  }\n}\n\nconst set = createSetter()\nconst shallowSet = createSetter(true)\n\nfunction createSetter(shallow = false) {\n  return function set(target, key, value) {\n    const oldValue = (target as any)[key]\n    const result = Reflect.set(target, key, value)\n    if (hasChanged(value, oldValue)) {\n      // \u89E6\u53D1\u4F9D\u8D56 \u627E\u5230dep -> \u904D\u5386effects -> \u6267\u884C\u6BCF\u4E00\u4E2Aeffect\n      trigger(target, key, value)\n    }\n    return result\n  }\n}\n\nexport const mutableHandlers: ProxyHandler<object> = {\n  get,\n  set\n  // deleteProperty,\n  // has,\n  // ownKeys\n}\n\nexport const shallowReactiveHandlers = extend({}, mutableHandlers, {\n  get: shallowGet,\n  set: shallowSet\n})\n", "import { isObject } from '@vue/shared'\nimport { mutableHandlers, shallowReactiveHandlers } from './baseHandlers'\n\nexport const enum ReactiveFlags {\n  // \u662F\u5426\u662Freactive\u7684\u6807\u8BC6\u3002\u901A\u8FC7\u5176\u6765\u5224\u65AD\u662F\u5426\u88ABproxy\u4EE3\u7406\u8FC7\u3002\u5426\u5219\u9700\u8981\u6539\u5199[Symbol.toStringTag]\u503C\u624D\u65B9\u4FBF\u5224\u65AD\u3002\n  // \u6CA1\u6709\u8D4B\u503C\u64CD\u4F5C\uFF0C\u662F\u5728\u4EE3\u7406\u7684get\u51FD\u6570\u4E2D\u5224\u65AD\u7684\u3002\n  IS_REACTIVE = '__v_isReactive',\n  // \u662F\u5426\u662F shallowReactive \u7684\u6807\u8BC6\n  IS_SHALLOW = '__v_isShallow',\n  // \u539F\u59CB\u5BF9\u8C61\u6807\u8BC6\n  RAW = '__v_raw'\n}\n\nexport interface Target {\n  [ReactiveFlags.IS_REACTIVE]?: boolean\n  [ReactiveFlags.IS_SHALLOW]?: boolean\n  [ReactiveFlags.RAW]?: any\n}\n\nexport const reactiveMap = new WeakMap<Target, any>()\nexport const shallowReactiveMap = new WeakMap<Target, any>()\n\n// export function reactive<T extends object>(target: T): ProxyConstructor;\nexport function reactive(target) {\n  return createReactiveObject(target, mutableHandlers, reactiveMap)\n}\n\n// \u53EA\u76D1\u542C\u9996\u5C42\u5BF9\u8C61\u7684\u53D8\u5316\nexport function shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    shallowReactiveHandlers,\n    shallowReactiveMap\n  )\n}\n\nfunction createReactiveObject(\n  target: any,\n  baseHandlers: ProxyHandler<any>,\n  proxyMap\n) {\n  // \u5982\u679C\u4E0D\u662F\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FD4\u56DE\n  if (!isObject(target)) {\n    return target\n  }\n\n  // \u5982\u679C\u5DF2\u7ECF\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u76F4\u63A5\u8FD4\u56DE\n  if (target[ReactiveFlags.IS_REACTIVE]) {\n    return target\n  }\n\n  // \u5DF2\u5728Map\u4E2D\u7F13\u5B58\u7684\u76F4\u63A5\u4F7F\u7528\n  const existingProxy = proxyMap.get(target)\n  if (existingProxy) {\n    return existingProxy\n  }\n\n  // \u4F7F\u7528proxy\u4EE3\u7406\n  const proxy = new Proxy(target, baseHandlers)\n  // \u5B58\u50A8\u5230Map\u4E2D\n  proxyMap.set(target, proxy)\n\n  return proxy\n}\n\nexport function isReactive(value): boolean {\n  // \u8F6C\u4E3A\u5E03\u5C14\u503C\n  return !!(value && value[ReactiveFlags.IS_REACTIVE])\n}\n\nexport function isShallow(value): boolean {\n  // \u8F6C\u4E3A\u5E03\u5C14\u503C\n  return !!(value && value[ReactiveFlags.IS_SHALLOW])\n}\n\nexport function toRaw(observed) {\n  // \u5982\u679C\u5305\u542B__v_raw \u5C31\u53D6\u91CC\u9762\u7684\u539F\u59CB\u503C\n  // \uFF1F\uFF1F\uFF1F \u6E90\u7801\u4E2D\u6709\u5904\u7406\u591A\u5C42\u4EE3\u7406\u5D4C\u5957\u7684\u60C5\u51B5\uFF0C\u4E0D\u6E05\u695A\u4EC0\u4E48\u65F6\u5019\u4F1A\u51FA\u73B0\n  // return observed[ReactiveFlags.RAW] ? observed[ReactiveFlags.RAW] : observed;\n  return (observed && observed[ReactiveFlags.RAW]) || observed\n}\n\n// \u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u8F6C\u5316\u4E3Aproxy\nexport const toReactive = <T extends unknown>(value: T): T =>\n  isObject(value) ? reactive(value) : value\n", "import { hasChanged } from '@vue/shared'\nimport { createDep, Dep } from './dep'\nimport { trackEffects, activeEffect, triggerEffects } from './effect'\nimport { toReactive, toRaw, isReactive } from './reactive'\n\nexport interface Ref<T = any> {\n  value: T\n}\n\ntype RefBase<T> = {\n  dep?: Dep\n  value: T\n}\n\nexport function trackRefValue(ref: RefBase<any>) {\n  // \u5982\u679C\u5F53\u524D\u6709\u6FC0\u6D3B\u7684effect\n  if (activeEffect) {\n    // \u5904\u7406reactive\u5305\u88F9ref\u7684\u60C5\u51B5\n    ref = toRaw(ref)\n    // \u8C03\u7528\u6536\u96C6effect\n    trackEffects(ref.dep || (ref.dep = createDep()))\n  }\n}\nexport function triggerRefValue(ref: RefBase<any>) {\n  // \u5904\u7406reactive\u5305\u88F9ref\u7684\u60C5\u51B5\n  ref = toRaw(ref)\n  if (ref.dep) {\n    // \u8C03\u7528\u89E6\u53D1effect\n    triggerEffects(ref.dep)\n  }\n}\n\nexport function isRef(r: any): r is Ref {\n  return !!(r && r.__v_isRef === true)\n}\n\nexport function ref(value?: unknown) {\n  return createRef(value)\n}\n\nfunction createRef(rawValue: unknown) {\n  // \u5982\u679C\u5DF2\u7ECF\u662Fref \u8FD4\u56DE\u81EA\u8EAB\n  if (isRef(rawValue)) {\n    return rawValue\n  } else {\n    // \u521B\u5EFAref\n    return new RefImpl(rawValue)\n  }\n}\n\nclass RefImpl<T> {\n  private _value: T\n  private _rawValue: T\n\n  public dep: Dep = undefined\n  public readonly __v_isRef = true\n  constructor(value: T) {\n    // \u5982\u679Cvalue\u662Fproxy\uFF0C\u4F7F\u7528\u539F\u59CB\u503C\u4FDD\u5B58\n    this._rawValue = toRaw(value)\n    // \u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u53D8\u4E3Aproxy\n    this._value = toReactive(value)\n  }\n  get value() {\n    // \u6536\u96C6\u4F9D\u8D56\n    trackRefValue(this)\n    return this._value\n  }\n  set value(newVal) {\n    newVal = toRaw(newVal)\n    // \u4F7F\u7528\u539F\u59CB\u5BF9\u8C61\u6BD4\u8F83\n    if (hasChanged(newVal, this._rawValue)) {\n      this._rawValue = newVal\n      this._value = toReactive(newVal)\n      // \u89E6\u53D1\u4F9D\u8D56\n      triggerRefValue(this)\n    }\n  }\n}\n\n// \u89E6\u53D1ref\u7684effect\nexport function triggerRef(ref: Ref) {\n  triggerRefValue(ref)\n}\n\n// \u8FD4\u56DEref\u7684value\u5C5E\u6027\nexport function unRef(ref) {\n  return isRef(ref) ? ref.value : ref\n}\n\nconst shallowUnwrapHandlers = {\n  // get\u7684\u65F6\u5019\uFF0C\u4EE3\u7406\u5230ref \u7684.value\u5C5E\u6027\u4E0A\n  get: (target, key, receiver) => { return unRef(Reflect.get(target, key, receiver))},\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key]\n    // \u4E4B\u524D\u503C\u662Fref\uFF0C\u8D4B\u503C\u975Eref\uFF0C\u53EF\u4EE5\u66FF\u6362\u4E4B\u524Dref\u7684.value\u503C\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value\n      return true\n    } else {\n      // \u5426\u5219\uFF0C\u91CD\u65B0\u8D4B\u503C\n      return Reflect.set(target, key, value, receiver)\n    }\n  }\n}\n\n// render\u51FD\u6570/\u6A21\u677F\u4E2D \u4E0D\u9700\u8981\u4F7F\u7528.value\u5C5E\u6027\u7684\u5173\u952E\n// \u5C06ref\u518D\u4EE3\u7406\u4E00\u5C42\uFF0C\u8BBF\u95EE\u7684\u65F6\u5019\uFF0C\u76F4\u63A5\u4EE3\u7406\u5230.value\u5C5E\u6027\u4E0A\nexport function proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs)\n    ? objectWithRefs\n    : new Proxy(objectWithRefs, shallowUnwrapHandlers)\n}\n", "import { ReactiveEffect } from './effect'\nimport { isFunction, NOOP } from '@vue/shared'\nimport { Dep } from './dep'\nimport { trackRefValue, triggerRefValue } from './ref';\n\ntype ComputedGetter<T> = () => T\ntype ComputedSetter<T> = (v: T) => void\ntype WritableComputedOptions<T> = {\n  get: ComputedGetter<T>\n  set?: ComputedSetter<T>\n}\n/**\n * v \u652F\u6301get\u51FD\u6570\uFF0C\u6216\u8005\u5BF9\u8C61get\u3001set\u7684\u53C2\u6570\n * v \u8BA1\u7B97\u5C5E\u6027\u662F effect \u5957 effect\n * v \u8BA1\u7B97\u5C5E\u6027\u662F\u7C7Bref\n * v scheduler \u6BCF\u6B21\u503C\u53D8\u5316\u90FD\u4F1A\u6267\u884C\u3002\u4F46\u4F55\u65F6\u53D6\u503C\uFF0C\u53D6\u51B3\u4E8E\u4F55\u65F6\u8BFB\u53D6computed\u7684value\u503C\uFF0C\u8BFB\u53D6value\u503C\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A\n *    \u4E00\u79CD\u662F\uFF0C\u76F4\u63A5\u83B7\u53D6computed\u7684value\u503C\uFF08\u8FD9\u5C31\u662F\u7F13\u5B58\u7684\u539F\u56E0\uFF09\uFF1B\u53E6\u4E00\u79CD\u901A\u8FC7\u89E6\u53D1computed\u5305\u88F9\u7684effect\uFF0C\u8BFB\u53D6computed\u7684value\u3002\n *\n */\nclass ComputedImpl<T> {\n  public dep: Dep = undefined\n  private _value: T\n  private readonly effect: ReactiveEffect\n\n  public readonly __v_isRef = true\n  public _dirty: boolean = true // \u9ED8\u8BA4\u53D6\u503C\u7684\u65F6\u5019\u8FDB\u884C\u8BA1\u7B97\n  constructor(\n    getters: ComputedGetter<T>,\n    private readonly _setter: ComputedSetter<T>\n  ) {\n    this.effect = new ReactiveEffect(getters, () => {\n      // \u6BCF\u6B21getter\u4E2D\u7684\u54CD\u5E94\u5F0F\u5C5E\u6027\u4FEE\u6539\u90FD\u4F1A\u8FDB\u5165\uFF0C\u901A\u8FC7_dirty\u6765\u63A7\u5236\u662F\u5426\u89E6\u53D1\u4F9D\u8D56\n      if (!this._dirty) {\n        this._dirty = true\n        // \u89E6\u53D1computed\u7684effect\u4F9D\u8D56\uFF0C\u7531\u4E8E\u89E6\u53D1\u4F9D\u8D56\u4F1A\u518D\u6B21\u6267\u884Ccomputed\u7684get\u51FD\u6570\uFF0C\u503C\u4F1A\u518D\u6B21\u66F4\u65B0\u3002\n        triggerRefValue(this)\n      }\n    })\n  }\n  get value() {\n    // \u6536\u96C6\u4F9D\u8D56\n    trackRefValue(this)\n    if (this._dirty) {\n      this._dirty = false\n      // \u8BA1\u7B97\u5C5E\u6027\u7684\u8FD4\u56DE\u503C\n      this._value = this.effect.run()\n    }\n    return this._value\n  }\n  set value(newValue: T) {\n    this._setter(newValue)\n  }\n}\n\nexport function computed<T>(\n  getterOrOptions: ComputedGetter<T> | WritableComputedOptions<T>\n) {\n  let getter: ComputedGetter<T>\n  let setter: ComputedSetter<T>\n\n  // \u53EA\u4F20\u5165\u51FD\u6570\u5F53getter\u5904\u7406\u3002\n  const onlyGetter = isFunction(getterOrOptions)\n  if (onlyGetter) {\n    getter = getterOrOptions\n    // \u8865\u5145setter\u4E3A\u7A7A\u51FD\u6570\n    setter = NOOP\n  } else {\n    // \u5BF9\u8C61\u5F62\u5F0F\n    getter = getterOrOptions.get\n    setter = getterOrOptions.set\n  }\n\n  const cRef = new ComputedImpl(getter, setter)\n  return cRef\n}\n", "import { hasOwn } from '@vue/shared'\n\nconst enum AccessTypes {\n  DATA,\n  PROPS,\n  SETUP\n}\n\nexport const publicPropertiesMap = {\n  $attrs: i => i.attrs,\n  $slots: i => i.slots\n}\n\n/**\n * \u7EC4\u4EF6\u7684proxy\u62E6\u622A\u64CD\u4F5C\n * \u5BF9\u4E8E\u7EC4\u4EF6 \u6E32\u67D3\u4E0A\u4E0B\u6587\u7684\u6240\u6709\u5C5E\u6027\u64CD\u4F5C\u90FD\u4F1A\u8D70\u8FD9\u91CC\n * \u8FD9\u53EA\u662F\u4E2A\u5206\u53D1\u5668\n */\nexport const PublicInstanceProxyHandlers = {\n  get({ _: instance }, key) {\n    const { data, props, setupState, attrs, ctx, accessCache } = instance\n\n    // \u4E0D\u662F$\u5F00\u5934\u7684\n    if (key[0] !== '$') {\n      // \u4ECE\u7F13\u5B58\u4E2D\u83B7\u53D6\u7C7B\u578B\u3002\u7F13\u5B58\u7C7B\u578B\u662F\u4E3A\u4E86\u51CF\u5C11 hasOwnProperty \u7684\u8C03\u7528\n      const n = accessCache![key]\n      if (n !== undefined) {\n        switch (n) {\n          case AccessTypes.SETUP:\n            return setupState[key]\n          case AccessTypes.DATA:\n            return data[key]\n          case AccessTypes.PROPS:\n            return props[key]\n        }\n      }\n      // \u8FD9\u91CC\u7684\u67E5\u627E\u662F\u6709\u5148\u540E\u987A\u5E8F\u7684\uFF0C\u4E5F\u5C31\u662F\u540C\u65F6\u51FA\u73B0\u7684\u60C5\u51B5\uFF0C\u4F18\u5148\u7EA7\u4ECE\u4E0A\u5230\u4E0B(setupState -> data -> props)\n      else if (setupState && hasOwn(setupState, key)) { // \u5728setupState\u4E2D\u627E\u5230\n        accessCache[key] = AccessTypes.SETUP\n        return setupState[key]\n      } else if (data && hasOwn(data, key)) { // \u5728data\u4E2D\u627E\u5230\n        accessCache[key] = AccessTypes.DATA\n        // \u6570\u636E\u5DF2\u7ECF\u662F\u54CD\u5E94\u5F0F\u4E86\n        return data[key]\n      } else if (props && hasOwn(props, key)) { // \u5728props\u4E2D\u627E\u5230\n        accessCache[key] = AccessTypes.PROPS\n        return props[key]\n      }\n    }\n\n    // $\u5F00\u5934\u7684\u5C5E\u6027\u83B7\u53D6\n    const publicGetter = publicPropertiesMap[key]\n    if (publicGetter) {\n      return publicGetter(instance)\n    }\n  },\n  set({ _: instance }, key, value) {\n    const { setupState, data, props } = instance\n    // \u6570\u636E\u5DF2\u7ECF\u88ABproxy\u4EE3\u7406\uFF0Cset\u64CD\u4F5C\u4F1A\u8D70proxy\u4E2D\u7684\u4EE3\u7406\n    if (setupState && hasOwn(setupState, key)) {\n      setupState[key] = value\n      return true\n    } else if (data && hasOwn(data, key)) {\n      data[key] = value\n      return true\n    } else if (props && hasOwn(props, key)) {\n      // \u4E0D\u5141\u8BB8\u4FEE\u6539\n      console.warn('props \u4E0D\u5141\u8BB8\u4FEE\u6539')\n      return false\n    }\n  }\n}\n", "import { reactive } from '@vue/reactivity'\nimport { isObject } from '@vue/shared'\n\nexport function applyOptions(instance) {\n  const options = instance.type\n  const publicThis = instance.proxy\n\n  const { data: dataOptions } = options\n\n  // \u5982\u679C\u6709data\u5C5E\u6027\n  if (dataOptions) {\n    // \u5C06data\u4E2D\u7684this\u6307\u5411\u7EC4\u4EF6\u5B9E\u4F8B\u7684proxy\n    const data = dataOptions.call(publicThis, publicThis)\n\n    if (isObject(data)) {\n      // \u7ED9data\u6DFB\u52A0\u54CD\u5E94\u5F0F\n      instance.data = reactive(data)\n    }\n  }\n}\n", "import { shallowReactive, toRaw } from '@vue/reactivity'\nimport { hasOwn, PatchFlags } from '@vue/shared'\n\n/**\n * \u521D\u59CB\u5316props\n * 1. \u83B7\u53D6\u5230\u7EC4\u4EF6\u7684props\u5C5E\u6027(vnode.type.props)\uFF0C\u83B7\u53D6\u5230\u7528\u6237\u4F20\u5165\u7684\u5C5E\u6027\uFF08vnode.props\uFF09\n * 2. \u7528\u6237\u4F20\u5165\u7684\u5C5E\u6027\u5982\u679C\u5728\u7EC4\u4EF6\u7684props\u4E2D\u627E\u5230\uFF0C\u5C31\u653E\u5230\u7EC4\u4EF6\u5B9E\u4F8B\u7684props\uFF0C\u5E76\u4E14\u8C03\u7528shallowReactive\uFF0C\u6D45\u5C42\u4EE3\u7406\n * 3. \u5982\u679C\u6CA1\u6709\u627E\u5230\u7684\u8BDD\uFF0C\u653E\u5230\u7EC4\u4EF6\u5B9E\u4F8B\u7684attrs\u4E0A\uFF0C\u6CA1\u6709\u54CD\u5E94\u5F0F\n * 4. \u7EC4\u4EF6\u5C5E\u6027\u662F\u5355\u5411\u6570\u636E\u6D41\uFF0C\u9996\u5148\u7981\u6B62\u7EC4\u4EF6\u66F4\u6539props\uFF0C\u4FEE\u6539props\u7684\u5B50\u5C5E\u6027\uFF0C\u7531\u4E8E\u65E0\u54CD\u5E94\u5F0F\uFF0C\u89C6\u56FE\u4E5F\u4E0D\u4F1A\u66F4\u65B0\n */\nexport function initProps(instance, rawProps, isStateful) {\n  const props = {}\n  const attrs = {}\n\n  // \u6839\u636E\u7528\u6237\u4F20\u5165\u7684props \u751F\u6210props\u548Cattrs\n  setFullProps(instance, rawProps, props, attrs)\n\n  // \u7528\u6237\u672A\u4F20\u4F46\u662F\u7EC4\u4EF6\u63A5\u6536\u7684props\uFF0C\u7F6E\u4E3Aundefined\uFF0C\u5426\u5219\u4F1A\u5F71\u54CD\u4F9D\u8D56\u6536\u96C6\n  for (const key in instance.propsOptions[0]) {\n    if (!(key in props)) {\n      props[key] = undefined\n    }\n  }\n\n  if (isStateful) {\n    // props \u53EA\u6709\u6700\u5916\u5C42\u662F\u54CD\u5E94\u5F0F\n    instance.props = shallowReactive(props)\n  } else {\n    // \u51FD\u6570\u5F0F\u7EC4\u4EF6\uFF0C\u4F7F\u7528attrs\u4F5C\u4E3Aprops\n    instance.props = attrs\n  }\n\n  // attrs \u65E0\u54CD\u5E94\u5F0F\n  instance.attrs = attrs\n}\n\nfunction setFullProps(instance, rawProps, props, attrs) {\n  // vnode.type.props \u7EC4\u4EF6\u7684\u7684props\n  const [options] = instance.propsOptions\n\n  // rawProps \u4E3A\u7528\u6237\u4F20\u5165\u7684props\uFF08vnode.props\uFF09\n  if (rawProps) {\n    for (const key in rawProps) {\n      const value = rawProps[key]\n      // \u7528\u6237\u4F20\u5165\u7684\u5728options\u4E2D\u6709\uFF0C\u653E\u5165props\n      if (options && hasOwn(options, key)) {\n        props[key] = value\n      } else {\n        // \u7528\u6237\u4F20\u5165\u7684\u5728options\u4E2D\u6CA1\u6709\uFF0C\u653E\u5165attrs\n        if (!(key in attrs) || value !== attrs[key]) {\n          attrs[key] = value\n        }\n      }\n    }\n  }\n}\n\n/**\n * \u66F4\u65B0props\uFF0C\u6D89\u53CA\u5230props\u3001attrs\u7684\u65B0\u589E\u3001\u4FEE\u6539\u3001\u5220\u9664\n * \u4F20\u5165\u53C2\u6570\u90FD\u4E3Aprops\u539F\u59CB\u5BF9\u8C61\n * \u4F18\u5316\u65B9\u5F0F\uFF0C\u5168\u91CF\u66F4\u65B0\u548C\u5C40\u90E8\u66F4\u65B0\n */\nexport function updateProps(instance, rawProps, rawPrevProps, optimized) {\n  const {\n    props,\n    attrs,\n    vnode: { patchFlag }\n  } = instance\n  // \u539F\u59CB\u503C\n  const rawCurrentProps = toRaw(props)\n  const [options] = instance.propsOptions\n\n  // \u4F18\u5316\u6A21\u5F0F\uFF0C\u5E76\u4E14\u4E0D\u662FFULL_PROPS\u7684\u903B\u8F91\n  if ((optimized || patchFlag > 0) && !(patchFlag & PatchFlags.FULL_PROPS)) {\n  } else {\n    // \u5168\u91CF\u66F4\u65B0\n    // \u65B0\u589E\u53CA\u4FEE\u6539\n    setFullProps(instance, rawProps, props, attrs)\n\n    // \u5220\u9664\u64CD\u4F5C\n    // 1. props\n    // \u4EE5\u524D\u6709\u503C\u73B0\u65B0\u4F20\u7684\u6CA1\u6709\uFF0C\u5C06\u5C5E\u6027\u7F6E\u4E3Aundefined\u3002\u5982\u679C\u7EC4\u4EF6\u6CA1\u6709\u63A5\u6536props\u5C31\u5220\u9664\u6389\n    for (const key in rawCurrentProps) {\n      if (!rawProps || !hasOwn(rawProps, key)) {\n        if (options) {\n          // \u4E4B\u524D\u6709\u503C \u7F6E\u4E3Aundefined\n          if (rawPrevProps && rawPrevProps[key] !== undefined) {\n            props[key] = undefined\n          }\n        } else {\n          // \u7EC4\u4EF6\u6CA1\u6709\u63A5\u6536props\u5C31\u5220\u9664\u6389\n          delete props[key]\n        }\n      }\n    }\n\n    // 2. attrs\n    // \u5982\u679C\u6CA1\u6709props\uFF0Cattrs\u548Cprops\u5C31\u6307\u5411\u4E86\u540C\u4E00\u4E2A\u539F\u59CB\u5BF9\u8C61\uFF0C\u8FD9\u65F6\u5019\u5DF2\u7ECF\u66F4\u65B0\u4E86\n    // \u5982\u679C\u7528\u6237\u65B0\u4F20\u5165\u7684\u5C5E\u6027\u4E2D\uFF0C\u6709\u4E0D\u5728attrs\u4E2D\u7684\uFF0C\u5C31\u5220\u9664\u6389\n    if (attrs !== rawCurrentProps) {\n      for (const key in attrs) {\n        if (!hasOwn(rawProps, key)) {\n          delete attrs[key]\n        }\n      }\n    }\n  }\n}\n", "import { toHandlerKey } from '@vue/shared'\n\n// \u67EF\u7406\u5316\u7684\u65B9\u5F0F\uFF0C\u9ED8\u8BA4\u4F20\u5165\u4E86instance\u3002event\u4E3A\u65F6\u95F4\u540D\uFF0CrawArgs\u4E3A\u540E\u9762\u7684\u53C2\u6570\nexport function emit(instance, event, ...rawArgs) {\n  if (instance.isUnmounted) return\n  // \u4E8B\u4EF6\u5B58\u50A8\u5728\u4E86props\u4E2D\n  const props = instance.vnode.props\n\n  // \u5728props\u4E2D\u67E5\u627E\u4E8B\u4EF6\u5904\u7406\u51FD\u6570  on+\u9996\u5B57\u6BCD\u5927\u5199\n  // \u95EE\u9898\uFF1F\uFF1F? \u5728props\u4E2D\u4F20\u5165\u7684\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\uFF0C\u5982\u4F55\u83B7\u53D6\u5230\u7EC4\u4EF6\u5B9E\u4F8B\uFF0C\u6216\u8005this\n  let handler = props[toHandlerKey(event)]\n  if (handler) {\n    handler(...rawArgs)\n  }\n}\n", "// \u4F20\u9001\u95E8\n\nimport { isString, ShapeFlags } from '@vue/shared'\n// \u662F\u5426\u662F\u4F20\u9001\u95E8\nexport const isTeleport = (type) => type.__isTeleport\n\n// \u662F\u5426\u7981\u7528\u4F20\u9001\u95E8\nconst isTeleportDisabled = (props) =>\n  props && (props.disabled || props.disabled === '')\n\n// target \u4ECE\u5C5E\u6027to\u4E2D\u83B7\u53D6\nconst resolveTarget = (props, select) => {\n  const targetSelector = props && props.to\n  // \u901A\u8FC7\u6807\u7B7E\u7B26\u83B7\u53D6\n  if (isString(targetSelector)) {\n    return select(targetSelector)\n  } else {\n    // \u5143\u7D20\n    return targetSelector\n  }\n}\n\n/**\n * teleport\n * 1. \u6D41\u7A0B\u5206\u4E3A\u521B\u5EFA\u548Cpatch\n * 1.1 \u521B\u5EFA\u6D41\u7A0B \u533A\u5206\u662F\u5426\u7981\u7528\uFF0C\u63D2\u5165\u5230\u4E3B\u5BB9\u5668\u8FD8\u662F\u4F20\u9001\u95E8\n * 1.2 patch\u6D41\u7A0B\n * 1.2.1 patch children\n * 1.2.2 \u79FB\u52A8 (\u4E09\u79CD\u60C5\u51B5)\n * 1.2.2.1 \u73B0\u5728\u7981\u7528\uFF0C\u4E4B\u524D\u4E0D\u7981\u7528\uFF0C\u9700\u8981\u4ECE\u4F20\u9001\u95E8\u79FB\u5230\u4E3B\u5BB9\u5668\n * 1.2.2.2 \u73B0\u5728\u4E0D\u7981\u7528\uFF0C\u4F20\u9001\u5730\u5740\u53D8\u5316\uFF08\u4E0D\u7BA1\u4E4B\u524D\u662F\u5426\u7981\u7528\uFF09\u90FD\u79FB\u5165\u65B0\u7684\u4F20\u9001\u5730\u5740\n * 1.2.2.3 \u73B0\u5728\u4E0D\u7981\u7528\uFF0C\u4F20\u9001\u5730\u5740\u672A\u53D8\uFF0C\u4E4B\u524D\u7981\u7528\uFF0C\u9700\u8981\u4ECE\u4E3B\u5BB9\u5668\u79FB\u5230\u65B0\u7684\u4F20\u9001\u95E8\n */\nconst TeleportImpl = {\n  __isTeleport: true,\n  process(n1, n2, container, anchor, parentComponent, optimized, internals) {\n    const {\n      mc: mountChildren,\n      pc: patchChildren,\n      pbc: patchBlockChildren,\n      o: { insert, createText, querySelector }\n    } = internals\n\n    // \u662F\u5426\u7981\u7528\u4F20\u9001\u95E8\n    const disabled = isTeleportDisabled(n2.props)\n    let { shapeFlag, children, dynamicChildren } = n2\n\n    // \u65B0\u589E\n    if (n1 === null) {\n      // \u5728 porps \u4E2D\uFF0C\u83B7\u53D6to\u5C5E\u6027\uFF0C\u4F5C\u4E3Atarget\n      const target = (n2.target = resolveTarget(n2.props, querySelector))\n      const targetAnchor = (n2.targetAnchor = createText(''))\n      if (target) {\n        // \u63D2\u5165anchor\n        insert(targetAnchor, target)\n      }\n\n      const mount = (container, anchor) => {\n        // \u4F20\u9001\u95E8\u7684children\u5F3A\u5236\u4E3A\u6570\u7EC4\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          mountChildren(children, container, anchor, parentComponent, optimized)\n        }\n      }\n      // \u5982\u679C\u7981\u7528\uFF0C\u6B63\u5E38\u6302\u8F7D\n      if (disabled) {\n        mount(container, anchor)\n      } else if (target) {\n        // \u4F20\u9001\u95E8\n        mount(target, targetAnchor)\n      }\n    } else {\n      // update content\n      n2.el = n1.el\n      // \u6B63\u5E38anchor\n      const mainAnchor = (n2.anchor = n1.anchor)!\n      // \u4F20\u9001\u5730\u5740\n      const target = (n2.target = n1.target)!\n      // \u4F20\u9001anchor\n      const targetAnchor = (n2.targetAnchor = n1.targetAnchor)!\n      // \u662F\u5426\u88AB\u7981\u7528\n      const wasDisabled = isTeleportDisabled(n1.props)\n      // \u5F53\u524D\u5BB9\u5668\n      const currentContainer = wasDisabled ? container : target\n      // \u5F53\u524Danchor\n      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor\n\n      // \u52A8\u6001\u8282\u70B9 \u4F18\u5316\n      if (dynamicChildren) {\n        patchBlockChildren(\n          n1.dynamicChildren!,\n          dynamicChildren,\n          currentContainer,\n          parentComponent\n        )\n      } else if (!optimized) {\n        // \u6CA1\u6709\u4F18\u5316 patchChildren\n        patchChildren(\n          n1,\n          n2,\n          currentContainer,\n          currentAnchor,\n          parentComponent,\n          false\n        )\n      }\n\n      // \u4F20\u9001\u4F4D\u7F6E\u653E\u751F\u53D8\u5316 moveTeleport\n      if (disabled) {\n        if (!wasDisabled) {\n          // \u73B0\u5728\u7981\u7528\uFF0C\u4E4B\u524D\u4E0D\u7981\u7528\uFF0C\u9700\u8981\u628A\u5143\u7D20\u79FB\u5230\u4E3B\u5BB9\u5668\n          moveTeleport(\n            n2,\n            container,\n            mainAnchor, // parentVNode\n            internals,\n            TeleportMoveTypes.TOGGLE // \u542F\u7528\u7981\u7528\u5207\u6362\n          )\n        }\n      } else {\n        // \u73B0\u5728\u4E0D\u7981\u7528\n\n        // \u4F20\u9001\u5730\u5740\u53D1\u751F\u53D8\u5316\n        if (n2.props && n2.props.to !== n1.props && n1.props.to) {\n          const nextTarget = resolveTarget(n2.props, querySelector)\n          if (nextTarget) {\n            moveTeleport(\n              n2,\n              nextTarget,\n              null,\n              internals,\n              TeleportMoveTypes.TARGET_CHANGE\n            )\n          }\n        } else if (wasDisabled) {\n          // \u4E4B\u524D\u7981\u7528 \u9700\u8981\u4ECE\u4E3B\u5BB9\u5668\u79FB\u52A8\u5230\u4F20\u9001\u95E8\n          moveTeleport(\n            n2,\n            target,\n            targetAnchor,\n            internals,\n            TeleportMoveTypes.TOGGLE\n          )\n        }\n      }\n    }\n  }\n}\n\n// \u4E09\u79CD\u7C7B\u578B\nexport const enum TeleportMoveTypes {\n  TARGET_CHANGE, // target\u6539\u53D8\n  TOGGLE, // \u7981\u7528\u542F\u7528\u5207\u6362\n  // REORDER // \u79FB\u52A8\u5230\u6216\u8005\u79FB\u51FA\u4E3B\u5BB9\u5668\n}\n\n// \u79FB\u52A8\nfunction moveTeleport(\n  vnode,\n  container,\n  parentAnchor,\n  { o: { insert }, m: move },\n  moveType\n) {\n  // target\u6539\u53D8\n  if (moveType === TeleportMoveTypes.TARGET_CHANGE) {\n    // \u64CD\u4F5Canchor\n    insert(vnode.targetAnchor!, container, parentAnchor)\n  }\n  const { shapeFlag, children } = vnode\n\n  // \u79FB\u52A8\n  if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n    for (let i = 0; i < children.length; i++) {\n      move(children[i], container, parentAnchor)\n    }\n  }\n}\n\nexport const Teleport = TeleportImpl as any as {\n  __isTeleport: true\n}\n", "import { isObject, isArray, isString, ShapeFlags } from '@vue/shared'\nimport { isFunction } from '../../shared/src/index'\nimport { isTeleport } from './components/Teleport'\n\nexport type Component = {\n  props: any\n  vnode: VNode\n  update: any\n  next: VNode\n}\n\nexport type VNodeTypes = string | VNode | Component | Text | typeof Fragment | typeof Comment\n\nexport const Text = Symbol('Text')\n\nexport const Fragment = Symbol('Fragment')\n\nexport const Comment = Symbol('Comment')\n\ntype VNodeChildAtom = VNode | string | number | boolean | null | undefined\n\nexport type VNodeArrayChildren = Array<VNodeArrayChildren | VNodeChildAtom>\n\nexport type VNodeChild = VNodeChildAtom | VNodeArrayChildren\n\nexport type VNodeNormalizedChildren = string | VNodeArrayChildren | null\n\nexport interface VNode {\n  __v_isVNode: true\n  el: Element | null\n  type: VNodeTypes\n  props: any\n  key: number | string | null\n  anchor: Element | null\n  children: VNodeNormalizedChildren\n  component: Component\n  shapeFlag: number\n  patchFlag: number\n  dynamicProps: string[] | null\n  dynamicChildren: VNode[] | null\n}\n\nexport function isVNode(vnode: any): boolean {\n  return !!(vnode && vnode.__v_isVNode)\n}\n\nexport function isSameVNodeType(n1, n2) {\n  return n1.type === n2.type && n1.key === n2.key\n}\n\n/**\n * block \u6808\u3002\n * \u6808\u7ED3\u6784\u662F\u7531\u4E8E\u4F1A\u5B58\u5728block\u5D4C\u5957block\u7684\u60C5\u51B5\u3002\u9047\u89C1block\u5165\u6808\uFF0C\u8282\u70B9\u5904\u7406\u5B8C\u6BD5\u51FA\u6808\n * dynamicChildren\u4F1A\u5148\u5B58\u50A8\u5728\u6808\u4E2D\uFF0C\u5F53block\u6700\u7EC8\u521B\u5EFA\u7684\u65F6\u5019\uFF0C\u505A\u8D4B\u503C\uFF0C\u51FA\u6808\n */\nexport const blockStack = []\n// \u5F53\u524Dblock\nexport let currentBlock = null\n\n// \u6253\u5F00block \u5411\u6808\u4E2D\u538B\u5165\u3002block\u7684\u7B2C\u4E00\u6B65\u64CD\u4F5C\nexport function openBlock(disableTracking = false) {\n  blockStack.push((currentBlock = disableTracking ? null : []))\n}\n\n// \u5173\u95EDblock\uFF0Cblock\u4ECE\u6808\u4E2D\u5F39\u51FA\uFF0C\u5F53\u524Dblock\u524D\u79FB\u3002block\u6267\u884C\u7ED3\u675F\uFF0C\u628A\u73AF\u5883\u8FD8\u7ED9\u4E0A\u4E00\u5C42\nexport function closeBlock() {\n  blockStack.pop()\n  currentBlock = blockStack[blockStack.length - 1] || null\n}\n\n// \u7ED9 dynamicChildren \u8D4B\u503C\uFF0C\u51FA\u6808\nfunction setupBlock(vnode) {\n  vnode.dynamicChildren = currentBlock || []\n\n  // \u5F39\u51FA\n  closeBlock()\n\n  return vnode\n}\n\n/**\n * \u4EE3\u66FFh\u51FD\u6570\uFF0C\u521B\u5EFAvnode\u3002(h\u51FD\u6570\u662F\u901A\u7528\u65B9\u6848\uFF0C\u56E0\u6B64\u9700\u8981\u5BF9\u53C2\u6570\u8FDB\u884C\u5224\u65AD)\n * block\u4F5C\u7528\u5C31\u662F\u6536\u96C6\u52A8\u6001\u8282\u70B9\n */\nexport function createElementBlock(\n  type,\n  props?,\n  children?,\n  patchFlag?: number,\n  dynamicProps?: string[],\n  shapeFlag?: number\n) {\n  return setupBlock(\n    createBaseVNode(\n      type,\n      props,\n      children,\n      patchFlag,\n      dynamicProps,\n      shapeFlag,\n      true,\n    )\n  )\n}\n\n// createElementVNode \u7B49\u4EF7\u4E8E createBaseVNode\nexport { createBaseVNode as createElementVNode }\n\n/**\n * v \u5B9A\u4E49VNode\u6570\u636E\u7ED3\u6784\n * v \u6839\u636E\u53C2\u6570\u5904\u7406VNode\u7684shapeFlag\u7C7B\u578B\n * v type \u6709\u53EF\u80FD\u662F \u7EC4\u4EF6\u7C7B\u578B\u3001\u5143\u7D20\u7C7B\u578B\u3001\u6587\u672C\u7C7B\u578B\n * x \u89C4\u8303\u5316\n */\nexport function createVNode(\n  type,\n  props = null,\n  children = null,\n  patchFlag = 0,\n  dynamicProps: string[] | null = null,\n  isBlockNode = false\n) {\n  const shapeFlag = isString(type)\n    ? ShapeFlags.ELEMENT\n    : isTeleport(type)\n    ? ShapeFlags.TELEPORT\n    : isObject(type)\n    ? ShapeFlags.STATEFUL_COMPONENT\n    : isFunction(type)\n    ? ShapeFlags.FUNCTIONAL_COMPONENT\n    : 0\n\n  // TODO class \u548C style \u89C4\u8303\u5316\n\n  return createBaseVNode(\n    type,\n    props,\n    children,\n    patchFlag,\n    dynamicProps,\n    shapeFlag,\n    isBlockNode,\n    true\n  )\n}\n\nfunction createBaseVNode(\n  type: any,\n  props: any = null,\n  children: any = null,\n  patchFlag = 0,\n  dynamicProps: string[] | null = null,\n  shapeFlag = type === Fragment ? 0 : ShapeFlags.ELEMENT,\n  isBlockNode = false,\n  needFullChildrenNormalization = false\n) {\n  const vnode = {\n    __v_isVNode: true, // \u662F\u5426\u662Fvnode\u7684\u6807\u8BC6\n    appContext: null, // app\u5B9E\u4F8B\n    el: null, // \u865A\u62DFdom\u7ED1\u5B9A\u7684\u771F\u5B9Edom\n    type,\n    props,\n    key: props?.key,\n    anchor: null,\n    children,\n    component: null,\n    shapeFlag, // \u7C7B\u578B\u6807\u8BC6\n    patchFlag, // \u4F18\u5316\u6807\u8BC6\n    dynamicProps, // \u52A8\u6001\u5C5E\u6027\n    dynamicChildren: null // \u52A8\u6001\u5B50\u8282\u70B9\n  }\n\n  // children\u89C4\u8303\u5316\n  if (needFullChildrenNormalization) {\n    normalizeChildren(vnode, children)\n  } else if (children) {\n    // complier\u7F16\u8BD1\u540E\u7684\u4F1A\u8D70\u8FD9\u91CC\n    // \u5982\u679C\u4F20\u4E86\u5B50\u5143\u7D20\uFF0C\u53EA\u80FD\u662F\u5B57\u7B26\u4E32\u6216\u8005\u6570\u7EC4\n    vnode.shapeFlag |= isString(children)\n      ? ShapeFlags.TEXT_CHILDREN\n      : ShapeFlags.ARRAY_CHILDREN\n  }\n\n  // \u6709currentBlock\uFF0C\u5E76\u4E14\u5F53\u524D\u6709\u52A8\u6001\u6807\u8BB0\uFF0C\u5411\u6808\u4E2D\u63D2\u5165\u5F53\u524Dvnode\n  if (\n    // \u907F\u514Dblock\u6536\u96C6\u81EA\u8EAB\n    !isBlockNode &&\n    currentBlock && vnode.patchFlag > 0\n  ) {\n    currentBlock.push(vnode)\n  }\n\n  return vnode\n}\n\n/**\n * \u89C4\u8303\u5316child\n */\nexport function normalizeVNode(child: VNodeChild) {\n  // \u4F7F\u7528 ==, \u662F\u56E0\u4E3A\u5F02\u6B65\u7EC4\u4EF6\u7684\u7B2C\u4E00\u6B21\u6E32\u67D3\u8FD9\u91CC\u8FD4\u56DE\u7684\u662Fundefined\uFF0C\u4E3A\u4E86\u517C\u5BB9undefined\n  if (child == null || typeof child === 'boolean') {\n    // \u8FD9\u662F\u6CE8\u91CA\n    return createVNode(Comment)\n  } else if (isArray(child)) {\n    // \u5982\u679C\u662F\u6570\u7EC4\uFF0C\u5C06\u6570\u7EC4\u653E\u5230Fragment\u5BB9\u5668\u4E2D\u94FA\u5E73\n    // slots\u5C31\u662F\u6570\u7EC4\n    return createVNode(Fragment, null, child.slice())\n  } else if (isObject(child)) {\n    // vnode\n    // TODO \u5224\u65AD\u662F\u5426mount\u8FC7\n    return child\n  } else {\n    // \u5B57\u7B26\u4E32\n    return createVNode(Text, null, String(child))\n  }\n}\n\nexport function createTextVNode(text: string = '', patchFlag: number = 0) {\n  return createVNode(Text, null, text, patchFlag)\n}\n\n// \u6807\u51C6\u5316children\n// \u66F4\u597D\u7684\u5904\u7406solts\u3001\u975E\u5BF9\u8C61\u51FD\u6570\u7684 children\nexport function normalizeChildren(vnode, children) {\n  let type = 0\n  // \u907F\u514D children \u662Fnull\u65F6\uFF0C\u8D70\u5230\u4E0B\u9762\u7684\u903B\u8F91\u4E2D\n  if (children == null) {\n    children = null\n  } else if (isArray(children)) {\n    // \u6570\u7EC4children\n    type = ShapeFlags.ARRAY_CHILDREN\n  } else if (typeof children === 'object') {\n    // \u4E0D\u53EF\u4EE5\u662Fnull\n    // slots\n    type = ShapeFlags.SLOTS_CHILDREN\n    // TODO \u4E3Achildren \u8BBE\u7F6E _ctx \u4E0A\u4E0B\u6587\n  } else if (isFunction(children)) {\n    // slots\n    children = { default: children }\n    type = ShapeFlags.SLOTS_CHILDREN\n  } else {\n    // number string\u7B49 \u90FD\u6309\u7167\u5B57\u7B26\u4E32\u5904\u7406\n    children = String(children)\n\n    // teleport \u9700\u8981\u5C06children \u5F3A\u5236\u8F6C\u6362\u4E3A \u6570\u7EC4\uFF0C\u65B9\u4FBF\u79FB\u52A8\n    if(vnode.shapeFlag & ShapeFlags.TELEPORT) {\n      type = ShapeFlags.ARRAY_CHILDREN\n      children = [createTextVNode(children)]\n    } else {\n      type = ShapeFlags.TEXT_CHILDREN\n    }\n  }\n\n  vnode.children = children\n  vnode.shapeFlag |= type\n}\n", "import { isArray, isFunction, ShapeFlags } from '@vue/shared'\nimport { normalizeVNode } from './vnode'\n\n/**\n * \u521D\u59CB\u5316slots\n * 1. children\u4E3A\u5BF9\u8C61\u662F\u65F6\uFF0C\u662Fslots\n * 2. \u5C06children \u89C4\u8303\u5316\u4E4B\u540E\uFF0C\u8D4B\u503C\u7ED9instance.slots\n */\nexport function initSlots(instance, children) {\n  // \u5982\u679C\u662Fslots\u7C7B\u578B\n  if (instance.vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n    // \u89C4\u8303\u5316 \u5BF9\u8C61slots\n    normalizeObjectSlots(children, (instance.slots = {}), instance)\n  }\n}\n\n// \u66F4\u65B0slots\nexport function updateSlots(instance, children, optimized) {\n  const { vnode, slots } = instance\n  // \u662F\u5426\u9700\u8981\u5220\u9664\n  let needDeletionCheck = true\n\n  // \u662Fslots\n  if (vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n    // $stable hint\n    needDeletionCheck = !(children as any).$stable\n    // \u89C4\u8303\u5316\n    normalizeObjectSlots(children, slots, instance)\n  }\n\n  // \u5220\u9664\u65E0\u7528\u7684slot\n  if (needDeletionCheck) {\n    for (const key in slots) {\n      if (!(key in children)) {\n        delete slots[key]\n      }\n    }\n  }\n}\n\n// \u7279\u6B8A\u5C5E\u6027 _\u5F00\u5934 \u6216\u8005 $stable\nconst isInternalKey = (key) => key[0] === '_' && key === '$stable'\n\nfunction normalizeObjectSlots(rawSlots, slots, instance) {\n  for (const key in rawSlots) {\n    // \u8FC7\u6EE4\u7279\u6B8A\u5C5E\u6027\n    if (isInternalKey(key)) continue\n\n    const value = rawSlots[key]\n\n    // slot \u4F20\u5165\u7684\u662F\u4E2A\u51FD\u6570 \u8FD4\u56DEvnode\n    if (isFunction(value)) {\n      // \u89C4\u8303\u5316\n      // TODO \u6267\u884C\u4E0A\u4E0B\u6587\u7684\u6CE8\u5165\n      slots[key] = (props) => normalizeSlotValue(value(props))\n    } else {\n      // \u4F7F\u652F\u6301\uFF0Cstring\u3001number \u7B49\u7B49\u7C7B\u578B\n\n      const nomalized = normalizeSlotValue(value)\n      // \u4F7F\u7528\u65F6\u662F\u6309\u7167\u51FD\u6570\u65B9\u5F0F\u8C03\u7528\u7684\uFF0C\u5FC5\u987B\u7528\u51FD\u6570\u5305\u88F9\n      slots[key] = () => nomalized\n    }\n  }\n}\n\n// \u89C4\u8303\u5316 slot \u503C\u3002\u8C03\u7528 normalizeVNode\uFF0C\u89C4\u8303\u5316VNode\u3002\n// \u8FD4\u56DE\u7684\u90FD\u662F\u6570\u7EC4 \u652F\u6301\u591A\u4E2A\u5143\u7D20\nconst normalizeSlotValue = (value) =>\n  isArray(value) ? value.map(normalizeVNode) : [normalizeVNode(value)]\n", "import { isFunction, isObject, NOOP, ShapeFlags } from '@vue/shared'\nimport { Component, VNode, isVNode } from './vnode'\nimport { PublicInstanceProxyHandlers } from './componentPublicInstance'\nimport { applyOptions } from './componentOptions'\nimport { initProps } from './componentProps'\nimport { proxyRefs } from '@vue/reactivity'\nimport { emit } from './componentEmits'\nimport { initSlots } from './componentSlots'\n\nexport const enum LifecycleHooks {\n  BEFORE_CREATE = 'bc',\n  CREATED = 'c',\n  BEFORE_MOUNT = 'bm',\n  MOUNTED = 'm',\n  BEFORE_UPDATE = 'bu',\n  UPDATED = 'u',\n  BEFORE_UNMOUNT = 'bum',\n  UNMOUNTED = 'um',\n  DEACTIVATED = 'da',\n  ACTIVATED = 'a',\n  RENDER_TRIGGERED = 'rtg',\n  RENDER_TRACKED = 'rtc',\n  ERROR_CAPTURED = 'ec',\n  SERVER_PREFETCH = 'sp'\n}\n\nlet uid = 0\n\nexport let currentInstance = null\n\nexport function createComponentInstance(vnode: VNode, parent) {\n  const { type } = vnode\n  const instance = {\n    uid: uid++,\n    parent,\n    type,\n    vnode,\n    next: null, // \u8BB0\u5F55n2\n    subTree: null, // \u6E32\u67D3\u7EC4\u4EF6\u7684\u5185\u5BB9\n    accessCache: null, //\u4EE3\u7406\u8BBF\u95EE\u7F13\u5B58\n    effect: null,\n    ctx: {},\n    render: null,\n    proxy: null,\n\n    // \u901A\u8FC7\u94FE\u7684\u65B9\u5F0F \u83B7\u53D6\u5230\u7236\u7EC4\u4EF6\u6CE8\u518C\u7684\u5C5E\u6027\n    provides: parent ? parent.provides : Object.create(null),\n\n    propsOptions: [(type as Component).props],\n    props: {},\n    attrs: {},\n\n    setupState: {},\n    setupContext: null,\n\n    expose: null,\n    slots: null,\n    emit: null,\n\n    isMounted: false, // \u662F\u5426\u6302\u8F7D\n    isUnmounted: false, // \u662F\u5426\u5DF2\u5378\u8F7D\n    bm: null,\n    m: null,\n    bu: null,\n    u: null,\n    bum: null,\n    um: null,\n  }\n\n  instance.ctx = {\n    _: instance\n  }\n\n  // \u67EF\u7406\u5316\n  instance.emit = emit.bind(null, instance)\n\n  return instance\n}\n\n// TODO scope\n// TODO pauseTracking resetTracking\n// \u83B7\u53D6\u5F53\u524D\u6FC0\u6D3B\u7684\u7EC4\u4EF6\u5B9E\u4F8B\nexport const getCurrentInstance = () => currentInstance\n// \u8BBE\u7F6E\u5F53\u524D\u6FC0\u6D3B\u7684\u7EC4\u4EF6\u5B9E\u4F8B\nexport const setCurrentInstance = (instance) => {\n  currentInstance = instance\n}\n// \u5220\u9664\u5F53\u524D\u6FC0\u6D3B\u7684\u7EC4\u4EF6\u5B9E\u4F8B\nexport const unsetCurrentInstance = () => {\n  currentInstance = null\n}\n\n\n// \u57FA\u4E8E\u5BF9\u8C61 options \u65B9\u5F0F\u521B\u5EFA\u7684\uFF0C\u5C5E\u4E8E stateful \u7EC4\u4EF6\u3002\u8FD8\u6709\u4E00\u79CD\u662F\u51FD\u6570\u7C7B\u578B\u7684\nexport function isStatefulComponent(instance) {\n  return instance.vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT\n}\n\nexport function setupComponent(instance) {\n  const { props, children } = instance.vnode\n  // \u662F\u5426\u662F stateful \u7EC4\u4EF6\n  const isStateful = isStatefulComponent(instance)\n\n  // \u5904\u7406props \u548C attr\n  initProps(instance, props, isStateful)\n  initSlots(instance, children)\n\n  // stateful \u7EC4\u4EF6 \u8C03\u7528setupStatefulComponent\n  const setupResult = isStateful ? setupStatefulComponent(instance) : undefined\n  return setupResult\n}\n\nfunction setupStatefulComponent(instance) {\n  // type\u4E2D\u5C31\u662F\u7EC4\u4EF6\u7684\u53C2\u6570\n  const Component = instance.type\n  // \u4EE3\u7406\u5C5E\u6027\u8BBF\u95EE\u7F13\u5B58\n  instance.accessCache = Object.create(null)\n  // \u4EE3\u7406 \u5B9E\u9645\u4EE3\u7406\u7684\u662F {_: instance}\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers)\n\n  /**\n   * \u5904\u7406 setup\n   * 1. setup\u63A5\u6536\u7EC4\u4EF6\u4F20\u5165\u7684props\uFF0C\u548C\u6267\u884C\u4E0A\u4E0B\u6587\n   * 2. setup\u6709\u4E24\u79CD\u8FD4\u56DE\u65B9\u5F0F\uFF0C\u4E00\u79CD\u8FD4\u56DEstate\u5BF9\u8C61\uFF0C\u4E00\u79CD\u8FD4\u56DErender\u51FD\u6570\n   * 2.1 \u5982\u679C\u8FD4\u56DEstate\u5BF9\u8C61\uFF0C\u5728\u7EC4\u4EF6\u7684render\u51FD\u6570\u4E2D\uFF0Cthis\u6307\u5411 setup\u8FD4\u56DE\u7684state\u5BF9\u8C61\u88ABproxyRefs\u5904\u7406\u4E4B\u540E\u7684\u7ED3\u679C\u3002\u8FD9\u6837render\u4E2D\u5C31\u4E0D\u9700\u4F7F\u7528.value\n   * 2.2 \u5982\u679C\u8FD4\u56DE\u7684\u662Frender\u51FD\u6570\uFF0C\u5C06\u51FD\u6570\u8D4B\u503C\u7ED9\u7EC4\u4EF6\u7684render\n   * 3. \u95EE\u9898\uFF1F\uFF1Fprops\u6216\u5916\u90E8\u5F15\u8D77\u7684\u66F4\u65B0\uFF0C\u66F4\u65B0\u7684\u65F6\u5019\uFF0C\u6CA1\u6709\u66F4\u65B0setupState\uFF0C\u662F\u5426\u4F1A\u9020\u6210\u6F5C\u5728\u7684\u95EE\u9898\n   *\n   * 4. \u6267\u884C\u4E0A\u4E0B\u6587\u5305\u62EC\uFF08attrs\u3001slots\u3001emit\u3001expose\uFF09\n   * 5. \u8BBE\u7F6E\u5F53\u524D\u6FC0\u6D3B\u7684\u7EC4\u4EF6\u5B9E\u4F8B\uFF0C\u5F53\u7EC4\u4EF6\u6709setup\u5C5E\u6027\u7684\u65F6\u5019\u624D\u4F1A\u8BBE\u7F6E\u3002\u6CA1\u6709setup\u4E5F\u65E0\u9700\u8BBE\u7F6E\n   */\n  const { setup } = Component\n  if (setup) {\n    // setup\u7684\u6267\u884C\u4E0A\u4E0B\u6587 \u5982\u679C\u53C2\u6570\u8D85\u8FC71\u4E2A\u624D\u8BBE\u7F6E\n    const setupContext = (instance.setupContext =\n      setup.length > 1 ? createSetupContext(instance) : null)\n\n    // \u8BBE\u7F6E\u5F53\u524D\u6FC0\u6D3B\u7684\u7EC4\u4EF6\u5B9E\u4F8B\n    setCurrentInstance(instance)\n\n    // \u7ED9setup\u4F20\u5165props\n    const setupResult = setup(instance.props, setupContext)\n\n    // setup\u5DF2\u7ECF\u6267\u884C\u5B8C\uFF0C\u91CD\u7F6EcurrentInstance\n    unsetCurrentInstance()\n\n    // \u5904\u7406setup\u7684\u8FD4\u56DE\u503C\u662F \u5BF9\u8C61 \u6216 \u51FD\u6570 \u7684\u95EE\u9898\n    handleSetupResult(instance, setupResult)\n  } else {\n    // \u8BBE\u7F6Erender \u53CA\u5176\u4ED6\n    finishComponentSetup(instance)\n  }\n}\n\nfunction handleSetupResult(instance, setupResult) {\n  // \u51FD\u6570 \u8FD4\u56DE\u7684\u5C31\u662Frender\u51FD\u6570\n  if (isFunction(setupResult)) {\n    instance.render = setupResult\n  } else if (isObject(setupResult)) {\n    // \u5BF9\u8C61 \u8FDB\u884CproxyRefs\u5904\u7406\uFF0Crender/\u6A21\u677F\u4E2D\u65E0\u9700.value\n    instance.setupState = proxyRefs(setupResult)\n  }\n\n  // \u4F1A\u5224\u65AD\u6709\u65E0render\u7684\u60C5\u51B5\n  finishComponentSetup(instance)\n}\n\nfunction finishComponentSetup(instance) {\n  const Component = instance.type\n  // \u5904\u7406 render\n  if (!instance.render) {\n    // TODO compiler\u90E8\u5206\n\n    // \u8BBE\u7F6E\u7EC4\u4EF6\u5B9E\u4F8B\u7684render\n    instance.render = Component.render || NOOP\n  }\n\n  // \u517C\u5BB9 vue2\n  // \u5F53\u524D\u53EA\u5904\u7406\u4E86data\n  applyOptions(instance)\n}\n\n// \u521B\u5EFAsetup\u6267\u884C\u4E0A\u4E0B\u6587\nexport function createSetupContext(instance) {\n  const expose = (expose) => {\n    instance.expose = expose || {}\n  }\n  return {\n    attrs: instance.attrs,\n    slots: instance.slots,\n    emit: instance.emit,\n    expose\n  }\n}\n", "import { ShapeFlags } from '@vue/shared'\nimport { normalizeVNode, VNode } from './vnode'\n/**\n * \u5C06\u7EC4\u4EF6\u5B9E\u4F8B\u8F6C\u5316\u4E3Avnode\n * \u5C06\u7EC4\u4EF6\u5B9E\u4F8B\u7684proxy \u4F5C\u4E3A\u6267\u884C\u4E0A\u4E0B\u6587\uFF0C\u8C03\u7528\u7EC4\u4EF6\u7684render\u51FD\u6570\u3002\u8FD9\u6837\u5C31\u4FDD\u8BC1\u4E86\u5728render\u4E2D\u8BBF\u95EE\u7684this\uFF0C\u4F1A\u6307\u5411proxy\n */\nexport function renderComponentRoot(instance) {\n  const { type: Component, vnode, props, proxy, render } = instance\n  let result\n\n  const proxyToUse = proxy\n\n  // stateful \u7EC4\u4EF6\n  if (vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n    // \u4F7F\u7528proxy\u4F5C\u4E3Athis\u8C03\u7528render\uFF0C\u8FD4\u56DEvnode\uFF0C\u5E76\u5BF9vnode\u8FDB\u884C\u89C4\u8303\u5316\u3002\n    // \u8FD9\u91CC\u7684proxy\u662F {_: instance}\n    result = normalizeVNode(render!.call(proxyToUse, proxyToUse))\n  } else {\n    // \u51FD\u6570\u5F0F\u7EC4\u4EF6\n    // \u51FD\u6570\u5F0F\u7EC4\u4EF6\u6CA1\u6709render \u76F4\u63A5\u6267\u884Cvnode.type\n    const render = Component\n    // \u4F20\u5165props\n    result = normalizeVNode(render(props))\n  }\n\n  return result\n}\n\n// \u662F\u5426\u9700\u8981\u66F4\u65B0\u7EC4\u4EF6\nexport function shouldUpdateComponent(\n  prevVNode: VNode,\n  nextVNode: VNode\n): boolean {\n  const { props: prevProps, children: prevChildren } = prevVNode\n  const { props: nextProps, children: nextChildren } = nextVNode\n\n  // \u7EC4\u4EF6\u7684children\u5C31\u662Fslots\u3002\u8FD9\u90E8\u5206\u662F\u9488\u5BF9\u624B\u52A8\u6E32\u67D3\u505A\u5904\u7406\u7684\n  // next slots\u6CA1\u4F20 \u6216\u8005 \u540E\u4F20\u5165\u7684slots\u6CA1\u6709 $stable hint \u5C31\u8FDB\u884C\u66F4\u65B0\n  // $stable hint \u662F\u4E13\u95E8\u4E3A\u4E86\u6807\u8BC6 slots \u4E0D\u66F4\u65B0\u7684\n  if (prevChildren || nextChildren) {\n    if (!nextChildren || !(nextChildren as any).$stable) {\n      return true\n    }\n  }\n\n  // n1 n2 \u7684 props \u4E00\u81F4\u4E0D\u66F4\u65B0\n  if (prevProps === nextProps) {\n    return false\n  }\n  // n1 \u6CA1\u6709props\uFF0C\u5C31\u770Bn2\u6709\u6CA1\u6709props\n  if (!prevProps) {\n    return !!nextProps\n  }\n  // n1 \u6709props\uFF0Cn2\u6CA1\u6709\uFF0C\u4E00\u5B9A\u66F4\u65B0\n  if (!nextProps) {\n    return true\n  }\n\n  // full diff\n  return hasPropsChanged(prevProps, nextProps)\n}\n\n// \u5BF9\u6BD4\u4E24\u4E2A\u5BF9\u8C61\u7684\u6240\u6709\u503C\uFF0C\u5FC5\u987B\u5B8C\u5168\u76F8\u7B49\nfunction hasPropsChanged(prevProps, nextProps): boolean {\n  const nextKeys = Object.keys(nextProps)\n  const prevKeys = Object.keys(prevProps)\n\n  // \u5C5E\u6027\u4E2A\u6570\u4E0D\u540C\uFF0C\u76F4\u63A5\u8FD4\u56DEtrue\n  if (nextKeys.length !== prevKeys.length) {\n    return true\n  }\n\n  for (let i = 0; i < nextKeys.length; i++) {\n    const key = nextKeys[i]\n    if (nextProps[key] !== prevProps[key]) {\n      return true\n    }\n  }\n  return false\n}\n", "const queue = []\nlet isFlushing = false\nconst resolvedPromise = Promise.resolve()\n\n// TODO \u6267\u884C\u987A\u5E8F\u9700\u8981\u6CE8\u610F \u5B50\u7EC4\u4EF6\u548C\u7236\u7EC4\u4EF6\uFF0Cuid\u9760\u524D\u7684\u5E94\u8BE5\u5148\u6267\u884C\nexport function queueJob(job) {\n  if (!queue.length || !queue.includes(job)) {\n    queue.push(job)\n\n    queueFlush()\n  }\n}\n\nfunction queueFlush() {\n  if (!isFlushing) {\n    isFlushing = true\n    resolvedPromise.then(flushJobs)\n  }\n}\n\nfunction flushJobs() {\n  try {\n    for (let i = 0; i < queue.length; i++) {\n      const job = queue[i]\n      if (job && job.avtive !== false) {\n        job()\n      }\n    }\n  } finally {\n    queue.length = 0\n    isFlushing = false\n  }\n}\n", "import { currentInstance, LifecycleHooks, setCurrentInstance, unsetCurrentInstance } from \"./component\"\n\n/**\n * \u751F\u547D\u5468\u671F\u51FD\u6570\u5FC5\u987B\u4E0E\u7EC4\u4EF6\u7ED1\u5B9A\u5728\u4E00\u8D77\uFF0C\u6240\u4EE5\u9700\u8981\u5F53\u524D\u6B63\u6FC0\u6D3B\u7684\u7EC4\u4EF6\u5B9E\u4F8B\n * @param type \u4E8B\u4EF6\u7C7B\u578B\n * @param hook \u4F20\u5165\u7684\u5904\u7406\u51FD\u6570\n * @param target \u9ED8\u8BA4\u4E3A\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\uFF0C\u7528\u6237\u4E00\u822C\u4E0D\u4F1A\u4F20\u5165\n */\nexport function injectHook (type, hook, target = currentInstance) {\n  // \u5FC5\u987B\u6709\u7EC4\u4EF6\u5B9E\u4F8B\n  if (target) {\n    const hooks = target[type] || (target[type] = [])\n    const wrappeHook = (...args) => {\n      // \u5378\u8F7D\u5C31\u4E0D\u518D\u6267\u884C\n      if (target.isUnmounted) return\n\n      // \u5229\u7528\u95ED\u5305\u7684\u539F\u7406\uFF0C\u7F13\u5B58\u7EC4\u4EF6\u5B9E\u4F8B\uFF0C\u5E76\u4E14\u5728\u8C03\u7528\u4E4B\u540E\u6E05\u7A7A\u6389\n      setCurrentInstance(target)\n\n      // \u8C03\u7528\u4F20\u5165\u7684\u5904\u7406\u51FD\u6570\n      const res = hook(...args)\n\n      unsetCurrentInstance()\n      return res\n    }\n\n    hooks.push(wrappeHook)\n\n    return wrappeHook\n  }\n}\n\nexport const createHooks = (lifecycle) => (hook, target = currentInstance) => injectHook(lifecycle, hook, target)\n\nexport const onBeforeMount = createHooks(LifecycleHooks.BEFORE_MOUNT)\nexport const onMounted = createHooks(LifecycleHooks.MOUNTED)\nexport const onBeforeUpdate = createHooks(LifecycleHooks.BEFORE_UPDATE)\nexport const onUpdated = createHooks(LifecycleHooks.UPDATED)\nexport const onBeforeUnmount = createHooks(LifecycleHooks.BEFORE_UNMOUNT)\nexport const onUnmounted = createHooks(LifecycleHooks.UNMOUNTED)", "// keepAlive \u4F7F\u7528\u7F13\u5B58\u7684\u65B9\u5F0F\uFF0C\u5C06\u865A\u62DFdom\u548C\u771F\u5B9Edom\u8FDB\u884C\u7F13\u5B58\uFF0C\u5207\u6362\u7684\u65F6\u5019\uFF0C\u76F4\u63A5\u4ECE\u7F13\u5B58\u4E2D\u8BFB\u53D6\n\nimport { isArray, isString, ShapeFlags } from '@vue/shared'\nimport { onBeforeMount, onMounted, onUpdated } from '../apiLifecycle';\nimport { getCurrentInstance } from '../component'\nimport { isVNode } from '../vnode'\n\nexport const isKeepAlive = (vnode) => vnode.type.__isKeepAlive\n\n// KeepAlive\nconst KeepAliveImpl = {\n  __isKeepAlive: true,\n  props: {\n    // \u53EF\u4EE5\u7F13\u5B58\u7684\u7EC4\u4EF6 \u4E0D\u53EF\u4EE5\u7F13\u5B58\u7684\u7EC4\u4EF6; \u901A\u8FC7\u7EC4\u4EF6\u540D\u8BC6\u522B\uFF0C\u652F\u6301\u9017\u53F7\u5206\u9694\u7684\u5B57\u7B26\u4E32\u3001\u6570\u7EC4\u3001\u6B63\u5219\n    include: [String, RegExp, Array],\n    exclude: [String, RegExp, Array],\n    max: [String, RegExp, Array], // \u6700\u5927\u7F13\u5B58\u6570\u91CF \u4F7F\u7528LRU\u7F13\u5B58\u6DD8\u6C70\u7B97\u6CD5\n  },\n  // vnode\u7684children\u662F\u5BF9\u8C61\u7684\u65F6\u5019\uFF0C\u7EC4\u4EF6\u5C31\u4F1A\u6309\u7167slots\u6765\u5904\u7406\uFF0C\u6240\u4EE5\u8FD9\u91CC\u7684 slots \u662Fchildren\u3002\n  setup(props, { slots }) {\n    const instance = getCurrentInstance()\n\n    // \u901A\u8FC7ctx\u5728\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A\u6DFB\u52A0\u64CD\u4F5C\u65B9\u6CD5\uFF0C\u4F9B\u8FD9\u91CC\u4F7F\u7528\u3002\u5E76\u6DFB\u52A0\u62E6\u622A\u65B9\u6CD5\uFF0C\u5728subTree\u5728\u6302\u8F7D\u548C\u5378\u8F7D\u7684\u65F6\u5019\u8FDB\u884C\u62E6\u622A\u3002\n    const shareContext = instance.ctx\n\n    const cache = new Map() // \u7F13\u5B58\u7EC4\u4EF6\u5BB9\u5668\n    const keys = new Set() // key \u5BB9\u5668\n    let current = null // \u8BB0\u5F55\u5F53\u524Dvnode\n\n    const {\n      renderer: {\n        p: patch,\n        m: move,\n        um: _unmount,\n        o: { createElement }\n      }\n    } = shareContext\n    // \u521B\u5EFA\u7F13\u5B58dom\u7684\u5BB9\u5668\n    const storageContainer = createElement('div')\n\n    /**\n     * keepAlive\u5C31\u662F\u9760\u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5\n     * \u5728\u7EC4\u4EF6\u5378\u8F7D unmount\u65F6\u8FDB\u884C\u62E6\u622A\uFF0C\u4F7F\u7528deactivate\uFF0C\u7F13\u5B58dom\u5143\u7D20\n     * \u5728\u7EC4\u4EF6\u518D\u6B21 \u6302\u8F7D\u7684\u65F6\u5019\uFF0C\u4F7F\u7528activate\uFF0C\u4ECE\u7F13\u5B58\u4E2D\u53D6\u51FA\uFF0C\u6302\u8F7D\u7EC4\u4EF6\n     */\n    shareContext.activate = (vnode, container, anchor, optimized) => {\n      const instance = vnode.component\n      move(vnode, container, anchor)\n      // \u4EE5\u9632\u5C5E\u6027\u53D1\u751F\u53D8\u5316\uFF0C\u8D70patch\n      patch(\n        instance.vnode, // \u4E4B\u524D\u7F13\u5B58\u7684vnode\n        vnode, // \u5F53\u524D\u7684vnode\n        container,\n        anchor,\n        instance, // parentComponent\n        optimized\n      )\n    }\n    shareContext.deactivate = (vnode) => {\n      // \u79FB\u5230\u7F13\u5B58\u4E2D\n      move(vnode, storageContainer)\n    }\n\n    // \u5378\u8F7D\n    function unmount(vnode) {\n      // \u6539\u53D8\u72B6\u6001\n      resetShapeFlag(vnode)\n      // \u4E0B\u8F7D\n      _unmount(vnode, instance, true)\n    }\n    // \u5220\u9664key\u5BF9\u5E94\u7684\u7F13\u5B58\n    function pruneCacheEntry(key) {\n      const cached = cache.get(key)\n      if (!current || cached.type !== current.type) { // \u4E0D\u662F\u5F53\u524D\n        unmount(cached)\n      } else if (current) { // \u521A\u597D\u662F\u5F53\u524D\uFF0C\u4E0D\u80FD\u5378\u8F7D\uFF0C\u53EA\u80FD\u6539\u53D8\u72B6\u6001\n        resetShapeFlag(cached)\n      }\n\n      // \u5220\u9664\u6389\u7F13\u5B58\n      keys.delete(key)\n      cache.delete(key)\n    }\n\n    // \u7F13\u5B58key\n    let pendingCacheKey = null\n    // \u7F13\u5B58subTree\n    const cacheSubtree = () => {\n      if (pendingCacheKey != null) {\n        // mount\u4E4B\u540E\uFF0C\u7F13\u5B58\u7EC4\u4EF6\u7684subTree\n        cache.set(pendingCacheKey, instance.subTree)\n      }\n    }\n\n    // \u7EC4\u4EF6\u6302\u8F7D\u6216\u8005\u66F4\u65B0\u4E4B\u540E\uFF0C\u7F13\u5B58subTree\n    // \u66F4\u65B0\u7684\u65F6\u5019\u4E5F\u9700\u8981\u3002\u4E4B\u524D\u7684\u7EC4\u4EF6\u548C\u66F4\u65B0\u540E\u7684\u7EC4\u4EF6\uFF0C\u90FD\u8981\u7F13\u5B58\n    onMounted(cacheSubtree)\n    onUpdated(cacheSubtree)\n    // \u5220\u9664\u6389\u6240\u6709\u7F13\u5B58\u5FAA\u73AF\u64CD\u4F5C\uFF0C\u5E76\u4E14\u5224\u65AD\u662F\u5426\u662F\u5F53\u524D\u5B9E\u4F8B\n    onBeforeMount(() => {\n      cache.forEach(cached => {\n        const { subTree } = instance\n        const vnode = subTree.vnode\n        if (cached.type === vnode.type) { // \u662F\u5F53\u524D\uFF0C\u4E0D\u80FD\u5378\u8F7D\uFF0C\u6539\u53D8\u72B6\u6001\n          resetShapeFlag(cached)\n          return\n        }\n        unmount(cached)\n      })\n    })\n\n    // \u8FD9\u5C31\u662FkeepAlive\u7684render\n    // \u8FD9\u91CC\u7684\u66F4\u65B0\u8D70\u7684keepalive\u81EA\u8EAB\u7EC4\u4EF6\u66F4\u65B0\n    return () => {\n      pendingCacheKey = null\n      // \u9ED8\u8BA4\u4F1A\u53BBdefault\u4E2D\u53BB\u83B7\u53D6\uFF0C\u83B7\u53D6\u5230\u7684\u662F\u4E00\u4E2A\u6570\u7EC4\uFF0C\u800C\u4E14\u6570\u7EC4\u4E2D\u53EA\u80FD\u6709\u4E00\u4E2A\u5143\u7D20\n      const children = slots.default()\n      const vnode = children[0]\n\n      // \u53EA\u6709\u5E26\u72B6\u6001\u7684\u7EC4\u4EF6\uFF08stateful\uFF09\u624D\u4F1A\u88AB\u7F13\u5B58\uFF0C\u5176\u4ED6\u60C5\u51B5\u76F4\u63A5\u8FD4\u56DE\n      if (!isVNode(vnode) || !(vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT)) {\n        current = null\n        return vnode\n      }\n\n      // \u7EC4\u4EF6\n      const comp = vnode.type\n      const name = comp.name\n      console.log(\"\uD83D\uDE80 ~ file: KeepAlive.ts ~ line 129 ~ return ~ name\", name)\n\n      const { include, exclude, max } = props\n\n      // \u4E0D\u5728include \u6216\u5728exclude\u4E2D\uFF0C\u4E0D\u7F13\u5B58\n      if (\n        include && (!name || !matches(include, name)) ||\n        exclude && name && matches(exclude, name)\n      ) {\n        current = vnode\n        return vnode\n      }\n\n      // \u952E\n      const key = vnode.key == null ? comp : vnode.key\n      const cacheVNode = cache.get(key)\n\n      // \u62FF\u5230key\n      pendingCacheKey = key\n\n      // \u4E8C\u6B21\u8FDB\u5165\u8D70\u7F13\u5B58\n      if (cacheVNode) {\n        // \u590D\u7528 el \u548C\u7EC4\u4EF6\u5B9E\u4F8B\n        vnode.el = cacheVNode.el\n        vnode.component = cacheVNode.component\n        // \u6807\u8BB0\u4E3A\u5DF2\u7F13\u5B58\u7684KeepAlive\u6FC0\u6D3B\u6001\n        vnode.shapeFlag |= ShapeFlags.COMPONENT_KEPT_ALIVE\n\n        // \u4FDD\u6301\u5728\u6700\u65B0\u7684\u4F4D\u7F6E\uFF0C\u907F\u514D\u8D85\u8FC7\u9650\u5236\u4E4B\u540E\u5148\u5220\u6389\n        keys.delete(key)\n        keys.add(key)\n      } else {\n        // \u9996\u6B21\u8FDB\u5165\n        keys.add(key)\n        // \u8D85\u8FC7\u6700\u5927\u9650\u5236\n        if (max && keys.size > max) {\n          // \u5220\u6389\u6700\u4E45\u4E0D\u7528\u7684key LRU\n          pruneCacheEntry(keys.values().next().value)\n        }\n        // \u8FD9\u65F6\u5019\u8FD8\u6CA1\u6709\u865A\u62DF\u8282\u70B9\uFF0C\u865A\u62DF\u8282\u70B9\u8981\u5728\u7EC4\u4EF6mount\u4E4B\u540E\u624D\u6709\n      }\n\n      // \u6807\u8BB0\u4E3A\u662FkeepAlive\u7EC4\u4EF6\uFF0C\u5378\u8F7D\u65F6\u4E0D\u8D70unmount\u903B\u8F91\uFF0C\u800C\u662F\u88AB\u7F13\u5B58\n      vnode.shapeFlag |= ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE\n\n      current = vnode\n      // \u8FD4\u56DEvnode\n      return vnode\n    }\n  }\n}\n\nexport const KeepAlive = KeepAliveImpl as any as {\n  __isKeepAlive: true\n}\n\n// \u5339\u914Dname\nfunction matches(pattern, name) {\n  if (isArray(pattern)) { // \u6570\u7EC4\n    return pattern.some(p => matches(p, name))\n  } else if (isString(pattern)) { // \u5B57\u7B26\u4E32\n    return pattern.split(',').includes(name)\n  } else if (pattern.test) { // \u6B63\u5219\n    return pattern.test(name)\n  }\n}\n\n// \u53BB\u6389\u4E0EkeepAlive\u76F8\u5173\u7684\u6807\u8BC6\nfunction resetShapeFlag(vnode) {\n  let shapeFlag = vnode.shapeFlag\n  if (shapeFlag & ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE) {\n    shapeFlag -= ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE\n  } else if (shapeFlag & ShapeFlags.COMPONENT_KEPT_ALIVE) {\n    shapeFlag -= ShapeFlags.COMPONENT_KEPT_ALIVE\n  }\n  vnode.shapeFlag = shapeFlag\n}\n", "import { isFunction, isObject } from \"@vue/shared\"\nimport { createVNode } from \"./vnode\"\n\nexport function createAppContext() {\n  return {\n    app: null,\n    mixins: [],\n    components: {},\n    directives: {}\n  }\n}\n\nexport function createAppAPI(render) {\n  return function createApp(rootComponent, rootProps = null) {\n    // \u7EC4\u4EF6\u4E0D\u662F\u51FD\u6570\n    if (!isFunction(rootComponent)) {\n      rootComponent = {...rootComponent}\n    }\n\n    // \u53EA\u80FD\u662F\u5BF9\u8C61 \u6216\u8005 null\n    if (rootProps != null && !isObject(rootProps)) {\n      rootProps = null\n    }\n\n    // \u4E0A\u4E0B\u6587\n    const context = createAppContext()\n    // \u5DF2\u5B89\u88C5\u7684\u63D2\u4EF6\n    const installedPliguns = new Set()\n\n    let isMounted = false\n\n    const app = (context.app = {\n      _component: rootComponent, // \u6839\u7EC4\u4EF6\n      _container: null, // \u5BB9\u5668\n\n      use(plugin, ...options) {\n        if (installedPliguns.has(plugin)) {\n          console.warn('plugin has')\n        } else if (plugin && isFunction(plugin.install)) {\n          // \u51FD\u6570 plugin.install\n          installedPliguns.add(plugin)\n          plugin.install(app, ...options)\n        } else if (isFunction(plugin)) {\n          // \u51FD\u6570 plugin\n          installedPliguns.add(plugin)\n          plugin(app, ...options)\n        }\n\n        // \u6240\u6709\u65B9\u6CD5\u90FD\u8FD4\u56DEapp \u94FE\u5F0F\u8C03\u7528\u7684\u5173\u952E\n        return app\n      },\n\n      mixin(mixin) {\n        if (!context.mixins.includes(mixin)) {\n          context.mixins.push(mixin)\n        }\n\n        return app\n      },\n\n      component(name, component?) {\n        // \u83B7\u53D6\u7EC4\u4EF6\n        if (!component) {\n          return context.components[name]\n        }\n        // \u8BBE\u7F6E\u7EC4\u4EF6\n        context.components[name] = component\n\n        return app\n      },\n\n      directive(name, directive) {\n        if (!directive) {\n          return context.directives[name]\n        }\n\n        context.directives[name] = directive\n\n        return app\n      },\n\n      // \u6302\u8F7D\n      mount(rootContainer) {\n        // \u672A\u6302\u8F7D\n        if (!isMounted) {\n          const vnode = createVNode(rootComponent, rootProps)\n\n          // \u6839vnode\u7ED1\u5B9Aapp\u5B9E\u4F8B\n          vnode.appContext = context\n\n          // \u6302\u8F7D\n          render(vnode, rootContainer)\n          app._container = rootContainer\n\n          isMounted = true\n        }\n      },\n\n      unmount() {\n        // \u5378\u8F7D\n        if (isMounted) {\n          render(null, app._container)\n        }\n      }\n    })\n\n    return app\n  }\n}\n", "import { ReactiveEffect } from '@vue/reactivity'\nimport { invokeArrayFns, isString, PatchFlags, ShapeFlags } from '@vue/shared'\nimport { createComponentInstance, setupComponent } from './component'\nimport {\n  renderComponentRoot,\n  shouldUpdateComponent\n} from './componentRenderUtils'\nimport { Fragment, Comment, isSameVNodeType, normalizeVNode, Text, VNode } from './vnode'\nimport { queueJob } from './scheduler'\nimport { updateProps } from './componentProps'\nimport { updateSlots } from './componentSlots'\nimport { isKeepAlive } from './components/KeepAlive'\nimport { createAppAPI } from './apiCreateApp'\n\n// \u53C2\u6570 RendererOptions<HostNode, HostElement>\nexport const createRenderer = (options) => {\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling,\n    createComment: hostCreateComment\n  } = options\n\n  /**\n   * diff\u7B97\u6CD5\u7684\u6838\u5FC3(\u521B\u5EFA\u9700\u8981\u65B0\u589E\u7684\u8282\u70B9\u3001\u79FB\u9664\u5DF2\u7ECF\u5E9F\u5F03\u7684\u8282\u70B9\u3001\u79FB\u52A8\u6216\u8005\u4FEE\u6539\u9700\u8981\u66F4\u65B0\u7684\u8282\u70B9)\n   */\n  const patch = (\n    n1,\n    n2,\n    container,\n    anchor = null,\n    parentComponent = null,\n    optimized = !!n2.dynamicChildren\n  ) => {\n    // \u6CA1\u6709\u53D8\u5316\n    if (n1 === n2) {\n      return\n    }\n\n    // type\u548Ckey \u4E0D\u4E00\u81F4\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      // \u8BB0\u5F55\u5378\u8F7D\u5143\u7D20\u7684\u4F4D\u7F6E\uFF0C\u540E\u9762\u7684\u5C31\u4ECE\u8FD9\u4E2A\u4F4D\u7F6E\u63D2\u5165\n      anchor = getNextHostNode(n1)\n      // remove\u6389\n      unmount(n1, parentComponent, true)\n      n1 = null\n    }\n\n    // BAIL \u4E0D\u4F7F\u7528\u4F18\u5316\n    if (n2.patchFlag === PatchFlags.BAIL) {\n      optimized = false\n      n2.dynamicChildren = null\n    }\n\n    const { type, shapeFlag } = n2\n    switch (type) {\n      case Text:\n        processText(n1, n2, container, anchor)\n        break\n      case Comment:\n        processCommentNode(n1, n2, container, anchor)\n        break\n      case Fragment:\n        processFragment(n1, n2, container, anchor, parentComponent, optimized)\n        break\n      default:\n        // \u5143\u7D20\u7C7B\u578B\n        if (shapeFlag & ShapeFlags.ELEMENT) {\n          processElement(n1, n2, container, anchor, parentComponent, optimized)\n        } else if (shapeFlag & ShapeFlags.COMPONENT) {\n          // \u7EC4\u4EF6\u7C7B\u578B\n          processComponent(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            optimized\n          )\n        } else if (shapeFlag & ShapeFlags.TELEPORT) {\n          // \u4F20\u9001\u95E8\n          type.process(\n            n1, n2, container, anchor, parentComponent, optimized, internals\n          )\n        }\n    }\n  }\n\n  // \u6CE8\u91CA\u6D41\u7A0B\n  const processCommentNode = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(\n        (n2.el = hostCreateComment(n2.children || '')),\n        container,\n        anchor\n      )\n    } else {\n      // \u65E0\u9700\u8FC7\u591A\u64CD\u4F5C\n      n2.el = n1.el\n    }\n  }\n\n  /**\n   * \u7EC4\u4EF6\u6D41\u7A0B\n   * vue3 \u4E0D\u5EFA\u8BAE\u4F7F\u7528\u51FD\u6570\u5F0F\u7EC4\u4EF6\n   */\n  const processComponent = (\n    n1: VNode | null,\n    n2: VNode,\n    container,\n    anchor,\n    parentComponent,\n    optimized\n  ) => {\n    if (n1 == null) {\n      // \u5982\u679C\u662F keepAlive\u6FC0\u6D3B\u6001 \u4E0D\u76F4\u63A5\u8D70\u6302\u8F7D\uFF0C\u4F7F\u7528keepalive\u7684activate\uFF0C\u8D70\u7F13\u5B58\n      if (n2.shapeFlag & ShapeFlags.COMPONENT_KEPT_ALIVE) {\n        parentComponent.ctx.activate(n2, container, anchor, optimized)\n      } else {\n        // \u6302\u8F7D\u7EC4\u4EF6\n        mountComponent(n2, container, anchor, parentComponent, optimized)\n      }\n    } else {\n      // \u5F53\u7236\u7EC4\u4EF6\u91CD\u65B0\u6E32\u67D3\u65F6\uFF0C\u4F1A\u89E6\u53D1\u5B50\u7EC4\u4EF6\u7684patch\n      // \u5F53\u5B50\u7EC4\u4EF6\u4F9D\u8D56\u7684props\u88AB\u7236\u7EC4\u4EF6\u6539\u53D8\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u89E6\u53D1\u7EC4\u4EF6\u91CD\u65B0\u6E32\u67D3\n      updateComponent(n1, n2, optimized)\n    }\n  }\n\n  /**\n   * \u6302\u8F7D\u7EC4\u4EF6\n   * 1. \u521B\u5EFA\u7EC4\u4EF6\u5B9E\u4F8B\n   * 2. \u5BF9\u7EC4\u4EF6\u5B9E\u4F8B\u8D4B\u503C  \u5305\u62EC \u5BF9\u6570\u636E\u8FDB\u884C\u54CD\u5E94\u5F0F\u5904\u7406\uFF0C\u5904\u7406 setup\n   * 3. \u4E3A\u7EC4\u4EF6\u8BBE\u7F6E effect\uFF0Ceffect\u4E3A\u6E32\u67D3\u51FD\u6570\u3002 \u5206\u4E3A\u9996\u6B21\u6E32\u67D3\u548C\u4E8C\u6B21\u66F4\u65B0\uFF0C\u4E8C\u6B21\u66F4\u65B0\u4F9D\u8D56props\u7684\u53D8\u5316\u3002\n   * 4. initialVNode \u662F \u7EC4\u4EF6vnode\uFF1B\u800C subTree \u662F \u7EC4\u4EF6render\u6E32\u67D3\u8FD4\u56DE\u7684 \u5B50\u6811vnode\n   */\n  const mountComponent = (initialVNode, container, anchor, parentComponent, optimized) => {\n    // \u521B\u5EFA\u7EC4\u4EF6\u5B9E\u4F8B\n    const instance = (initialVNode.component =\n      createComponentInstance(initialVNode, parentComponent))\n\n    // \u5982\u679C\u662F KeepAlive \u7ED9instance.ctx\u52A0\u5165\u64CD\u4F5C\u80FD\u529B\n    if (isKeepAlive(initialVNode)) {\n      (instance.ctx as any).renderer = internals\n    }\n\n    // \u7ED9instance\u8D4B\u503C proxy\u3001render\u3001props\u3001attrs....\n    // proxy \u53CA setup\n    setupComponent(instance)\n\n    // \u7EC4\u4EF6effect\u5904\u7406\n    setupRenderEffect(instance, initialVNode, container, anchor, optimized)\n  }\n\n  /**\n   * effect\n   * 1. \u521B\u5EFAeffect \u4F20\u5165 fn \u548C \u8C03\u5EA6\u5668\n   * 1.1. fn \u5206\u4E3A\u9996\u6B21\u6E32\u67D3\u548C\u4E8C\u6B21\u66F4\u65B0\uFF0C\u90FD\u662F\u8D70\u7684patch\u903B\u8F91\uFF0C\u4E8C\u6B21\u66F4\u65B0\u65F6n1\u4F7F\u7528\u5B9E\u4F8B\u4E4B\u524D\u5B58\u50A8\u7684subTree\n   * 1.1.1. subTree \u662F\u7EC4\u4EF6\u8F6C\u5316\u7684vnode\uFF0C\u901A\u8FC7\u8C03\u7528\u7EC4\u4EF6\u5B9E\u4F8B\u7684render\u65B9\u6CD5\u83B7\u5F97\uFF08render\u65B9\u6CD5\u4F7F\u7528\u7EC4\u4EF6\u5B9E\u4F8B\u7684proxy\u4F5C\u4E3A\u6267\u884C\u4E0A\u4E0B\u6587\uFF09\n   * 1.2. \u4E3A\u4E86\u4FDD\u8BC1\u591A\u6B21\u4FEE\u6539\u53EA\u6267\u884C\u4E00\u6B21\uFF0C\u4F20\u5165\u8C03\u5EA6\u5668\n   * 1.2.1. \u8C03\u5EA6\u5668\u6536\u96C6\u6240\u6709\u7684\u8981\u6267\u884C\u7684\u4EFB\u52A1\uFF0C\u901A\u8FC7\u5FAE\u4EFB\u52A1\u5F02\u6B65\u66F4\u65B0\n   * 2. effect \u8D4B\u503C\u7ED9 instance.update\uFF0C\u65B9\u4FBF\u540E\u7EED\u66F4\u65B0\u4F7F\u7528\n   */\n  const setupRenderEffect = (\n    instance,\n    initialVNode,\n    container,\n    anchor,\n    optimized\n  ) => {\n    // \u9996\u6B21\u6E32\u67D3\u548C\u66F4\u65B0\u90FD\u8981\u8D70\u8FD9\u4E2A\u51FD\u6570\uFF0C\u901A\u8FC7isMounted\u5224\u65AD\n    const componentUpdateFn = () => {\n      // \u9996\u6B21\u6E32\u67D3\n      if (!instance.isMounted) {\n        const { bm, m } = instance\n\n        // \u6267\u884CbeforeMount\n        if (bm) {\n          invokeArrayFns(bm)\n        }\n        // \u7EC4\u4EF6\u7684vnode \u5C06\u7EC4\u4EF6\u5B9E\u4F8B\u8F6C\u5316\u4E3Avnode\n        const subTree = (instance.subTree = renderComponentRoot(instance))\n        // \u5C06subTree\u6E32\u67D3\u4E3A\u771F\u662F\u8282\u70B9\uFF1Binstance\u662FsubTree\u7684 parent\n        patch(null, subTree, container, anchor, instance)\n\n        // \u5C06subTree\u7684el \u8D4B\u503C\u7ED9\u7EC4\u4EF6\uFF0C\u5426\u5219\u7EC4\u4EF6\u6CA1\u6709el\uFF0C\u5728patch\u7684\u65F6\u5019\u4F1A\u51FA\u95EE\u9898\n        initialVNode.el = subTree.el\n        // \u6267\u884Cmounted\n        if (m) {\n          invokeArrayFns(m)\n        }\n        instance.isMounted = true\n      } else {\n        // \u66F4\u65B0\u64CD\u4F5C\n        let { next, props, vnode, bu, u } = instance\n\n        // \u901A\u8FC7next\u5728\u8FD9\u91CC\u66F4\u6539props\uFF0C\u7531\u4E8E\u5728\u540C\u4E00\u4E2Aeffect\u5185\u90E8\uFF0C\u4E0D\u4F1A\u89E6\u53D1\u4E8C\u6B21\u66F4\u65B0\n        if (next) {\n          next.el = vnode.el\n\n          // \u66F4\u65B0\u7EC4\u4EF6\u5B9E\u4F8B\n          updateComponentPreRender(instance, next, optimized)\n        } else {\n          next = vnode\n        }\n\n        // \u6267\u884CbeforeUpdate\n        if (bu) {\n          invokeArrayFns(bu)\n        }\n\n        const nextTree = renderComponentRoot(instance)\n        const prevTree = instance.subTree\n        instance.subTree = nextTree\n        // \u524D\u540Evnode\u8FDB\u884Cpatch\u6BD4\u8F83\n        patch(prevTree, nextTree, container, anchor, instance)\n        next.el = nextTree.el\n\n        // \u6267\u884CUpdated\n        if (u) {\n          invokeArrayFns(u)\n        }\n      }\n    }\n\n    // \u8FD9\u91CC\u6CA1\u6709\u4F7F\u7528effect\u662F\u56E0\u4E3A\uFF0C\u6E90\u7801\u4E2D\u4F7F\u7528scope\u53C2\u6570\uFF0C\u6765\u6536\u96C6\u6240\u6709\u7684effect\u3002\u4F46\u76EE\u524D\u6CA1\u6709\u7528\u5230\n    // \u9700\u8981\u4F7F\u7528\u8C03\u5EA6\u5668\uFF0C\u63A7\u5236\u7EC4\u4EF6\u5237\u65B0\u7684\u9891\u7387\n    const effect = (instance.effect = new ReactiveEffect(\n      componentUpdateFn,\n      () => queueJob(update)\n    ))\n\n    const update = (instance.update = effect.run.bind(effect))\n\n    update()\n  }\n\n  const updateComponentPreRender = (instance, nextVnode, optimized) => {\n    const prevProps = instance.vnode.props\n    // \u66F4\u6362\u65B0\u7684vnode\n    instance.vnode = nextVnode\n    // next\u7F6E\u4E3A\u7A7A\n    instance.next = null\n    // \u66F4\u65B0props\n    updateProps(instance, nextVnode.props, prevProps, optimized)\n    // \u66F4\u65B0slots\n    updateSlots(instance, nextVnode.children, optimized)\n  }\n\n  // \u7EC4\u4EF6\u5916\u90E8\u53D8\u5316\u5F15\u8D77\u7684\u66F4\u65B0\n  const updateComponent = (n1, n2, optimized) => {\n    const instance = (n2.component = n1.component)\n    // \u5224\u65AD\u7EC4\u4EF6\u662F\u5426\u66F4\u65B0\n    if (shouldUpdateComponent(n1, n2)) {\n      // \u8FD9\u91CC\u9700\u8981\u66F4\u6539\u7EC4\u4EF6\u5B9E\u4F8B\u7684vnode\u548Cprops\uFF0C\u4F46\u662F\u66F4\u6539props\u65F6\uFF0C\u53C8\u4F1A\u89E6\u53D1\u7EC4\u4EF6\u7684\u66F4\u65B0\n      // \u628An2\u5B58\u50A8\u5728\u7EC4\u4EF6\u5B9E\u4F8B\u7684next\u4E0A\uFF0C\u5728\u7EC4\u4EF6\u66F4\u65B0\u51FD\u6570\u4E2D\u4FEE\u6539props\u7684\u503C\uFF0C\u8FD9\u6837\u5C31\u4E0D\u4F1A\u9020\u6210\u4E8C\u6B21\u66F4\u65B0\n      instance.next = n2\n      instance.update()\n    } else {\n      // \u65E0\u9700\u66F4\u65B0\n      n2.el = n1.el\n      instance.vnode = n2\n    }\n  }\n\n  /**\n   * \u5378\u8F7D\u7EC4\u4EF6\n   * 1. \u89E6\u53D1unmounted\u7684\u751F\u547D\u5468\u671F\u51FD\u6570\n   * 2. \u5173\u95EDeffect\uFF0C\u6E32\u67D3\u66F4\u65B0\u4E0D\u5728\u751F\u6548\n   * 3. \u5378\u8F7D\u5B50\u6811\n   */\n  const unmountComponent = (instance, doRemove?) => {\n    const { bum, um, update, subTree } = instance\n\n    // \u6267\u884C beforeUnmount\n    if (bum) {\n      invokeArrayFns(bum)\n    }\n\n    if (update) {\n      // \u5173\u95EDeffect\n      update.active = false\n\n      // \u5378\u8F7D \u5B50\u6811\n      unmount(subTree, instance, doRemove)\n    }\n\n    // \u6267\u884C unmounted\n    if (um) {\n      invokeArrayFns(um)\n    }\n\n    instance.isUnmounted = true\n  }\n\n  /**\n   * Fragment \u6D41\u7A0B\n   * \u788E\u7247\u5316\u8282\u70B9\u4E2D\u53EA\u6709children\uFF1B\u6240\u4EE5\u53EA\u5B58\u5728\u65B0\u589E\u548C\u5BF9\u6BD4children\u7684\u4E24\u4E2A\u8FC7\u7A0B\n   * \u8981\u6807\u8BB0 Fragment \u7684\u8D77\u6B62\u4F4D\u7F6E\uFF0C\u65B9\u4FBF\u540E\u7EED\u5220\u9664 (removeFragment)\n   */\n  const processFragment = (\n    n1: VNode | null,\n    n2: VNode,\n    container,\n    anchor,\n    parentComponent,\n    optimized\n  ) => {\n    // \u8D77\u6B62\u4F4D\u7F6E\u5C31\u662F\u4ECE n1 \u5230 n1\u7684\u4E0B\u4E00\u4E2A\n    // Fragment\u5F00\u59CB\u4F4D\u7F6E\n    const fragmentStartAnchor = (n2.el = n1 ? n1.el : hostCreateText(''))\n    // Fragment\u7ED3\u675F\u4F4D\u7F6E\n    const fragmentEndAnchor = (n2.anchor = n1 ? n1.anchor : hostCreateText(''))\n\n    let { patchFlag, dynamicChildren } = n2\n\n    if (n1 == null) {\n      // n1 \u6CA1\u6709\uFF0C\u9700\u8981\u63D2\u5165Fragment\u7684\u8D77\u6B62\u4F4D\u7F6E\n      hostInsert(fragmentStartAnchor, container, anchor)\n      hostInsert(fragmentEndAnchor, container, anchor)\n\n      mountChildren(\n        n2.children,\n        container,\n        fragmentEndAnchor,\n        parentComponent,\n        optimized\n      )\n    } else {\n      // \u5B50\u5143\u7D20\u987A\u5E8F\u4E0D\u53D8\u7684Fragment\n      // v-for=\"i in 10\" \u5E38\u6570\u6570\u7EC4\uFF1B\u6216\u8005\u666E\u901Afragment\n      if (\n        patchFlag > 0 &&\n        patchFlag & PatchFlags.STABLE_FRAGMENT &&\n        dynamicChildren &&\n        n1.dynamicChildren\n      ) {\n        patchBlockChildren(\n          n1.dynamicChildren,\n          dynamicChildren,\n          container,\n          parentComponent\n        )\n      } else {\n        // \u4E0D\u80FD\u4F7F\u7528\u4F18\u5316\u65B9\u5F0F\n        patchChildren(\n          n1,\n          n2,\n          container,\n          fragmentEndAnchor,\n          parentComponent,\n          optimized\n        )\n      }\n    }\n  }\n\n  /**\n   * \u6587\u672C\u6D41\u7A0B\n   */\n  const processText = (n1: VNode | null, n2: VNode, container, anchor) => {\n    // \u521D\u59CB\u5316\u8FC7\u7A0B\n    if (n1 === null) {\n      hostInsert((n2.el = hostCreateText(n2.children)), container, anchor)\n    } else {\n      // \u66F4\u65B0\u8FC7\u7A0B \u76F4\u63A5\u66FF\u6362\u6587\u672C\n      const el = (n2.el = n1.el)\n      if (n2.children !== n1.children) {\n        hostSetText(el, n2.children)\n      }\n    }\n  }\n\n  /**\n   * \u5143\u7D20\u6D41\u7A0B\n   */\n  const processElement = (\n    n1: VNode | null,\n    n2: VNode,\n    container,\n    anchor,\n    parentComponent,\n    optimized\n  ) => {\n    // \u521D\u59CB\u5316\u8FC7\u7A0B\n    if (n1 === null) {\n      mountElement(n2, container, anchor, parentComponent, optimized)\n    } else {\n      // \u4FEE\u6539\u7684\u8FC7\u7A0B\n      patchElement(n1, n2, parentComponent, optimized)\n    }\n  }\n\n  /**\n   * \u5143\u7D20\u7684patch\u8FC7\u7A0B\n   * 1. patch children\n   * 2. patch props\n   */\n  const patchElement = (n1, n2, parentComponent, optimized) => {\n    const el = (n2.el = n1.el)\n    let { patchFlag, dynamicChildren } = n2\n\n    const oldProps = n1.props || {}\n    const newProps = n2.props || {}\n\n    // \u6709\u52A8\u6001\u8282\u70B9\n    if (dynamicChildren) {\n      // block\u7684\u52A8\u6001\u8282\u70B9patch\n      patchBlockChildren(n1.dynamicChildren, dynamicChildren, el, parentComponent)\n    } else if (!optimized) {\n      // \u4E0D\u4F7F\u7528\u4F18\u5316\n\n      // patch children \u8FD9\u91CC\u7684\u5BB9\u5668\u8981\u4F20\u5165el\n      patchChildren(n1, n2, el, null, parentComponent, optimized)\n    }\n\n    // \u6709\u52A8\u6001\u5185\u5BB9\n    if (patchFlag > 0) {\n      // \u52A8\u6001\u5C5E\u6027\n      // \u52A8\u6001\u5C5E\u6027\u540D (:[key]=\"xxx\") \u5168\u91CF\u5BF9\u6BD4\n      if (patchFlag & PatchFlags.FULL_PROPS) {\n        patchProps(el, n2, oldProps, newProps)\n      } else {\n        // class \u662F\u52A8\u6001\u7684\n        if (patchFlag & PatchFlags.CLASS) {\n          if (oldProps.class !== newProps.class) {\n            hostPatchProp(el, 'class', null, newProps.class)\n          }\n        }\n\n        // style \u662F\u52A8\u6001\u7684\n        if (patchFlag & PatchFlags.STYLE) {\n          hostPatchProp(el, 'style', oldProps.style, newProps.style)\n        }\n\n        // \u9664class \u548C style \u4E4B\u5916\u7684\u52A8\u6001\u5C5E\u6027props\n        if (patchFlag & PatchFlags.PROPS) {\n          // dynamicProps \u8BB0\u5F55\u4E86\u9700\u8981\u6620\u5C04\u7684\u539F\u59CBkey  [key, key...]\n          const propsToUpdate = n2.dynamicProps!\n\n          // \u4E24\u8005\u5982\u679C\u4E0D\u540C\u5C31\u66FF\u6362\n          for (let i = 0; i < propsToUpdate.length; i++) {\n            const key = propsToUpdate[i]\n            const prev = oldProps[key]\n            const next = newProps[key]\n\n            if (prev !== next) {\n              hostPatchProp(el, key, prev, next)\n            }\n          }\n        }\n      }\n\n      // \u52A8\u6001\u6587\u672C\u8282\u70B9\uFF0C\u76F4\u63A5\u66FF\u6362\n      if (patchFlag & PatchFlags.TEXT) {\n        if (n1.children !== n2.children) {\n          hostSetElementText(el, n2.children as string)\n        }\n      }\n    } else if (!optimized && dynamicChildren === null) {\n      // \u4E0D\u4F7F\u7528\u4F18\u5316\n\n      // patch props\n      patchProps(el, n2, oldProps, newProps)\n    }\n  }\n\n  /**\n   * block\u7684\u52A8\u6001\u8282\u70B9patch\n   * \u52A8\u6001\u8282\u70B9\uFF0ColdVNode\u548CnewVNode \u4F4D\u7F6E\u662F\u4E00\u6837\u7684\u3002\u6240\u4EE5\u53EF\u4EE5\u7528\u4E0B\u9762\u7684\u65B9\u5F0F\u6BD4\u8F83\u3002\n   * \u9664\u4E86\u4E00\u4E9B v-if \u548C v-for\u7B49\u7279\u6B8A\u60C5\u51B5\n   */\n  const patchBlockChildren = (\n    oldChildren,\n    newChildren,\n    el,\n    parentComponent\n  ) => {\n    for (let i = 0; i < newChildren.length; i++) {\n      const oldVNode = oldChildren[i]\n      const newVNode = newChildren[i]\n\n      const container =\n        oldVNode.el &&\n        // \u7C7B\u578B\u662FFragment\u7684\u65F6\u5019\uFF0C\u5BB9\u5668\u5E94\u8BE5\u4E3A\u7236\u5143\u7D20\n        (oldVNode.type === Fragment ||\n          // \u7C7B\u578B\u4E0D\u540C\u9700\u8981\u5378\u8F7D\uFF0C\u4E5F\u9700\u8981\u7236\u5143\u7D20\n          !isSameVNodeType(oldVNode, newVNode) ||\n          // \u7EC4\u4EF6\u9700\u8981\u7236\u5143\u7D20\n          oldVNode.shapeFlag & ShapeFlags.COMPONENT)\n          ? hostParentNode(oldVNode.el)\n          : el\n\n      patch(oldVNode, newVNode, container, null, parentComponent, true)\n    }\n  }\n\n  /**\n   * \u5C5E\u6027patch\n   */\n  const patchProps = (el, vnode, oldProps, newProps) => {\n    if (oldProps !== newProps) {\n      for (const key in newProps) {\n        const prev = oldProps[key]\n        const next = newProps[key]\n\n        if (next !== prev) {\n          hostPatchProp(el, key, prev, next)\n        }\n      }\n\n      for (const key in oldProps) {\n        if (!(key in newProps)) {\n          hostPatchProp(el, key, oldProps[key], null)\n        }\n      }\n    }\n  }\n\n  /**\n   * mount\u7684\u8FC7\u7A0B \u521B\u5EFA\u5143\u7D20\u3001\u5904\u7406\u5B50\u5143\u7D20\u3001\u5904\u7406props\u3001\u63D2\u5165\u5143\u7D20\u3002\n   */\n  const mountElement = (vnode: VNode, container, anchor, parentComponent, optimized) => {\n    let el\n    const { type, props, shapeFlag } = vnode\n\n    // TODO vnode.el \u5DF2\u6709\n\n    // \u521B\u5EFAelement\n    el = vnode.el = hostCreateElement(type)\n\n    // \u5904\u7406\u5B50\u5143\u7D20\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      // \u5982\u679Cchildren \u662F string\n      hostSetElementText(el, vnode.children as string)\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n      // children \u662F \u6570\u7EC4\n      mountChildren(vnode.children, el, anchor, parentComponent, optimized)\n    }\n\n    // \u5904\u7406\u5C5E\u6027props\uFF0C\u901A\u8FC7patchProp\u5904\u7406props\n    if (props) {\n      for (const key in props) {\n        hostPatchProp(el, key, null, props[key])\n      }\n    }\n\n    // \u63D2\u5165\n    hostInsert(el, container, anchor)\n  }\n\n  /**\n   * \u6302\u8F7Dchildren\n   */\n  const mountChildren = (\n    children,\n    container,\n    anchor,\n    parentComponent,\n    optimized,\n    start = 0\n  ) => {\n    for (let i = start; i < children.length; i++) {\n      // \u89C4\u8303\u5316child\n\n      // TODO\n      let child = (children[i] = normalizeVNode(children[i]))\n\n      // \u9012\u5F52patch\n      patch(null, child, container, anchor, parentComponent, optimized)\n    }\n  }\n\n  /**\n   * patch children\n   * 1. \u4F18\u5316\u6A21\u5F0F\u4E0B\uFF0C\u53EF\u4EE5\u533A\u522B \u6709key\u7684fragment \u548C \u65E0key\u7684fragment\n   */\n  const patchChildren = (\n    n1,\n    n2,\n    container,\n    anchor,\n    parentComponent,\n    optimized\n  ) => {\n    const c1 = n1 && n1.children\n    const preShapeFlag = n1 ? n1.shapeFlag : 0\n\n    const { patchFlag, shapeFlag, children: c2 } = n2\n\n    // \u4F7F\u7528\u4F18\u5316\u6A21\u5F0F\n    if (patchFlag > 0) {\n      if (patchFlag & PatchFlags.KEYED_FRAGMENT) {\n        // \u90E8\u5206\u6709key\n        patchKeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          optimized\n        )\n      } else if (patchFlag & PatchFlags.UNKEYED_FRAGMENT) {\n        // \u65E0 key fragment\n        patchUnkeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          optimized\n        )\n      }\n    }\n\n    // n2 string\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      // n1 array\n      if (preShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        unmountChildren(c1, parentComponent)\n      }\n      if (c1 !== c2) {\n        hostSetElementText(container, c2 as string)\n      }\n    } else {\n      // n2 array | null\n      // n1 array\n      if (preShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        // n2 array  full diff\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          patchKeyedChildren(\n            c1,\n            c2,\n            container,\n            anchor,\n            parentComponent,\n            optimized\n          )\n        } else {\n          // n2 null\n          unmountChildren(c1, parentComponent, true)\n        }\n      } else {\n        // n1 string | null\n        // n1 string\n        if (preShapeFlag & ShapeFlags.TEXT_CHILDREN) {\n          hostSetElementText(container, '')\n        }\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          mountChildren(c2, container, anchor, parentComponent, optimized)\n        }\n      }\n    }\n  }\n\n  // \u65E0key children\uFF0C\u53EA\u80FD\u66B4\u529Bpatch\n  const patchUnkeyedChildren = (\n    c1,\n    c2,\n    container,\n    anchor,\n    parentComponent,\n    optimized\n  ) => {\n    const oldLength = c1.length\n    const newLength = c2.length\n    const commonLength = Math.min(oldLength, newLength)\n\n    // \u76F8\u540C\u957F\u5EA6\u7684\u90E8\u5206\u76F4\u63A5\u6BD4\u8F83\n    for (let i = 0; i < commonLength; i++) {\n      const nextChild = (c2[i] = normalizeVNode(c2[i]))\n      patch(c1[i], nextChild, container, null, parentComponent, optimized)\n    }\n\n    if (oldLength > newLength) {\n      // \u5378\u8F7D\n      unmountChildren(c1, parentComponent, true, commonLength)\n    } else {\n      // \u6302\u8F7D\n      mountChildren(\n        c2,\n        container,\n        anchor,\n        parentComponent,\n        optimized,\n        commonLength\n      )\n    }\n  }\n\n  // \u6570\u7EC4 diff \u6838\u5FC3\u7B97\u6CD5\n  const patchKeyedChildren = (\n    c1,\n    c2,\n    container,\n    parentAnchor,\n    parentComponent,\n    optimized\n  ) => {\n    let i = 0\n    let l2 = c2.length\n    let e1 = c1.length - 1\n    let e2 = l2 - 1\n\n    // 1. \u8D77\u59CB\u4F4D\u7F6E\u7C7B\u578B\u76F8\u540C\n    // (a b) c\n    // (a b) d e\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[i]\n      // c2\u8282\u70B9\u672A\u88AB\u5904\u7406\u8FC7\n      const n2 = (c2[i] = normalizeVNode(c2[i]))\n      if (isSameVNodeType(n1, n2)) {\n        patch(n1, n2, container, null, parentComponent, optimized)\n      } else {\n        break\n      }\n      i++\n    }\n\n    // 2. \u7ED3\u675F\u4F4D\u7F6E\u7C7B\u578B\u76F8\u540C\n    // a (b c)\n    // d e (b c)\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[e1]\n      // c2\u8282\u70B9\u672A\u88AB\u5904\u7406\u8FC7\n      const n2 = (c2[e2] = normalizeVNode(c2[e2]))\n      if (isSameVNodeType(n1, n2)) {\n        patch(n1, n2, container, null, parentComponent, optimized)\n      } else {\n        break\n      }\n      e1--\n      e2--\n    }\n\n    // 3. \u65E7\u5E8F\u5217\u5DF2patch\u5B8C\uFF0C\u65B0\u5E8F\u5217\u4E2D\u4ECD\u6709\u65B0\u589E\u8282\u70B9 mount\n    // (a b)\n    // (a b) c d\n    // i = 2, e1 = 1, e2 = 3\n    // (a b)\n    // c d (a b)\n    // i = 0, e1 = -1, e2 = 1\n    // \u63D2\u5165\u8282\u70B9\u5FC5\u987B\u4F9D\u8D56anchor\n    if (i > e1) {\n      if (i <= e2) {\n        // \u7B2C\u4E00\u79CD\u60C5\u51B5 i \u53F3\u79FB\n        // \u7B2C\u4E8C\u79CD\u60C5\u51B5 e2 \u5DE6\u79FB\n        // while (i <= e2) {\n        //   if (i > 0) {\n        //     patch(null, (c2[i] = normalizeVNode(c2[i])), container)\n        //     i++\n        //   } else { // i = 0\n        //     const nextEl = c2[e2 + 1].el\n        //     patch(null, (c2[e2] = normalizeVNode(c2[e2])), container, nextEl)\n        //     e2--\n        //   }\n        // }\n\n        // \u8FD9\u79CD\u65B9\u5F0F\u66F4\u597D\n        const nextPos = e2 + 1\n        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor\n        while (i <= e2) {\n          patch(\n            null,\n            (c2[i] = normalizeVNode(c2[i])),\n            container,\n            anchor,\n            parentComponent,\n            optimized\n          )\n          i++\n        }\n      }\n    }\n\n    // 4. \u65B0\u5E8F\u5217\u5DF2patch\u5B8C\uFF0C\u65E7\u5E8F\u5217\u4E2D\u6709\u591A\u4F59\u8282\u70B9 unmount\n    // (a b) c d\n    // (a b)\n    // i = 2, e1 = 3, e2 = 1\n    // c d (a b)\n    // (a b)\n    // i = 0, e1 = 1, e2 = -1\n    else if (i > e2) {\n      while (i <= e1) {\n        unmount(c1[i], parentComponent, true)\n        i++\n      }\n    }\n\n    // 5. \u590D\u6742\u90E8\u5206 \u4E71\u5E8F\u8282\u70B9\n    // a b [c d e] f g\n    // a b [e d c h] f g\n    // i = 2, e1 = 4, e2 = 5\n    /**\n     * 1. \u751F\u6210newChild key\u6620\u5C04\u8868\n     * 2. \u6839\u636E\u6620\u5C04\u8868\u5BFB\u627EoldChild \u4E2D\u540Ckey\u5143\u7D20\uFF0C\u8FDB\u884C\u6BD4\u8F83\u3002\n     * 3. \u79FB\u52A8\u5143\u7D20\u4F4D\u7F6E\n     * TODO \u672A\u5904\u7406\u90E8\u5206\u65E0key\u7684\u60C5\u51B5\n     */\n    else {\n      let s1 = i\n      let s2 = i\n\n      // 1. \u751F\u6210newChild key\u6620\u5C04\u8868\n      const keyToNewIndexMap = new Map() // \u6709key\u5E8F\u53F7\u96C6\u5408  key\u503C\uFF1A\u5728\u65B0\u5E8F\u5217\u4E2D\u7684\u5E8F\u53F7\n      // \u65E0key\u5E8F\u53F7\u96C6\u5408\n      // const unKeyToNewIndexMap = new Set()\n\n      for (i = s2; i <= e2; i++) {\n        const nextChild = (c2[i] = normalizeVNode(c2[i]))\n        // \u5177\u5907key\u5C5E\u6027\n        if (nextChild.key !== null) {\n          keyToNewIndexMap.set(nextChild.key, i)\n        } else {\n          // unKeyToNewIndexMap.add(i)\n        }\n      }\n\n      // 2. \u6839\u636E\u6620\u5C04\u8868\u5BFB\u627EoldChild \u4E2D\u540Ckey\u5143\u7D20\uFF0C\u8FDB\u884C\u6BD4\u8F83\u3002\u627E\u5230\u5C31patch\uFF0C\u627E\u4E0D\u5230\u5378\u8F7D\n      const toBePatched = e2 - s2 + 1 // \u65B0\u7684\u4E71\u5E8F\u90E8\u5206\u603B\u4E2A\u6570\n      // \u76F8\u540Ckey\u5143\u7D20\uFF0C\u65B0index\u4E0E\u8001index\u6620\u5C04\uFF0C\u672A\u627E\u5230\u4E3A0\u3002\u65B0index\u4ECE0\u5F00\u59CB\uFF0C\u8001index\u4E3A\u548C0(\u672A\u627E\u5230)\u533A\u5206\uFF0C\u90FD\u4F1A\u52A01\n      const newIndexToOldIndexMap = new Array(toBePatched).fill(0)\n      for (i = s1; i <= e1; i++) {\n        const oldChild = c1[i]\n        let newIndex = keyToNewIndexMap.get(oldChild.key)\n        // old\u4E2D\u6709\u76F8\u540Ckey\u7684\u5143\u7D20\n        if (newIndex !== undefined) {\n          // - s2\u5C31\u662F\u4E3A\u4E86\u4ECE0\u5F00\u59CB\uFF1B\u503C\u4E3A\u4E86\u548C0\u533A\u5206\uFF0C\u90FD\u52A01\u5904\u7406\u3002\n          newIndexToOldIndexMap[newIndex - s2] = i + 1\n\n          patch(\n            oldChild,\n            c2[newIndex],\n            container,\n            null,\n            parentComponent,\n            optimized\n          )\n        } else {\n          // \u8001\u7684\u4E2D\u591A\u4F59\u90E8\u5206\uFF0C\u5378\u8F7D\u6389\n          unmount(oldChild, parentComponent, true)\n        }\n      }\n\n      // 3.\u79FB\u52A8\u5143\u7D20\u4F4D\u7F6E\n      // \u4ECE\u540E\u5411\u524D\u5FAA\u73AF\u7684\u539F\u56E0\u5728\u4E8E\uFF0C\u79FB\u52A8\u64CD\u4F5C\u9700\u8981\u4F9D\u8D56\u540E\u9762\u5143\u7D20\u7684el\uFF0C\u6240\u4EE5\u5FC5\u987B\u4FDD\u8BC1\u540E\u9762\u7684\u5143\u7D20\u5DF2\u7ECF\u79FB\u52A8\u6216\u8005\u5DF2\u6302\u8F7D\u540E\uFF0C\u624D\u80FD\u64CD\u4F5C\u524D\u9762\u7684\u3002\n      const increasingNewIndexSequence = getSequence(newIndexToOldIndexMap)\n      let j = increasingNewIndexSequence.length - 1\n      for (i = toBePatched - 1; i >= 0; i--) {\n        const index = i + s2 // newChild\u771F\u5B9E\u5E8F\u53F7\n        let current = c2[index]\n        let anchor = index + 1 < l2 ? c2[index + 1].el : null // \u53C2\u7167\u7269\u662F\u4E0B\u4E00\u4E2A\u6216\u8005null\n        if (newIndexToOldIndexMap[i] === 0) {\n          // \u672A\u5728oldChild\u4E2D\u51FA\u73B0\u8FC7\uFF0C\u9700\u8981\u6302\u8F7D\n          patch(null, current, container, anchor, parentComponent, optimized)\n        } else {\n          // \u6700\u5927\u4E0A\u5347\u5B50\u5E8F \u4ECE\u540E\u5411\u524D\u67E5\u627E\uFF0C\u627E\u5230\u5C31\u7565\u8FC7\n          if (j < 0 || i !== increasingNewIndexSequence[j]) {\n            // \u79FB\u52A8\u4F4D\u7F6E\n            move(current, container, anchor)\n          } else {\n            console.log(110, i)\n            j--\n          }\n        }\n      }\n    }\n  }\n\n  // doRemove \u53EA\u662F\u4E00\u4E2A\u662F\u5426\u6267\u884C\u5220\u9664 dom \u7684\u6807\u8BC6\uFF0Cfalse\u7684\u60C5\u51B5\u4E5F\u662F\u901A\u8FC7\u5176\u4ED6\u65B9\u5F0F\u66FF\u6362\u4E86\u3002\n  const unmount = (vnode, parentComponent, doRemove = false) => {\n    const { type, children, shapeFlag } = vnode\n\n    if (shapeFlag & ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE) {\n      // keepalive\u7684\u5378\u8F7D\uFF0C\u88ABdeactivate\u62E6\u622A\n      parentComponent.ctx.deactivate(vnode)\n      return\n    }\n\n    // \u7EC4\u4EF6\u7684\u5378\u8F7D\n    if (shapeFlag & ShapeFlags.COMPONENT) {\n      // \u7EC4\u4EF6\u5728\u5185\u90E8\u5904\u7406\u903B\u8F91\u4E2D\u79FB\u9664dom\n      unmountComponent(vnode.component, doRemove)\n    } else {\n      // Fragment \u662F\u4E00\u4E2A\u5BB9\u5668\u3002\u904D\u5386\u5B50\u5143\u7D20\u4F9D\u6B21\u5378\u8F7D\u3002\u4E0D\u7ED9\u5B50\u5143\u7D20\u7684\u5378\u8F7D\u4E0D\u4F1A\u6267\u884Cdom\u5220\u9664\uFF0C\u800C\u662F\u5728remove\u4E2D\u5378\u8F7DFragment\n      if (type === Fragment && shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n        unmountChildren(children, parentComponent)\n      }\n\n      if (doRemove) {\n        remove(vnode)\n      }\n    }\n  }\n\n  const remove = (vnode) => {\n    const { type, el, anchor } = vnode\n    // \u5982\u679C\u662Ffragment\uFF0C\u8C03\u7528removeFragment \u7279\u6B8A\u5904\u7406\n    if (type === Fragment) {\n      removeFragment(el, anchor)\n      return\n    }\n\n    hostRemove(el)\n  }\n\n  // Fragment\u662F\u4E00\u4E2A\u5BB9\u5668\uFF0C\u53EA\u80FD\u627E\u5230\u5F00\u59CB\u548C\u7ED3\u675F\u4F4D\u7F6E\uFF0C\u4F9D\u6B21\u5220\u9664\n  const removeFragment = (cur, end) => {\n    let next\n    while (cur !== end) {\n      next = hostNextSibling(cur)\n      hostRemove(cur)\n      cur = next\n    }\n    hostRemove(end)\n  }\n\n  const unmountChildren = (children, parentComponent, doRemove = false, start = 0) => {\n    for (let i = start; i < children.length; i++) {\n      unmount(children[i], parentComponent, doRemove)\n    }\n  }\n\n  const move = (vnode, container, anchor) => {\n    const { el } = vnode\n    hostInsert(el, container, anchor)\n  }\n\n  const getNextHostNode = (vnode: VNode) => {\n    return hostNextSibling(vnode.anchor || vnode.el)\n  }\n\n  /**\n   * render \u6E32\u67D3\u51FD\u6570\n   * \u5982\u679C\u6CA1\u6709vnode\u5C31\u662F\u5378\u8F7D\u8FC7\u7A0B\n   * \u5426\u5219\u8D70patch\n   */\n  const render = (vnode: VNode, container) => {\n    if (vnode == null) {\n      // \u5378\u8F7D\n      if (container._vnode) {\n        unmount(container._vnode, null, true)\n      }\n    } else {\n      // \u521D\u59CB\u5316\u6216\u8005\u66F4\u65B0\u7684\u8FC7\u7A0B\n      patch(container._vnode || null, vnode, container, null, null)\n    }\n    // \u4E3A\u5BB9\u5668\u7ED1\u5B9Avnode (\u4E0B\u6B21\u8FDB\u5165\u65F6\uFF0C\u8FD9\u91CC\u5C31\u5B58\u50A8\u4E86\u4E0A\u6B21\u7ED1\u5B9A\u7684\u503C)\n    container._vnode = vnode\n  }\n\n  // \u5185\u90E8\u6784\u4EF6\n  const internals = {\n    p: patch,\n    um: unmount,\n    m: move,\n    r: remove,\n    mt: mountComponent,\n    mc: mountChildren,\n    pc: patchChildren,\n    pbc: patchBlockChildren,\n    n: getNextHostNode,\n    o: options\n  }\n\n  return {\n    render,\n    createApp: createAppAPI(render)\n  }\n}\n\n/**\n * 1. \u52A8\u6001\u89C4\u5212\u6CD5\n * \u6BCF\u4E00\u4E2A\u6570\u5B57\u90FD\u8BB0\u5F55\u5230\u81EA\u8EAB\u4E3A\u6B62\u6709\u591A\u5C11\u4E2A\u9012\u589E\n * arr    [4, 6, 3, 5, 2, 7, 9, 8, 1]\n * dp     [1, 2, 1, 2, 1, 3, 4, 4, 1]  \u8BB0\u5F55\u6BCF\u4E2A\u6570\u5B57\u622A\u6B62\u81EA\u8EAB\uFF0C\u6709\u591A\u5C11\u4E2A\u9012\u589E\n * result [0, 1,          6, 7      ]  \u8BB0\u5F55\u6700\u957F\u9012\u589E\u5E8F\u5217\u7684\u5E8F\u53F7\n */\nfunction getSequence1(arr: number[]): number[] {\n  // \u521B\u5EFA\u4E0E\u53C2\u6570\u540C\u957F\u5EA6\u7684\u6570\u7EC4\uFF0C\u6BCF\u4E00\u9879\u521D\u59CB\u5316\u4E3A1\n  const len = arr.length\n  const dp = Array(len).fill(1)\n  // \u4FDD\u5B58\u5E8F\u53F7\n  let result = []\n  for (let i = 0; i < len; i++) {\n    const arrI = arr[i]\n    // \u8FC7\u6EE4\u6389\u503C\u4E3A0\u7684\u60C5\u51B5\n    if (arrI === 0) {\n      continue\n    }\n\n    // \u8BB0\u5F55\u9012\u589E\u5E8F\u53F7\n    let jResult = []\n    // \u904D\u5386i\u4E4B\u524D\u7684\u6BCF\u4E00\u9879 \u5BF9\u6BD4\u5927\u5C0F\n    for (let j = 0; j < i; j++) {\n      const arrJ = arr[j]\n      // \u8FC7\u6EE4\u6389\u503C\u4E3A0\u7684\u60C5\u51B5\n      if (arrJ === 0) {\n        continue\n      }\n\n      if (arrI > arrJ) {\n        // \u53EA\u4F7F\u7528\u6700\u957F\u5B50\u5E8F\n        if (dp[j] === dp[i]) {\n          dp[i] = dp[j] + 1\n          jResult.push(j)\n        }\n      }\n    }\n    // \u6700\u540E\u6DFB\u52A0\u4E0A\u5F53\u524D\u7684\u5E8F\u53F7\u3002\u622A\u6B62\u5230\u5F53\u524D\u80AF\u5B9A\u8981\u6DFB\u52A0\u5F53\u524D\uFF0C\u800C\u4E0A\u8FF0\u64CD\u4F5C\u6CA1\u6709\u6DFB\u52A0\u5F53\u524D\u3002\n    jResult.push(i)\n\n    // \u6BD4\u4E4B\u524D\u7ED3\u679C\u957F\uFF0C\u6539\u503C\n    jResult.length > result.length && (result = jResult)\n  }\n  return result\n}\n\n/**\n * 2. \u8D2A\u5FC3\u7B97\u6CD5 + \u4E8C\u5206\u67E5\u627E\uFF08\u7B97\u6CD5\u627E\u5230\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u7684\u4E2A\u6570\uFF09\uFF1B\u518D\u901A\u8FC7\u56DE\u6EAF\u6CD5\uFF0C\u627E\u5230\u6B63\u786E\u7684\u5E8F\u53F7\n * \u8D2A\u5FC3+\u4E8C\u5206\n * \u4ECE\u8D2A\u5FC3\u89D2\u5EA6\u8003\u8651\uFF0C\u5C3D\u53EF\u80FD\u589E\u52A0\u9012\u589E\u5B50\u5E8F\u5217\u7684\u957F\u5EA6\n * \u6240\u4EE5\u5E0C\u671B\u5728\u4E0A\u5347\u5B50\u5E8F\u5217\u672B\u5C3E\u52A0\u4E0A\u7684\u6811\u5C3D\u53EF\u80FD\u7684\u5C0F\n * 10, 9, 2, 5, 3, 7, 101, 4, 1\n * 10\n * 9\n * 2\n * 2 5\n * 2 3\n * 2 3 7\n * 2 3 7 101\n * 2 3 4 101\n * 1 3 4 101\n * \u8BBE\u5F53\u524D\u5DF2\u6C42\u51FA\u7684\u6700\u957F\u4E0A\u5347\u5B50\u5E8F\u5217\u7684\u957F\u5EA6\u4E3A len\uFF08\u521D\u59CB\u65F6\u4E3A 1\uFF09\uFF0C\u4ECE\u524D\u5F80\u540E\u904D\u5386\u6570\u7EC4 nums\uFF0C\u5728\u904D\u5386\u5230 nums[i] \u65F6\uFF1A\n * \u5982\u679C nums[i] > d[len] \uFF0C\u5219\u76F4\u63A5\u52A0\u5165\u5230 d \u6570\u7EC4\u672B\u5C3E\uFF0C\u5E76\u66F4\u65B0 len=len+1\uFF1B\n * \u5426\u5219\uFF0C\u5728 d \u6570\u7EC4\u4E2D\u4E8C\u5206\u67E5\u627E\uFF0C\u627E\u5230\u7B2C\u4E00\u4E2A\u6BD4 nums[i] \u5C0F\u7684\u6570 d[k] \uFF0C\u5E76\u66F4\u65B0 d[k + 1] = nums[i]\n *\n * \u56DE\u6EAF\u6CD5\n * \u64CD\u4F5Cresult\u65F6\uFF0C\u8BB0\u4F4F\u4ED6\u7684\u524D\u7F6E\u8282\u70B9\u3002\u7528\u6700\u540E\u4E00\u4E2A\u8282\u70B9\uFF0C\u53BB\u8FFD\u6EAF\u4ED6\u7684\u524D\u7F6E\u8282\u70B9\uFF0C\u5373\u4E3A\u6B63\u786E\u5E8F\u53F7\u3002\n */\nfunction getSequence(arr: number[]): number[] {\n  // \u524D\u7F6E\u8282\u70B9\u8BB0\u5F55\n  const p = arr.slice()\n\n  const result = [0]\n  const len = arr.length\n  let i, j, start, end, middle\n  for (i = 0; i < len; i++) {\n    const arrI = arr[i]\n    if (arrI !== 0) {\n      j = result[result.length - 1]\n      // \u5F53\u524D\u503C\u6BD4result\u4E2D\u6700\u540E\u4E00\u4E2A\u6570\u8FD8\u5927\uFF0C\u76F4\u63A5\u653E\u5165result\u4E2D\uFF0C\u8DF3\u51FA\u672C\u6B21\u5FAA\u73AF\n      if (arr[j] < arrI) {\n        p[i] = j\n        result.push(i)\n        continue\n      }\n\n      // \u4E8C\u5206\u67E5\u627E \u5728\u7ED3\u679C\u96C6\u4E2D\u627E\u5230\u6BD4\u5F53\u524D\u503C\u5927\u7684\uFF0C\u7528\u5F53\u524D\u7D22\u5F15\u66FF\u6362\n      start = 0\n      end = result.length - 1\n\n      // \u5F53 start \u548C end\u76F8\u7B49\u7684\u65F6\u5019\u505C\u6B62\u5FAA\u73AF\n      while (start < end) {\n        // \u90FD\u662F\u96642\u5411\u4E0B\u53D6\u6574\u7684\u65B9\u5F0F\n        middle = (start + end) >> 1\n        // middle = ((start + end) / 2) | 0\n        // middle = Math.floor((start + end) / 2)\n\n        // \u7EE7\u7EED\u4E8C\u5206\n        if (arr[result[middle]] < arrI) {\n          start = middle + 1\n        } else {\n          end = middle\n        }\n      }\n\n      // \u66FF\u6362 \u8FD9\u91CCstart \u548C end \u503C\u662F\u4E00\u6837\u7684\n      if (arrI < arr[result[start]]) {\n        // \u7B2C\u4E00\u4E2A\u4E0D\u9700\u8981\u8BB0\u5F55\n        if (start > 0) {\n          // \u66FF\u6362\u4E4B\u540E\uFF0C\u8BB0\u5F55\u66FF\u6362\u4F4D\u7F6E\u524D\u9762\u7684\u90A3\u4E2A\u3002\u4E24\u79CD\u90FD\u53EF\u4EE5\n          p[i] = result[start - 1]\n          // p[i] = p[end]\n        }\n        result[start] = i\n      }\n    }\n  }\n\n  let u = result.length\n  end = result[u - 1]\n  // \u8FFD\u6EAF\u5728p\u4E2D\u4FDD\u5B58\u7684\u524D\u7F6E\u5E8F\u53F7\n  while (u-- > 0) {\n    result[u] = end\n    end = p[end]\n  }\n\n  return result\n}\n\n/**\n * \u521D\u59CB\u5316\u6E32\u67D3\u6D41\u7A0B\n * 1. \u6267\u884Ch\u51FD\u6570\uFF0Ch\u51FD\u6570\u4E2D\u8C03\u7528createVNode\uFF0C\u8FD4\u56DEVNode\n * 2. VNode \u548C container \u4F5C\u4E3A\u53C2\u6570\u6267\u884Crender\u51FD\u6570\n * 3. VNode\u4E3A\u7A7A\u8D70\u5378\u8F7D\u6D41\u7A0B\uFF0C\u5426\u5219\u8FDB\u5165\u5230diff\u7B97\u6CD5\u7684\u6838\u5FC3\uFF0Cpatch\u8FC7\u7A0B\n * 4. \u521D\u59CB\u5316\u8FC7\u7A0B\uFF0Cpatch\u4E3B\u8981\u8FDB\u884C\u5143\u7D20\u521B\u5EFA\u3001\u5904\u7406props\u3001\u5904\u7406children\n * 5. \u5728\u5904\u7406children\u8FC7\u7A0B\u4E2D\uFF0C\u5FAA\u73AF\u3001\u6839\u636Echild\u7C7B\u578B\u5904\u7406VNode\uFF0C\u9012\u5F52\u8C03\u7528patch\n *\n * \u5DE7\u5999\u7684\u5730\u65B9\u662F\u901A\u8FC7\u4F4D\u8FD0\u7B97\u7684\u65B9\u5F0F\uFF0C\u5904\u7406VNode\u7C7B\u578B\n */\n\n/**\n * diff\u6D41\u7A0B\n * 1. container\u4E2D\u4FDD\u5B58\u4E4B\u524D\u7684VNode\u548Ch\u51FD\u6570\u8FD4\u56DE\u7684VNode\u4F5C\u4E3A\u53C2\u6570\uFF0C\u8FDB\u884Cpatch\n * 2. \u6D41\u7A0B\u5206\u53D1\n * 2.1 \u65E0\u53D8\u5316\u6D41\u7A0B\n * 2.2 type\u6539\u53D8\u7684\u6D41\u7A0B\n * 2.3 \u6839\u636EVNode\u6216\u8005type\u7C7B\u578B\u8FDB\u884Cpatch\n * 2.3.1 \u6587\u672C\u8282\u70B9 \u5171\u7528el\u3001\u66FF\u6362\u6587\u672C\n * 2.3.2 \u5143\u7D20\u8282\u70B9 processElement -> patchElement\n * 2.3.2.1 \u516C\u7528el\n * 2.3.2.2 patchChildren children\u6709\u4E09\u79CD\u60C5\u51B5 \u5B57\u7B26\u4E32\u3001\u6570\u7EC4\u3001null\n * 2.3.2.2.1 n2child\u662F\u5B57\u7B26\u4E32\n * 2.3.2.2.1.1 n1child\u662F\u6570\u7EC4 \u9996\u5148 unmountChildren \u89E3\u7ED1\n * 2.3.2.2.1.2 n1child\u4E0D\u7B49\u4E8En2child hostSetElementText \u76F4\u63A5\u66FF\u6362\u6587\u672C\n * 2.3.2.2.2 n2child\u4E0D\u662F\u5B57\u7B26\u4E32\n * 2.3.2.2.2.1 n1child\u662F\u6570\u7EC4 n2child\u4E5F\u662F\u6570\u7EC4 patchKeyedChildren\n * 2.3.2.2.2.1.1 \u9996\u5148patch\u6700\u5C0F\u516C\u5171\u957F\u5EA6\uFF0Cn2\u6BD4n1\u957F\u5C31\u65B0\u589E\uFF0Cn1\u6BD4n2\u957F\u5C31\u5220\u9664\n * 2.3.2.2.2.2 n1child\u662F\u6570\u7EC4 n2child\u662Fnull unmountChildren \u89E3\u7ED1\n * 2.3.2.2.2.3 n1child\u662F\u5B57\u7B26\u4E32 \u5148hostSetElementText\u8BBE\u7F6E\u7A7A\uFF1Bn2child\u662F\u6570\u7EC4 mountChildren\n * 2.3.2.3 patchProps \u904D\u5386\u65B0\u7684props \u4FEE\u6539\u5C5E\u6027\uFF1B\u904D\u5386\u8001\u7684props \u5220\u9664\u5C5E\u6027\n *\n */\n\n/**\n * patchKeyedChildren \u6838\u5FC3\u7B97\u6CD5\n * 3\u4E2A\u6307\u9488\uFF0C\u5BF9\u5E94 \u65B0\u524D\u65E7\u524D i\u3001\u65B0\u540E e1\u3001\u65E7\u540E e2\n * \u4F9D\u6B21\u5904\u7406\u4EE5\u4E0B\u51E0\u79CD\u60C5\u51B5\n * 1. \u8D77\u59CB\u8282\u70B9\u7C7B\u578B\u76F8\u540C\n *   (a b) c\n *   (a b) d e\n * 1.1 i \u53F3\u79FB\uFF0C\u4F9D\u6B21\u8FDB\u884Cpatch\uFF0C\u76F4\u5230\u7C7B\u578B\u4E0D\u540C\uFF0C\u8DF3\u51FA\u5FAA\u73AF\n * 2. \u7ED3\u675F\u4F4D\u7F6E\u7C7B\u578B\u76F8\u540C\n *   a (b c)\n *   d e (b c)\n * 2.1 e1\u3001e2\u5DE6\u79FB\uFF0C\u4F9D\u6B21\u8FDB\u884Cpatch\uFF0C\u76F4\u5230\u7C7B\u578B\u4E0D\u540C\uFF0C\u8DF3\u51FA\u5FAA\u73AF\n * 3. \u65E7\u5E8F\u5217\u5DF2\u6BD4\u5BF9\u5B8C\uFF0C\u65B0\u5E8F\u5217\u4E2D\u6709\u65B0\u589E\u8282\u70B9\n *   (a b)     \u6216\u8005    (a b)\n *   (a b) c           c (a b)\n * 3.1 i > e1 && i <= e2\n * 3.2 i\u53F3\u79FB\uFF0C\u5C06\u8282\u70B9\u63D2\u5165\u5230e2\u524D\u7684\u4F4D\u7F6E\u3002\u7531\u4E8E\u4ECE\u5DE6\u5411\u53F3\u5FAA\u73AF\u63D2\u5165\uFF0C\u987A\u5E8F\u4E0D\u4F1A\u53D1\u751F\u53D8\u5316\uFF0C\u5148\u63D2\u5165\u7684\u4F1A\u4E00\u76F4\u5F80\u524D\u6324\n * 4. \u65B0\u5E8F\u5217\u5DF2\u6BD4\u5BF9\u5B8C\uFF0C\u65E7\u5E8F\u5217\u4E2D\u6709\u591A\u4F59\u8282\u70B9\n *   (a b) c    \u6216\u8005    c (a b)\n *   (a b)             (a b)\n * 4.1 i > e2 && i <= e1\n * 4.2 i \u53F3\u79FB\uFF0C\u5FAA\u73AF\u5378\u8F7D\u8282\u70B9\n * 5. \u4E71\u5E8F\u8282\u70B9\n * 5.1 \u751F\u6210keyToNewIndex\u6620\u5C04\u8868\n * 5.2 \u5FAA\u73AFoldChild\uFF0C\u5982\u679C\u5176key\u5728\u6620\u5C04\u8868\u4E2D\u53EF\u4EE5\u627E\u5230\u5C31patch\uFF0C\u627E\u4E0D\u5230\u5C31\u5378\u8F7D\n * 5.3 \u79FB\u52A8\u5143\u7D20\uFF0CnewChild\u65B0\u589E\u7684\u8D70\u6302\u8F7D\uFF0C\u5176\u4ED6\u79FB\u52A8\u4F4D\u7F6E\n */\n\n/**\n * \u5173\u4E8E\u6700\u957F\u9012\u589E\u5B50\u5E8F\n * \u4E0A\u8FF0\u57285.3\u79FB\u52A8\u5143\u7D20\u4E2D\u4E0D\u7BA1\u4F4D\u7F6E\u662F\u5426\u53D8\u5316\u90FD\u4F1A\u88AB\u79FB\u52A8\u3002\u800C\u6700\u957F\u9012\u589E\u5B50\u5E8F\u65E0\u9700\u79FB\u52A8\u3002\n * \u4E3A\u4EC0\u4E48\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u65E0\u9700\u8981\u79FB\u52A8\uFF1F\n *    1. \u5165\u53C2\u662FnewIndexToOldIndexMap\uFF0C\u4E5F\u5C31\u662F\u8BF4\u4EE5oldChild\u7684\u4E0B\u6807\u4E3A\u4E0A\u5347\u53C2\u7167\u3002\n *    2. newChild\u4E2D\u76F8\u5BF9\u8001\u7684\u5E8F\u53F7\u88AB\u6253\u4E71\uFF0C\u5904\u4E8E\u5E8F\u53F7\u4E0A\u5347\u7684\u5143\u7D20\u5176\u5B9E\u662F\u4E0D\u9700\u8981\u66F4\u6362\u4F4D\u7F6E\u7684\u3002\n *        [1,2,3,4] -> [1,4,2,3] 1,2,3\u65E0\u9700\u79FB\u52A8\uFF0C\u53EA\u9700\u79FB\u52A84\n *    3. \u627E\u5230\u6700\u957F\u9012\u589E\u5B50\u5E8F\uFF0C\u5C31\u80FD\u627E\u5230\u6700\u591A\u65E0\u9700\u79FB\u52A8\u79FB\u52A8\u5143\u7D20\u3002\n * \u6700\u957F\u9012\u589E\u5B50\u5E8F getSequence\n * 1. \u52A8\u6001\u89C4\u5212\u6CD5\n * 2. \u8D2A\u5FC3+\u4E8C\u5206\u67E5\u627E\u6CD5\uFF08\u76EE\u524D\u7684\u6700\u4F18\u89E3\uFF09\n */\n", "/**\n * h\u51FD\u6570\u5C31\u662Fvue\u7684createElement\uFF0C\u521B\u5EFA\u865A\u62DFdom\uFF0C\u8FD4\u56DEVnode\uFF0C\u5B9E\u9645\u5C31\u662F\u8C03\u7528createVNode\n * \u53C2\u6570\u7C7B\u578B\u5F88\u591A\n * v \u4E00\u4E2A\u53C2\u6570\uFF0C\u76F4\u63A5\u6309\u7167type\u521B\u5EFA\n * v \u4E24\u4E2A\u53C2\u6570\uFF0C\u7B2C\u4E8C\u4E2A\u662F\u5BF9\u8C61\uFF08\u975E\u6570\u7EC4\uFF09\u5E76\u4E14\u4E0D\u662Fvnode\u5C31\u5F53\u505Aprops\uFF0C\u5426\u5219\u5F53\u505Achildren\n * v \u4E09\u4E2A\u6216\u4EE5\u4E0A\u53C2\u6570\uFF0C\u7B2C\u4E8C\u4E2A\u4E3Aprops\uFF0C\u540E\u9762\u7686\u4E3Achildren\n * v children \u7C7B\u578B\u53EF\u4EE5\u662F string\u3001string[]\u3001vnode\u3001vnode[]; vnode \u7EDF\u4E00\u5904\u7406\u4E3A vnode[]\n *\n */\nimport { isArray, isObject } from '@vue/shared'\nimport { createVNode, isVNode } from './vnode'\n\nexport function h(type, propsOrChildren?, children?) {\n  // \u53C2\u6570\u957F\u5EA6\n  const l = arguments.length\n  // \u4E24\u4E2A\u53C2\u6570\n  if (l === 2) {\n    // \u662F\u5BF9\u8C61\u4F46\u4E0D\u662F\u6570\u7EC4\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      if (isVNode(propsOrChildren)) {\n        // children vnode\n        return createVNode(type, null, [propsOrChildren])\n      }\n      // props\n      return createVNode(type, propsOrChildren)\n    } else {\n      // \u4E0D\u662F\u5BF9\u8C61\u3001\u6216\u8005\u662F\u6570\u7EC4\n      // children (string\u3001string[]\u3001vnode[] )\n      return createVNode(type, null, propsOrChildren)\n    }\n  } else {\n    // \u4E00\u4E2A\u53C2\u6570\u6216\u80053\u53CA\u4EE5\u4E0A\u4E2A\u53C2\u6570\uFF0C\u91CD\u65B0\u7EC4\u88C5children\u5C31\u597D\u3002\n    if (l > 3) {\n      children = Array.from(arguments).slice(2)\n    } else if (l === 3 && isVNode(children)) {\n      children = [children]\n    }\n\n    return createVNode(type, propsOrChildren, children)\n  }\n}\n", "import { currentInstance } from './component'\n\n/**\n * inject prodive \u89E3\u51B3\u8DE8\u5C42\u7EA7\u4F20\u9012\n * \u901A\u8FC7\u5EFA\u7ACBparent\u94FE\u7684\u65B9\u5F0F\uFF0C\u4F7F\u5B50\u7EC4\u4EF6\u53EF\u4EE5\u83B7\u53D6\u5230\u4E0A\u7EA7\u7EC4\u4EF6\u6CE8\u518C\u7684\u8DE8\u5C42\u7EA7\u5C5E\u6027\n */\n\nexport function provide(key, value) {\n  // \u5FC5\u987B\u5728setup\u4E2D\n  if (currentInstance) {\n    let provides = currentInstance.provides\n    // \u7236\u7EC4\u4EF6\u7684provides\n    const parentProvides =\n      currentInstance.parent && currentInstance.parent.provides\n\n    // provide \u7B2C\u4E00\u6B21\u8C03\u7528 \u4E0E\u7236provides\u7B80\u5386\u94FE\u63A5\n    if (provides === parentProvides) {\n      provides = currentInstance.provides = Object.create(parentProvides)\n    }\n\n    // \u4FDD\u5B58\u5C5E\u6027\u548C\u5C5E\u6027\u503C\n    provides[key] = value\n  }\n}\n\nexport function inject(key) {\n  // \u4F7F\u7528\u7236\u7EA7\u7684provides\u662F\u56E0\u4E3A\uFF0C\u81EA\u8EAB\u7684provides\u6709\u53EF\u80FD\u5DF2\u7ECF\u66F4\u6539\u4E86\u3002\n  const provides = currentInstance.parent && currentInstance.parent.provides\n  if (provides && (key in provides)) {\n    return provides[key]\n  }\n}\n", "import { isFunction } from '@vue/shared'\n\n// \u5B9A\u4E49\u7EC4\u4EF6\uFF0C\u5BF9\u51FD\u6570\u7EC4\u4EF6\u505A\u9ED8\u8BA4\u64CD\u4F5C\nexport function defineComponent(options) {\n  return isFunction(options) ? {setup: options, name: options.name} : options\n}\n", "// \u5F02\u6B65\u7EC4\u4EF6 \u5728\u6CE8\u518C\u7684\u65F6\u5019\u6E32\u67D3\u4E00\u4E2A\u7A7A\u7684\u6CE8\u91CA\u7EC4\u4EF6\uFF0C\u7B49\u5230\u7EC4\u4EF6\u52A0\u8F7D\u5B8C\u6210\u4E4B\u540E\u518D\u586B\u5145\u7EC4\u4EF6\uFF0C\u91CD\u65B0\u6E32\u67D3\n\nimport { ref } from '@vue/reactivity'\nimport { isFunction } from '@vue/shared'\nimport { defineComponent } from './apiDefineComponent'\nimport { currentInstance } from './component'\nimport { createVNode } from './vnode'\n\nexport function defineAsyncComponent(source) {\n  if (isFunction(source)) {\n    source = { loader: source }\n  }\n\n  const {\n    loader,\n    loadingComponent, // loading \u7EC4\u4EF6\n    delay = 200, // \u5EF6\u8FDF\u65F6\u95F4\n    timeout, // \u8D85\u65F6\n    errorComponent, // \u9519\u8BEF\u7EC4\u4EF6\n    onError: userOnError // \u5931\u8D25\u5904\u7406\uFF0C\u53D1\u8D77\u91CD\u8BD5\n  } = source\n\n  // request pending\u7684\u6807\u8BC6\n  let pendingRequest = null\n  // Comp\n  let resolveComp\n\n  // \u91CD\u8BD5\u6B21\u6570\n  let retries = 0\n  const retry = () => {\n    retries++\n    // \u6E05\u7A7A\n    pendingRequest = null\n    // \u91CD\u8BD5\n    return load()\n  }\n\n  const load = () => {\n    let thisRequest\n    return (\n      pendingRequest ||\n      (thisRequest = pendingRequest =\n        loader()\n          .then((comp) => {\n            // \u4E0D\u662F\u5F53\u524D\u7684request\n            if (pendingRequest && pendingRequest !== thisRequest) {\n              return pendingRequest\n            }\n\n            // \u83B7\u53D6\u5230\u5F02\u6B65\u7EC4\u4EF6\n            resolveComp = comp\n            return comp\n          }))\n          .catch(err => {\n            // \u5982\u679C\u4F20\u5165\u9519\u8BEF\u5904\u7406\u51FD\u6570\n            if (userOnError) {\n              err = err instanceof Error ? err : new Error(String(err))\n              // \u8FD4\u56DEpromise \u8C03\u7528\u9519\u8BEF\u5904\u7406\u51FD\u6570\uFF0C\u4E3A\u5176\u63D0\u4F9B\u91CD\u8BD5\u65B9\u6CD5\n              return new Promise((resolve, reject) => {\n                const userRetry = () => resolve(retry())\n                const userFail = () => reject(err)\n                userOnError(err, userRetry, userFail, retries + 1)\n              })\n            }\n          })\n    )\n  }\n\n  return defineComponent({\n    name: 'AsyncComponentWrapper',\n    setup() {\n      // \u5F53\u524D\u7EC4\u4EF6\n      const instance = currentInstance\n\n      // \u5DF2\u7ECF\u52A0\u8F7D\u8FC7Comp\n      if (resolveComp) {\n        return () => createInnerComp(resolveComp, instance)\n      }\n\n      // \u7EC4\u4EF6load\u6807\u8BC6\n      const loaded = ref(false)\n      // error \u6807\u8BC6\n      const error = ref()\n      // \u5EF6\u8FDF\u6807\u8BC6\n      const delayed = ref(!!delay)\n\n      // \u5B58\u5728\u5EF6\u8FDF\n      if (delayed) {\n        setTimeout(() => {\n          // \u5EF6\u8FDF\u5230\u4E86\n          delayed.value = false\n        }, delay)\n      }\n\n      // \u5B58\u5728timeout\n      if (timeout != null) {\n        setTimeout(() => {\n          // \u5F02\u6B65\u7EC4\u4EF6\u672A\u52A0\u8F7D\u5230\uFF0C\u5E76\u4E14\u5DF2\u7ECF\u8D85\u65F6\u4E86\n          if (!loaded.value && !error.value) {\n            pendingRequest = null\n            // error\n            error.value = new Error(\n              `Async component timed out after ${timeout}ms.`\n            )\n          }\n        }, timeout)\n      }\n\n      load()\n        .then(() => {\n          loaded.value = true\n        })\n        .catch(err => {\n          error.value = err\n        })\n\n      return () => {\n        if (loaded.value && resolveComp) { // \u52A0\u8F7D\u5F02\u6B65\u7EC4\u4EF6\uFF0C\u5C55\u793A\u5F02\u6B65\u7EC4\u4EF6\n          return createInnerComp(resolveComp, instance)\n        } else if (error.value && errorComponent) { // \u8D85\u65F6\uFF0C\u52A0\u8F7D\u9519\u8BEF\u7EC4\u4EF6\n          return createInnerComp(errorComponent, instance)\n        } else if (!delayed.value && loadingComponent) { // \u5EF6\u8FDF\u5230\u671F\uFF0C\u52A0\u8F7Dloading\u7EC4\u4EF6\n          return createInnerComp(loadingComponent, instance)\n        }\n      }\n    }\n  })\n}\n\n// \u521B\u5EFA\u5F02\u6B65\u7EC4\u4EF6\u83B7\u53D6\u5230\u7684\u771F\u5B9E\u7EC4\u4EF6\nfunction createInnerComp(comp, { vnode: { props, children } }) {\n  // \u521B\u5EFAVNode\n  const vnode = createVNode(comp, props, children)\n  return vnode\n}\n", "import { isReactive, isRef, isShallow, ReactiveEffect } from '@vue/reactivity'\nimport { hasChanged, isArray, isFunction, isObject } from '@vue/shared'\nimport { currentInstance } from './component'\nimport { queueJob } from './scheduler'\nexport function watchEffect(effect, options?) {\n  return doWatch(effect, null, options)\n}\n\nexport function watch(source, cb, options?) {\n  return doWatch(source, cb, options)\n}\n\nconst EMPTY_OBJ: { readonly [key: string]: any } = {}\n/**\n * watch \u548C watchEffect \u90FD\u8D70\u4E86doWatch\uFF0C\u53EA\u662F\u4E00\u4E2A\u6709\u56DE\u8C03\u4E00\u4E2A\u6CA1\u6709\n * 1. \u5904\u7406source\uFF0C\u5F62\u6210getter\uFF0C\u8FD4\u56DE\u7684\u662F\u6570\u636E\u7684\u503C\u3002getter\u4F5C\u4E3Aeffect\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\n * 2. scheduler\u903B\u8F91\uFF0C\u6709\u56DE\u8C03\u5982\u679C\u503C\u53D8\u5316\u89E6\u53D1\u56DE\u8C03\uFF0C\u6CA1\u6709\u56DE\u8C03\u76F4\u63A5\u89E6\u53D1effect.run\n * 3. \u8FD4\u56DEeffect.stop\uFF0C\u4F7F\u7528\u6237\u53EF\u4EE5\u81EA\u884C\u505C\u6B62\u3002\n */\nfunction doWatch(\n  source,\n  cb,\n  { immediate, deep } = EMPTY_OBJ\n) {\n\n  const instance = currentInstance\n  // \u83B7\u53D6\u5230\u76D1\u542C\u7684\u6570\u636E\n  let getter\n  // \u5F3A\u5236\u89E6\u53D1\u76D1\u542C\n  let forceTrigger = false\n  // \u662F\u5426\u4E3A\u591A\u6570\u636E\u6E90\n  let isMultiSource = false\n\n  // \u5904\u7406source\u7C7B\u578B\uFF0C\u652F\u6301ref\u3001reactive\u3001array<ref | reactive | function>\u3001function\n  if (isRef(source)) {\n    getter = () => source.value\n    // \u662F\u5426\u4E3A\u6D45\u54CD\u5E94\u5F0F\n    forceTrigger = isShallow(source)\n  } else if (isReactive(source)) {\n    getter = () => source\n    deep = true\n  } else if (isArray(source)) {\n    isMultiSource = true\n    // \u53EA\u8981\u6709reacitve\u6216\u8005\u6F5C\u54CD\u5E94\u5F0F\u5C31\u6807\u8BB0\u5F3A\u5236\u66F4\u65B0\n    forceTrigger = source.some(s => isReactive(s) || isShallow(s))\n    getter = () => {\n      source.map(s => {\n        if (isRef(s)) {\n          return s.value\n        } else if (isReactive(s)) {\n          // \u9700\u8981\u9012\u5F52\uFF0Cdeep\n          return traverse(s)\n        } else if (isFunction(s)) {\n          return s(instance)\n        }\n      })\n    }\n  } else if (isFunction(source)) {\n    // \u6709 cb, watch\n    if (cb) {\n      getter = () => source()\n    } else {\n      // watchEffect\uFF0Csource\u662Feffect\n      getter = () => {\n        // \u5378\u8F7D\u4E0D\u518D\u6536\u96C6\n        if (instance && instance.isUnmounted) {\n          return\n        }\n\n        if (cleanup) {\n          cleanup()\n        }\n\n        // \u83B7\u53D6\u503C \u4E3AwatchEffect \u7684\u53C2\u6570\u4E2D\u63D0\u4F9B onCleanup\u65B9\u6CD5\n        return source(onCleanup)\n      }\n    }\n  } else {\n    getter = () => {}\n  }\n\n  // \u5904\u7406deep (watch\uFF0C\u5E76\u4E14\u662Fdeep)\n  if (cb && deep) {\n    const baseGetter = getter\n    // getter\u91CD\u65B0\u8D4B\u503C\uFF0C\u9012\u5F52\u8C03\u7528\uFF0C\u76D1\u542C\u6240\u6709\u5C5E\u6027\n    getter = () => traverse(baseGetter())\n  }\n\n  let cleanup\n  let onCleanup = (fn) => {\n    // \u5728effect stop\u7684\u65F6\u5019\u6267\u884C\n    cleanup = effect.onStop = () => {\n      fn()\n    }\n  }\n\n  let oldValue = isMultiSource ? [] : {}\n  const job = () => {\n    // effect \u672A\u6FC0\u6D3B\u72B6\u6001\n    if (!effect.active) {\n      return\n    }\n\n    // watch\n    if (cb) {\n      // \u83B7\u53D6\u65B0\u503C\n      const newValue = effect.run()\n\n      // \u65B0\u503C\u548C\u8001\u503C\u5BF9\u6BD4\n      if (deep || forceTrigger ||\n        (isMultiSource\n          ? newValue.some((v, i) =>\n            hasChanged(v, oldValue[i])\n          )\n          : hasChanged(newValue, oldValue))\n      ) {\n        // cb\u518D\u6B21\u6267\u884C\u4E4B\u524D\uFF0C\u6E05\u7406\n        if (cleanup) {\n          cleanup()\n        }\n\n        // \u503C\u53D1\u751F\u53D8\u5316\uFF0C\u6267\u884C\u56DE\u8C03\n        cb(newValue, oldValue, onCleanup)\n\n        // \u53D8\u66F4\u4E3A\u8001\u503C\n        oldValue = newValue\n      }\n    } else {\n      // watchEffect \u76F4\u63A5\u6267\u884C\u526F\u4F5C\u7528\u51FD\u6570\n      effect.run()\n    }\n  }\n\n  // \u653E\u5165\u961F\u5217\n  let scheduler = () => queueJob(job)\n\n  // \u521B\u5EFA ReactiveEffect\n  const effect = new ReactiveEffect(getter, scheduler)\n\n  // \u6709\u56DE\u8C03 watch\n  if (cb) {\n    // \u7ACB\u5373\u6267\u884C\n    if (immediate) {\n      job()\n    } else {\n      // \u6536\u96C6\u4F9D\u8D56\uFF0C\u5E76\u4E14\u53D6\u56DE\u503C\uFF0C\u6B64\u65F6\u4E0D\u6267\u884C\u56DE\u8C03\uFF0C\u4E0B\u6B21\u66F4\u65B0\u65F6\u624D\u4F1A\u6267\u884C\u56DE\u8C03\n      oldValue = effect.run()\n    }\n  } else {\n    // watchEffect \u5148\u6267\u884C\u4E00\u6B21\n    effect.run()\n  }\n\n  // \u9700\u8981\u8FD4\u56DE \u505C\u6B62effect\u7684\u65B9\u6CD5\n  return () => {\n    effect.stop()\n  }\n}\n\n// \u9012\u5F52\u53D6\u503C seen\u9632\u6B62\u5FAA\u73AF\u5F15\u7528\nexport function traverse(value, seen?) {\n  if (!isObject(value)) {\n    return value\n  }\n  seen = seen || new Set()\n  if (seen.has(value)) {\n    return value\n  }\n  seen.add(value)\n  if (isRef(value)) {\n    traverse(value.value, seen)\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], seen)\n    }\n  } else if (isObject(value)) {\n    for (const key in value) {\n      traverse(value[key], seen)\n    }\n  }\n  return value\n}\n", "// DOM\u76F8\u5173\u7684 \u521B\u5EFA\u3001\u4FEE\u6539\u3001\u5220\u9664\u3001\u63D2\u5165\u7B49\u65B9\u6CD5.\n\nexport const nodeOps = {\n  // \u63D2\u5165\u65B9\u6CD5\n  insert: (child, parent, anchor) => {\n    parent.insertBefore(child, anchor || null)\n  },\n\n  // \u5220\u9664\u65B9\u6CD5\n  remove: (child) => {\n    const parent = child.parentNode\n    if (parent) {\n      parent.removeChild(child)\n    }\n  },\n\n  // \u521B\u5EFA\u8282\u70B9\n  createElement: (tag): Element => {\n    const el = document.createElement(tag)\n    return el\n  },\n  // \u521B\u5EFA\u6587\u672C\n  createText: (text) => document.createTextNode(text),\n\n  // \u521B\u5EFA\u6CE8\u91CA\n  createComment: text => document.createComment(text),\n\n  // \u8BBE\u7F6E\u6587\u672C\u8282\u70B9\u5185\u5BB9\n  setText: (node, text) => {\n    node.nodeValue = text\n  },\n\n  // \u8BBE\u7F6E\u8282\u70B9\u4E2D\u7684\u6587\u672C\u5185\u5BB9\n  setElementText: (el, text) => {\n    el.textContent = text\n  },\n\n  // \u7236\u5143\u7D20\n  parentNode: node => node.parentNode,\n\n  // \u4E0B\u4E00\u4E2A\u5144\u5F1F\u5143\u7D20\n  nextSibling: node => node.nextSibling,\n\n  querySelector: selector => document.querySelector(selector)\n}\n", "export function patchClass(el: Element, value: string | null) {\n  if (value === null) {\n    el.removeAttribute('class')\n  } else {\n    el.className = value\n  }\n}\n", "/**\n * patchStyle \u503C\u6709\u4E24\u79CD\u60C5\u51B5\uFF0C\u4E00\u79CD\u662F\u5B57\u7B26\u4E32(cssText)\uFF0C\u4E00\u79CD\u662F\u5BF9\u8C61\n */\nimport { isString } from '@vue/shared'\n\ntype String = string | Record<string, string> | null\n\nexport function patchStyle(el: Element, prev: String, next: String) {\n  const style = (el as HTMLElement).style\n  const isCssString = isString(next)\n  // \u5BF9\u8C61\uFF0C\u65B0\u589E\u3001\u4FEE\u6539\u3001\u5220\u9664\n  if (next && !isCssString) {\n    // \u65B0\u589E\u3001\u4FEE\u6539\n    for (const key in next) {\n      setStyle(style, key, next[key])\n    }\n\n    // \u5220\u9664\n    if (prev && !isString(prev)) {\n      for (const key in prev) {\n        if (next[key] == null) {\n          setStyle(style, key, '')\n        }\n      }\n    }\n  } else {\n    if (isCssString) {\n      // \u76F4\u63A5\u66FF\u6362cssText\n      if (prev !== next) {\n        style.cssText = next\n      }\n    } else if (prev) {\n      // \u6E05\u7A7A\n      el.removeAttribute('style')\n    }\n  }\n}\n\nfunction setStyle(style: CSSStyleDeclaration, name: string, val: string) {\n  // TODO \u8F6C\u9A7C\u5CF0\n  if (name in style) {\n    style[name] = val\n  }\n}\n", "/**\n * \u4E8B\u4EF6patch\n * v \u4F20\u5165\u662F\u6570\u7EC4\u6216\u8005\u51FD\u6570\u7684\u60C5\u51B5\n * v \u7531\u4E8E\u63A5\u89E6\u7ED1\u5B9A\u65F6\u9700\u8981\u4F20\u5165\u539F\u51FD\u6570\uFF0C\u6240\u4EE5\u8FD9\u91CC\u5FC5\u987B\u5B58\u50A8\u3002\n * v \u901A\u8FC7\u6362\u7ED1\u7684\u65B9\u5F0F\uFF0C\u4FEE\u6539\u7ED1\u5B9A\u4E8B\u4EF6\u65F6\uFF0C\u65E0\u9700\u89E3\u7ED1\u3001\u7ED1\u5B9A\u3002\n */\nimport { isArray } from '@vue/shared'\n\ninterface Invoker extends EventListener {\n  value: EventValue\n}\ntype EventValue = Function | Function[]\n\nexport function patchEvent(\n  el: Element & { _vei: Record<string, Invoker | undefined> },\n  rawName: string,\n  nextValue: EventValue | null\n) {\n  // \u5728el\u4E0A\u6DFB\u52A0_evi \u5C5E\u6027\uFF0C\u5B58\u50A8\u6240\u6709\u7684 \u4E8B\u4EF6\u8C03\u7528\u5668\n  const invokers = el._vei || (el._vei = {})\n  const existingInvoker = invokers[rawName]\n  if (nextValue && existingInvoker) {\n    // \u4FEE\u6539\u7684\u903B\u8F91\uFF0C\u6362\u7ED1\n    existingInvoker.value = nextValue\n  } else {\n    // \u53BB\u6389on\u5F00\u5934 \u8F6C\u5C0F\u5199\uFF0C\u8F6C\u4E3A\u771F\u5B9E\u4E8B\u4EF6\u540D\u79F0\n    const name = rawName.slice(2).toLowerCase()\n    if (nextValue) {\n      // \u65B0\u589E\n      const invoker = (invokers[rawName] = createInvoker(nextValue))\n      el.addEventListener(name, invoker)\n    } else if (existingInvoker) {\n      // \u63A5\u89E6\u6CE8\u518C\n      el.removeEventListener(name, existingInvoker)\n      // \u5220\u9664\u6389\u5B58\u50A8\n      invokers[rawName] = undefined\n    }\n  }\n}\n\n// \u628A\u6570\u7EC4\u6216\u8005\u51FD\u6570\u653E\u5230value\u4E2D\uFF0C\u5728event\u51FD\u6570\u4E2D\u5224\u65AD\nfunction createInvoker(initialValue: EventValue) {\n  const invoker: Invoker = (e: Event) => {\n    const value = invoker.value\n    if (isArray(value)) {\n      value.map((fn) => fn && fn(e))\n    } else {\n      value(e)\n    }\n  }\n  invoker.value = initialValue\n  return invoker\n}\n", "export function patchAttr(el: Element, key: string, value: any) {\n  if (value !== null) {\n    el.setAttribute(key, value)\n  } else {\n    el.removeAttribute(key)\n  }\n}\n", "/**\n * \u9488\u5BF9\u4E0D\u540C\u5C5E\u6027\uFF0C\u63D0\u4F9B\u4E0D\u540C\u7684patch\u7684\u65B9\u6CD5\n * class\n * style\n * on\u5F00\u5934 event\n * \u5176\u4ED6\u5C5E\u6027\n */\n\nimport { isOn } from '@vue/shared'\nimport { patchClass } from './modules/class'\nimport { patchStyle } from './modules/style'\nimport { patchEvent } from './modules/events'\nimport { patchAttr } from './modules/attrs'\n\nexport const patchProp = (el, key, prevValue, nextValue) => {\n  if (key === 'class') {\n    patchClass(el, nextValue)\n  } else if (key === 'style') {\n    patchStyle(el, prevValue, nextValue)\n  } else if (isOn(key)) {\n    patchEvent(el, key, nextValue)\n  } else {\n    patchAttr(el, key, nextValue)\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACEO,2BAAyB,KAAK;AACnC,WAAO,SAAS,GAAG,IAAI,MACnB,QAAQ,OAAO,KACd,QAAQ,GAAG,KAAK,SAAS,GAAG,IAAK,KAAK,UAAU,OAAO,IAAI,YAAY,IAAI,QAAQ,GAAG,IACvF,OAAO,GAAG;AAAA,EAChB;;;ACHA,MAAM,OAAO;AACN,MAAM,OAAO,CAAC,QAAQ,KAAK,KAAK,GAAG;AAEnC,MAAM,UAAU,MAAM;AAItB,MAAM,WAAW,CAAC,QAAgC,OAAO,QAAQ;AAIjE,MAAM,WAAW,CAAC,UACvB,OAAO,UAAU,YAAY,UAAU;AAElC,MAAM,aAAa,CAAC,UACzB,OAAO,UAAU;AAEZ,MAAM,aAAa,CAAC,OAAY,aACrC,CAAC,OAAO,GAAG,OAAO,QAAQ;AAErB,MAAM,iBAAiB,CAAC,KAAK,QAAS;AAC3C,aAAS,IAAI,GAAG,IAAI,IAAI,QAAQ,KAAK;AACnC,UAAI,GAAG,GAAG;AAAA,IACZ;AAAA,EACF;AAEO,MAAM,OAAO,MAAM;AAAA,EAAC;AAEpB,MAAM,SAAS,OAAO;AAE7B,MAAM,iBAAiB,OAAO,UAAU;AACjC,MAAM,SAAS,CAAC,KAAK,QAAQ,eAAe,KAAK,KAAK,GAAG;AAEzD,MAAM,aAAa,CAAC,QACzB,IAAI,OAAO,CAAC,EAAE,YAAY,IAAI,IAAI,MAAM,CAAC;AAGpC,MAAM,eAAe,CAAC,QAC3B,MAAM,KAAK,WAAW,GAAG,MAAM;;;ACtC1B,qBAAmB,SAAiC;AACzD,UAAM,MAAM,IAAI,IAAoB,OAAO;AAC3C,WAAO;AAAA,EACT;;;ACLO,MAAI;AACJ,MAAM,cAAN,MAAkB;AAAA,IAMvB,YAAY,WAAW,OAAO;AAL9B,oBAAS;AACT,qBAAU,CAAC;AAOT,UAAI,CAAC,YAAY,mBAAmB;AAElC,aAAK,SAAS;AAEd,aAAK,QAEF,mBAAkB,UAAW,mBAAkB,SAAS,CAAC,IAAI,KAC5D,IACF,IAAI;AAAA,MACR;AAAA,IACF;AAAA,IACA,IAAI,IAAI;AACN,UAAI,KAAK,QAAQ;AACf,cAAM,qBAAqB;AAC3B,YAAI;AACF,8BAAoB;AACpB,iBAAO,GAAG;AAAA,QACZ,UAAE;AACA,8BAAoB;AAAA,QACtB;AAAA,MACF;AAAA,IACF;AAAA,IAEA,OAAO;AACL,UAAI,KAAK,QAAQ;AACf,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK;AAC5C,eAAK,QAAQ,GAAG,KAAK;AAAA,QACvB;AAEA,YAAI,KAAK,QAAQ;AACf,mBAAS,IAAI,GAAG,IAAI,KAAK,OAAO,QAAQ,KAAK;AAC3C,iBAAK,OAAO,GAAG,KAAK;AAAA,UACtB;AAAA,QACF;AAEA,YAAI,KAAK,QAAQ;AAef,cAAI,OAAO,KAAK,OAAO,OAAO,IAAI;AAClC,cAAI,QAAQ,SAAS,MAAM;AACzB,iBAAK,OAAO,OAAO,KAAK,SAAS;AACjC,iBAAK,QAAQ,KAAK;AAAA,UACpB;AAAA,QACF;AACA,aAAK,SAAS;AAAA,MAChB;AAAA,IACF;AAAA,EACF;AAEO,uBAAqB,UAAW;AACrC,WAAO,IAAI,YAAY,QAAQ;AAAA,EACjC;AAGO,6BAA2B,SAAQ,QAAQ,mBAAmB;AACnE,QAAI,SAAS,MAAM,QAAQ;AACzB,YAAM,QAAQ,KAAK,OAAM;AAAA,IAC3B;AAAA,EACF;;;AC3DA,MAAM,YAAY,oBAAI,QAA0B;AAIzC,MAAI;AACJ,MAAM,iBAAN,MAAqB;AAAA,IAQ1B,YAAmB,IAAW,YAAoC,MAAM;AAArD;AAAW;AAP9B,oBAAS;AACT,kBAAc,CAAC;AACf,oBAAqC;AAMnC,wBAAkB,IAAI;AAAA,IACxB;AAAA,IAEA,MAAM;AAEJ,UAAI,CAAC,KAAK,QAAQ;AAChB,aAAK,GAAG;AAAA,MACV;AAEA,UAAI;AAEF,aAAK,SAAS;AAEd,uBAAe;AAEf,eAAO,KAAK,GAAG;AAAA,MACjB,UAAE;AAEA,uBAAe,KAAK;AAEpB,aAAK,SAAS;AAGd,YAAI,KAAK,WAAW;AAClB,eAAK,KAAK;AAAA,QACZ;AAAA,MACF;AAAA,IACF;AAAA,IAEA,OAAO;AAEL,UAAI,iBAAiB,MAAM;AACzB,aAAK,YAAY;AAAA,MACnB,WAAW,KAAK,QAAQ;AAEtB,sBAAc,IAAI;AAClB,YAAI,KAAK,QAAQ;AACf,eAAK,OAAO;AAAA,QACd;AAEA,aAAK,SAAS;AAAA,MAChB;AAAA,IACF;AAAA,EACF;AAEA,yBAAuB,SAAwB;AAC7C,UAAM,EAAE,SAAS;AACjB,QAAI,KAAK,QAAQ;AAEf,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AAEpC,aAAK,GAAG,OAAO,OAAM;AAAA,MACvB;AAEA,WAAK,SAAS;AAAA,IAChB;AAAA,EACF;AAYO,kBACL,IACA,SACsB;AAGtB,QAAK,GAA4B,QAAQ;AACvC,WAAM,GAA4B,OAAO;AAAA,IAC3C;AACA,UAAM,UAAU,IAAI,eAAe,EAAE;AACrC,QAAG,SAAS;AACV,aAAO,SAAS,OAAO;AAAA,IACzB;AAEA,YAAQ,IAAI;AAGZ,UAAM,SAAS,QAAQ,IAAI,KAAK,OAAO;AACvC,WAAO,SAAS;AAChB,WAAO;AAAA,EACT;AAGO,iBAAe,QAAgB,KAAc;AAElD,QAAI,cAAc;AAEhB,UAAI,UAAU,UAAU,IAAI,MAAM;AAClC,UAAI,CAAC,SAAS;AACZ,kBAAU,IAAI,QAAS,UAAU,oBAAI,IAAI,CAAE;AAAA,MAC7C;AACA,UAAI,MAAM,QAAQ,IAAI,GAAG;AACzB,UAAI,CAAC,KAAK;AACR,gBAAQ,IAAI,KAAM,MAAM,UAAU,CAAE;AAAA,MACtC;AAEA,mBAAa,GAAG;AAAA,IAClB;AAAA,EACF;AACO,wBAAsB,KAAU;AAErC,QAAI,CAAC,IAAI,IAAI,YAAa,GAAG;AAC3B,UAAI,IAAI,YAAa;AAErB,mBAAc,KAAK,KAAK,GAAG;AAAA,IAC7B;AAAA,EACF;AAGO,mBAAiB,QAAgB,KAAe,OAAiB;AACtE,UAAM,UAAU,UAAU,IAAI,MAAM;AAEpC,QAAI,CAAC;AAAS;AAEd,QAAI,OAA4B,CAAC;AAIjC,QAAI,QAAQ,QAAQ;AAClB,WAAK,KAAK,QAAQ,IAAI,GAAG,CAAC;AAAA,IAC5B;AAEA,QAAI,KAAK,WAAW,GAAG;AACrB,qBAAe,KAAK,EAAE;AAAA,IACxB;AAAA,EACF;AACO,0BAAwB,KAAU;AAEvC,UAAM,UAAU,MAAM,QAAQ,GAAG,IAAI,MAAM,CAAC,GAAG,GAAG;AAClD,eAAW,WAAU,SAAS;AAC5B,oBAAc,OAAM;AAAA,IACtB;AAAA,EACF;AAEA,yBAAuB,SAAwB;AAK7C,QAAI,YAAW,cAAc;AAE3B,UAAG,QAAO,WAAW;AACnB,gBAAO,UAAU;AAAA,MACnB,OAAO;AACL,gBAAO,IAAI;AAAA,MACb;AAAA,IACF;AAAA,EACF;;;ACtLA,MAAM,MAAM,aAAa;AACzB,MAAM,aAAa,aAAa,IAAI;AAEpC,wBAAsB,UAAU,OAAO;AACrC,WAAO,cAAa,QAAgB,KAAsB,UAAkB;AAC1E,UAAI,QAAQ,oCAA2B;AAErC,eAAO;AAAA,MACT,WAAW,QAAQ,kCAA0B;AAC3C,eAAO;AAAA,MACT,WACE,QAAQ,uBACR,aAAc,WAAU,qBAAqB,aAAa,IAAI,MAAM,GACpE;AAEA,eAAO;AAAA,MACT;AACA,YAAM,MAAM,QAAQ,IAAI,QAAQ,GAAG;AAEnC,YAAM,QAAQ,GAAG;AAGjB,UAAI,SAAS;AACX,eAAO;AAAA,MACT;AAGA,UAAI,SAAS,GAAG,GAAG;AACjB,eAAO,SAAS,GAAG;AAAA,MACrB;AACA,aAAO;AAAA,IACT;AAAA,EACF;AAEA,MAAM,MAAM,aAAa;AACzB,MAAM,aAAa,aAAa,IAAI;AAEpC,wBAAsB,UAAU,OAAO;AACrC,WAAO,cAAa,QAAQ,KAAK,OAAO;AACtC,YAAM,WAAY,OAAe;AACjC,YAAM,SAAS,QAAQ,IAAI,QAAQ,KAAK,KAAK;AAC7C,UAAI,WAAW,OAAO,QAAQ,GAAG;AAE/B,gBAAQ,QAAQ,KAAK,KAAK;AAAA,MAC5B;AACA,aAAO;AAAA,IACT;AAAA,EACF;AAEO,MAAM,kBAAwC;AAAA,IACnD;AAAA,IACA;AAAA,EAIF;AAEO,MAAM,0BAA0B,OAAO,CAAC,GAAG,iBAAiB;AAAA,IACjE,KAAK;AAAA,IACL,KAAK;AAAA,EACP,CAAC;;;ACnEM,MAAW,gBAAX,kBAAW,mBAAX;AAGL,oCAAc;AAEd,mCAAa;AAEb,4BAAM;AAPU;AAAA;AAgBX,MAAM,cAAc,oBAAI,QAAqB;AAC7C,MAAM,qBAAqB,oBAAI,QAAqB;AAGpD,oBAAkB,QAAQ;AAC/B,WAAO,qBAAqB,QAAQ,iBAAiB,WAAW;AAAA,EAClE;AAGO,2BAAyB,QAAQ;AACtC,WAAO,qBACL,QACA,yBACA,kBACF;AAAA,EACF;AAEA,gCACE,QACA,cACA,UACA;AAEA,QAAI,CAAC,SAAS,MAAM,GAAG;AACrB,aAAO;AAAA,IACT;AAGA,QAAI,OAAO,qCAA4B;AACrC,aAAO;AAAA,IACT;AAGA,UAAM,gBAAgB,SAAS,IAAI,MAAM;AACzC,QAAI,eAAe;AACjB,aAAO;AAAA,IACT;AAGA,UAAM,QAAQ,IAAI,MAAM,QAAQ,YAAY;AAE5C,aAAS,IAAI,QAAQ,KAAK;AAE1B,WAAO;AAAA,EACT;AAEO,sBAAoB,OAAgB;AAEzC,WAAO,CAAC,CAAE,UAAS,MAAM;AAAA,EAC3B;AAEO,qBAAmB,OAAgB;AAExC,WAAO,CAAC,CAAE,UAAS,MAAM;AAAA,EAC3B;AAEO,iBAAe,UAAU;AAI9B,WAAQ,YAAY,SAAS,wBAAuB;AAAA,EACtD;AAGO,MAAM,aAAa,CAAoB,UAC5C,SAAS,KAAK,IAAI,SAAS,KAAK,IAAI;;;ACtE/B,yBAAuB,MAAmB;AAE/C,QAAI,cAAc;AAEhB,aAAM,MAAM,IAAG;AAEf,mBAAa,KAAI,OAAQ,MAAI,MAAM,UAAU,EAAE;AAAA,IACjD;AAAA,EACF;AACO,2BAAyB,MAAmB;AAEjD,WAAM,MAAM,IAAG;AACf,QAAI,KAAI,KAAK;AAEX,qBAAe,KAAI,GAAG;AAAA,IACxB;AAAA,EACF;AAEO,iBAAe,GAAkB;AACtC,WAAO,CAAC,CAAE,MAAK,EAAE,cAAc;AAAA,EACjC;AAEO,eAAa,OAAiB;AACnC,WAAO,UAAU,KAAK;AAAA,EACxB;AAEA,qBAAmB,UAAmB;AAEpC,QAAI,MAAM,QAAQ,GAAG;AACnB,aAAO;AAAA,IACT,OAAO;AAEL,aAAO,IAAI,QAAQ,QAAQ;AAAA,IAC7B;AAAA,EACF;AAEA,MAAM,UAAN,MAAiB;AAAA,IAMf,YAAY,OAAU;AAFtB,WAAO,MAAW;AAClB,WAAgB,YAAY;AAG1B,WAAK,YAAY,MAAM,KAAK;AAE5B,WAAK,SAAS,WAAW,KAAK;AAAA,IAChC;AAAA,IACA,IAAI,QAAQ;AAEV,oBAAc,IAAI;AAClB,aAAO,KAAK;AAAA,IACd;AAAA,IACA,IAAI,MAAM,QAAQ;AAChB,eAAS,MAAM,MAAM;AAErB,UAAI,WAAW,QAAQ,KAAK,SAAS,GAAG;AACtC,aAAK,YAAY;AACjB,aAAK,SAAS,WAAW,MAAM;AAE/B,wBAAgB,IAAI;AAAA,MACtB;AAAA,IACF;AAAA,EACF;AAGO,sBAAoB,MAAU;AACnC,oBAAgB,IAAG;AAAA,EACrB;AAGO,iBAAe,MAAK;AACzB,WAAO,MAAM,IAAG,IAAI,KAAI,QAAQ;AAAA,EAClC;AAEA,MAAM,wBAAwB;AAAA,IAE5B,KAAK,CAAC,QAAQ,KAAK,aAAa;AAAE,aAAO,MAAM,QAAQ,IAAI,QAAQ,KAAK,QAAQ,CAAC;AAAA,IAAC;AAAA,IAClF,KAAK,CAAC,QAAQ,KAAK,OAAO,aAAa;AACrC,YAAM,WAAW,OAAO;AAExB,UAAI,MAAM,QAAQ,KAAK,CAAC,MAAM,KAAK,GAAG;AACpC,iBAAS,QAAQ;AACjB,eAAO;AAAA,MACT,OAAO;AAEL,eAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,MACjD;AAAA,IACF;AAAA,EACF;AAIO,qBAAmB,gBAAgB;AACxC,WAAO,WAAW,cAAc,IAC5B,iBACA,IAAI,MAAM,gBAAgB,qBAAqB;AAAA,EACrD;;;AC5FA,MAAM,eAAN,MAAsB;AAAA,IAOpB,YACE,SACiB,SACjB;AADiB;AARnB,WAAO,MAAW;AAIlB,WAAgB,YAAY;AAC5B,WAAO,SAAkB;AAKvB,WAAK,SAAS,IAAI,eAAe,SAAS,MAAM;AAE9C,YAAI,CAAC,KAAK,QAAQ;AAChB,eAAK,SAAS;AAEd,0BAAgB,IAAI;AAAA,QACtB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,IAAI,QAAQ;AAEV,oBAAc,IAAI;AAClB,UAAI,KAAK,QAAQ;AACf,aAAK,SAAS;AAEd,aAAK,SAAS,KAAK,OAAO,IAAI;AAAA,MAChC;AACA,aAAO,KAAK;AAAA,IACd;AAAA,IACA,IAAI,MAAM,UAAa;AACrB,WAAK,QAAQ,QAAQ;AAAA,IACvB;AAAA,EACF;AAEO,oBACL,iBACA;AACA,QAAI;AACJ,QAAI;AAGJ,UAAM,aAAa,WAAW,eAAe;AAC7C,QAAI,YAAY;AACd,eAAS;AAET,eAAS;AAAA,IACX,OAAO;AAEL,eAAS,gBAAgB;AACzB,eAAS,gBAAgB;AAAA,IAC3B;AAEA,UAAM,OAAO,IAAI,aAAa,QAAQ,MAAM;AAC5C,WAAO;AAAA,EACT;;;AClEO,MAAM,sBAAsB;AAAA,IACjC,QAAQ,OAAK,EAAE;AAAA,IACf,QAAQ,OAAK,EAAE;AAAA,EACjB;AAOO,MAAM,8BAA8B;AAAA,IACzC,IAAI,EAAE,GAAG,YAAY,KAAK;AACxB,YAAM,EAAE,MAAM,OAAO,YAAY,OAAO,KAAK,gBAAgB;AAG7D,UAAI,IAAI,OAAO,KAAK;AAElB,cAAM,IAAI,YAAa;AACvB,YAAI,MAAM,QAAW;AACnB,kBAAQ;AAAA,iBACD;AACH,qBAAO,WAAW;AAAA,iBACf;AACH,qBAAO,KAAK;AAAA,iBACT;AACH,qBAAO,MAAM;AAAA;AAAA,QAEnB,WAES,cAAc,OAAO,YAAY,GAAG,GAAG;AAC9C,sBAAY,OAAO;AACnB,iBAAO,WAAW;AAAA,QACpB,WAAW,QAAQ,OAAO,MAAM,GAAG,GAAG;AACpC,sBAAY,OAAO;AAEnB,iBAAO,KAAK;AAAA,QACd,WAAW,SAAS,OAAO,OAAO,GAAG,GAAG;AACtC,sBAAY,OAAO;AACnB,iBAAO,MAAM;AAAA,QACf;AAAA,MACF;AAGA,YAAM,eAAe,oBAAoB;AACzC,UAAI,cAAc;AAChB,eAAO,aAAa,QAAQ;AAAA,MAC9B;AAAA,IACF;AAAA,IACA,IAAI,EAAE,GAAG,YAAY,KAAK,OAAO;AAC/B,YAAM,EAAE,YAAY,MAAM,UAAU;AAEpC,UAAI,cAAc,OAAO,YAAY,GAAG,GAAG;AACzC,mBAAW,OAAO;AAClB,eAAO;AAAA,MACT,WAAW,QAAQ,OAAO,MAAM,GAAG,GAAG;AACpC,aAAK,OAAO;AACZ,eAAO;AAAA,MACT,WAAW,SAAS,OAAO,OAAO,GAAG,GAAG;AAEtC,gBAAQ,KAAK,sCAAa;AAC1B,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;;;ACpEO,wBAAsB,UAAU;AACrC,UAAM,UAAU,SAAS;AACzB,UAAM,aAAa,SAAS;AAE5B,UAAM,EAAE,MAAM,gBAAgB;AAG9B,QAAI,aAAa;AAEf,YAAM,OAAO,YAAY,KAAK,YAAY,UAAU;AAEpD,UAAI,SAAS,IAAI,GAAG;AAElB,iBAAS,OAAO,SAAS,IAAI;AAAA,MAC/B;AAAA,IACF;AAAA,EACF;;;ACTO,qBAAmB,UAAU,UAAU,YAAY;AACxD,UAAM,QAAQ,CAAC;AACf,UAAM,QAAQ,CAAC;AAGf,iBAAa,UAAU,UAAU,OAAO,KAAK;AAG7C,eAAW,OAAO,SAAS,aAAa,IAAI;AAC1C,UAAI,CAAE,QAAO,QAAQ;AACnB,cAAM,OAAO;AAAA,MACf;AAAA,IACF;AAEA,QAAI,YAAY;AAEd,eAAS,QAAQ,gBAAgB,KAAK;AAAA,IACxC,OAAO;AAEL,eAAS,QAAQ;AAAA,IACnB;AAGA,aAAS,QAAQ;AAAA,EACnB;AAEA,wBAAsB,UAAU,UAAU,OAAO,OAAO;AAEtD,UAAM,CAAC,WAAW,SAAS;AAG3B,QAAI,UAAU;AACZ,iBAAW,OAAO,UAAU;AAC1B,cAAM,QAAQ,SAAS;AAEvB,YAAI,WAAW,OAAO,SAAS,GAAG,GAAG;AACnC,gBAAM,OAAO;AAAA,QACf,OAAO;AAEL,cAAI,CAAE,QAAO,UAAU,UAAU,MAAM,MAAM;AAC3C,kBAAM,OAAO;AAAA,UACf;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAOO,uBAAqB,UAAU,UAAU,cAAc,WAAW;AACvE,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA,OAAO,EAAE;AAAA,QACP;AAEJ,UAAM,kBAAkB,MAAM,KAAK;AACnC,UAAM,CAAC,WAAW,SAAS;AAG3B,QAAK,cAAa,YAAY,MAAM,CAAE,aAAY,sBAAwB;AAAA,IAC1E,OAAO;AAGL,mBAAa,UAAU,UAAU,OAAO,KAAK;AAK7C,iBAAW,OAAO,iBAAiB;AACjC,YAAI,CAAC,YAAY,CAAC,OAAO,UAAU,GAAG,GAAG;AACvC,cAAI,SAAS;AAEX,gBAAI,gBAAgB,aAAa,SAAS,QAAW;AACnD,oBAAM,OAAO;AAAA,YACf;AAAA,UACF,OAAO;AAEL,mBAAO,MAAM;AAAA,UACf;AAAA,QACF;AAAA,MACF;AAKA,UAAI,UAAU,iBAAiB;AAC7B,mBAAW,OAAO,OAAO;AACvB,cAAI,CAAC,OAAO,UAAU,GAAG,GAAG;AAC1B,mBAAO,MAAM;AAAA,UACf;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;;;ACxGO,gBAAc,UAAU,UAAU,SAAS;AAChD,QAAI,SAAS;AAAa;AAE1B,UAAM,QAAQ,SAAS,MAAM;AAI7B,QAAI,UAAU,MAAM,aAAa,KAAK;AACtC,QAAI,SAAS;AACX,cAAQ,GAAG,OAAO;AAAA,IACpB;AAAA,EACF;;;ACVO,MAAM,aAAa,CAAC,SAAS,KAAK;AAGzC,MAAM,qBAAqB,CAAC,UAC1B,SAAU,OAAM,YAAY,MAAM,aAAa;AAGjD,MAAM,gBAAgB,CAAC,OAAO,WAAW;AACvC,UAAM,iBAAiB,SAAS,MAAM;AAEtC,QAAI,SAAS,cAAc,GAAG;AAC5B,aAAO,OAAO,cAAc;AAAA,IAC9B,OAAO;AAEL,aAAO;AAAA,IACT;AAAA,EACF;AAaA,MAAM,eAAe;AAAA,IACnB,cAAc;AAAA,IACd,QAAQ,IAAI,IAAI,WAAW,QAAQ,iBAAiB,WAAW,WAAW;AACxE,YAAM;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,GAAG,EAAE,QAAQ,YAAY;AAAA,UACvB;AAGJ,YAAM,WAAW,mBAAmB,GAAG,KAAK;AAC5C,UAAI,EAAE,WAAW,UAAU,oBAAoB;AAG/C,UAAI,OAAO,MAAM;AAEf,cAAM,SAAU,GAAG,SAAS,cAAc,GAAG,OAAO,aAAa;AACjE,cAAM,eAAgB,GAAG,eAAe,WAAW,EAAE;AACrD,YAAI,QAAQ;AAEV,iBAAO,cAAc,MAAM;AAAA,QAC7B;AAEA,cAAM,QAAQ,CAAC,YAAW,YAAW;AAEnC,cAAI,YAAY,yBAA2B;AACzC,0BAAc,UAAU,YAAW,SAAQ,iBAAiB,SAAS;AAAA,UACvE;AAAA,QACF;AAEA,YAAI,UAAU;AACZ,gBAAM,WAAW,MAAM;AAAA,QACzB,WAAW,QAAQ;AAEjB,gBAAM,QAAQ,YAAY;AAAA,QAC5B;AAAA,MACF,OAAO;AAEL,WAAG,KAAK,GAAG;AAEX,cAAM,aAAc,GAAG,SAAS,GAAG;AAEnC,cAAM,SAAU,GAAG,SAAS,GAAG;AAE/B,cAAM,eAAgB,GAAG,eAAe,GAAG;AAE3C,cAAM,cAAc,mBAAmB,GAAG,KAAK;AAE/C,cAAM,mBAAmB,cAAc,YAAY;AAEnD,cAAM,gBAAgB,cAAc,aAAa;AAGjD,YAAI,iBAAiB;AACnB,6BACE,GAAG,iBACH,iBACA,kBACA,eACF;AAAA,QACF,WAAW,CAAC,WAAW;AAErB,wBACE,IACA,IACA,kBACA,eACA,iBACA,KACF;AAAA,QACF;AAGA,YAAI,UAAU;AACZ,cAAI,CAAC,aAAa;AAEhB,yBACE,IACA,WACA,YACA,WACA,kBAAkB,MACpB;AAAA,UACF;AAAA,QACF,OAAO;AAIL,cAAI,GAAG,SAAS,GAAG,MAAM,OAAO,GAAG,SAAS,GAAG,MAAM,IAAI;AACvD,kBAAM,aAAa,cAAc,GAAG,OAAO,aAAa;AACxD,gBAAI,YAAY;AACd,2BACE,IACA,YACA,MACA,WACA,kBAAkB,aACpB;AAAA,YACF;AAAA,UACF,WAAW,aAAa;AAEtB,yBACE,IACA,QACA,cACA,WACA,kBAAkB,MACpB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAGO,MAAW,oBAAX,kBAAW,uBAAX;AACL;AACA;AAFgB;AAAA;AAOlB,wBACE,OACA,WACA,cACA,EAAE,GAAG,EAAE,UAAU,GAAG,QACpB,UACA;AAEA,QAAI,aAAa,uBAAiC;AAEhD,aAAO,MAAM,cAAe,WAAW,YAAY;AAAA,IACrD;AACA,UAAM,EAAE,WAAW,aAAa;AAGhC,QAAI,YAAY,yBAA2B;AACzC,eAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,aAAK,SAAS,IAAI,WAAW,YAAY;AAAA,MAC3C;AAAA,IACF;AAAA,EACF;AAEO,MAAM,WAAW;;;ACrKjB,MAAM,OAAO,OAAO,MAAM;AAE1B,MAAM,WAAW,OAAO,UAAU;AAElC,MAAM,UAAU,OAAO,SAAS;AAyBhC,mBAAiB,OAAqB;AAC3C,WAAO,CAAC,CAAE,UAAS,MAAM;AAAA,EAC3B;AAEO,2BAAyB,IAAI,IAAI;AACtC,WAAO,GAAG,SAAS,GAAG,QAAQ,GAAG,QAAQ,GAAG;AAAA,EAC9C;AAOO,MAAM,aAAa,CAAC;AAEpB,MAAI,eAAe;AAGnB,qBAAmB,kBAAkB,OAAO;AACjD,eAAW,KAAM,eAAe,kBAAkB,OAAO,CAAC,CAAE;AAAA,EAC9D;AAGO,wBAAsB;AAC3B,eAAW,IAAI;AACf,mBAAe,WAAW,WAAW,SAAS,MAAM;AAAA,EACtD;AAGA,sBAAoB,OAAO;AACzB,UAAM,kBAAkB,gBAAgB,CAAC;AAGzC,eAAW;AAEX,WAAO;AAAA,EACT;AAMO,8BACL,MACA,OACA,UACA,WACA,cACA,WACA;AACA,WAAO,WACL,gBACE,MACA,OACA,UACA,WACA,cACA,WACA,IACF,CACF;AAAA,EACF;AAWO,uBACL,MACA,QAAQ,MACR,WAAW,MACX,YAAY,GACZ,eAAgC,MAChC,cAAc,OACd;AACA,UAAM,YAAY,SAAS,IAAI,IAC3B,kBACA,WAAW,IAAI,IACf,oBACA,SAAS,IAAI,IACb,6BACA,WAAW,IAAI,IACf,+BACA;AAIJ,WAAO,gBACL,MACA,OACA,UACA,WACA,cACA,WACA,aACA,IACF;AAAA,EACF;AAEA,2BACE,MACA,QAAa,MACb,WAAgB,MAChB,YAAY,GACZ,eAAgC,MAChC,YAAY,SAAS,WAAW,IAAI,iBACpC,cAAc,OACd,gCAAgC,OAChC;AACA,UAAM,QAAQ;AAAA,MACZ,aAAa;AAAA,MACb,YAAY;AAAA,MACZ,IAAI;AAAA,MACJ;AAAA,MACA;AAAA,MACA,KAAK,+BAAO;AAAA,MACZ,QAAQ;AAAA,MACR;AAAA,MACA,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA,iBAAiB;AAAA,IACnB;AAGA,QAAI,+BAA+B;AACjC,wBAAkB,OAAO,QAAQ;AAAA,IACnC,WAAW,UAAU;AAGnB,YAAM,aAAa,SAAS,QAAQ,IAChC,wBACA;AAAA,IACN;AAGA,QAEE,CAAC,eACD,gBAAgB,MAAM,YAAY,GAClC;AACA,mBAAa,KAAK,KAAK;AAAA,IACzB;AAEA,WAAO;AAAA,EACT;AAKO,0BAAwB,OAAmB;AAEhD,QAAI,SAAS,QAAQ,OAAO,UAAU,WAAW;AAE/C,aAAO,YAAY,OAAO;AAAA,IAC5B,WAAW,QAAQ,KAAK,GAAG;AAGzB,aAAO,YAAY,UAAU,MAAM,MAAM,MAAM,CAAC;AAAA,IAClD,WAAW,SAAS,KAAK,GAAG;AAG1B,aAAO;AAAA,IACT,OAAO;AAEL,aAAO,YAAY,MAAM,MAAM,OAAO,KAAK,CAAC;AAAA,IAC9C;AAAA,EACF;AAEO,2BAAyB,OAAe,IAAI,YAAoB,GAAG;AACxE,WAAO,YAAY,MAAM,MAAM,MAAM,SAAS;AAAA,EAChD;AAIO,6BAA2B,OAAO,UAAU;AACjD,QAAI,OAAO;AAEX,QAAI,YAAY,MAAM;AACpB,iBAAW;AAAA,IACb,WAAW,QAAQ,QAAQ,GAAG;AAE5B,aAAO;AAAA,IACT,WAAW,OAAO,aAAa,UAAU;AAGvC,aAAO;AAAA,IAET,WAAW,WAAW,QAAQ,GAAG;AAE/B,iBAAW,EAAE,SAAS,SAAS;AAC/B,aAAO;AAAA,IACT,OAAO;AAEL,iBAAW,OAAO,QAAQ;AAG1B,UAAG,MAAM,YAAY,mBAAqB;AACxC,eAAO;AACP,mBAAW,CAAC,gBAAgB,QAAQ,CAAC;AAAA,MACvC,OAAO;AACL,eAAO;AAAA,MACT;AAAA,IACF;AAEA,UAAM,WAAW;AACjB,UAAM,aAAa;AAAA,EACrB;;;ACvPO,qBAAmB,UAAU,UAAU;AAE5C,QAAI,SAAS,MAAM,YAAY,yBAA2B;AAExD,2BAAqB,UAAW,SAAS,QAAQ,CAAC,GAAI,QAAQ;AAAA,IAChE;AAAA,EACF;AAGO,uBAAqB,UAAU,UAAU,WAAW;AACzD,UAAM,EAAE,OAAO,UAAU;AAEzB,QAAI,oBAAoB;AAGxB,QAAI,MAAM,YAAY,yBAA2B;AAE/C,0BAAoB,CAAE,SAAiB;AAEvC,2BAAqB,UAAU,OAAO,QAAQ;AAAA,IAChD;AAGA,QAAI,mBAAmB;AACrB,iBAAW,OAAO,OAAO;AACvB,YAAI,CAAE,QAAO,WAAW;AACtB,iBAAO,MAAM;AAAA,QACf;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAGA,MAAM,gBAAgB,CAAC,QAAQ,IAAI,OAAO,OAAO,QAAQ;AAEzD,gCAA8B,UAAU,OAAO,UAAU;AACvD,eAAW,OAAO,UAAU;AAE1B,UAAI,cAAc,GAAG;AAAG;AAExB,YAAM,QAAQ,SAAS;AAGvB,UAAI,WAAW,KAAK,GAAG;AAGrB,cAAM,OAAO,CAAC,UAAU,mBAAmB,MAAM,KAAK,CAAC;AAAA,MACzD,OAAO;AAGL,cAAM,YAAY,mBAAmB,KAAK;AAE1C,cAAM,OAAO,MAAM;AAAA,MACrB;AAAA,IACF;AAAA,EACF;AAIA,MAAM,qBAAqB,CAAC,UAC1B,QAAQ,KAAK,IAAI,MAAM,IAAI,cAAc,IAAI,CAAC,eAAe,KAAK,CAAC;;;AC1CrE,MAAI,MAAM;AAEH,MAAI,kBAAkB;AAEtB,mCAAiC,OAAc,QAAQ;AAC5D,UAAM,EAAE,SAAS;AACjB,UAAM,WAAW;AAAA,MACf,KAAK;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA,MAAM;AAAA,MACN,SAAS;AAAA,MACT,aAAa;AAAA,MACb,QAAQ;AAAA,MACR,KAAK,CAAC;AAAA,MACN,QAAQ;AAAA,MACR,OAAO;AAAA,MAGP,UAAU,SAAS,OAAO,WAAW,uBAAO,OAAO,IAAI;AAAA,MAEvD,cAAc,CAAE,KAAmB,KAAK;AAAA,MACxC,OAAO,CAAC;AAAA,MACR,OAAO,CAAC;AAAA,MAER,YAAY,CAAC;AAAA,MACb,cAAc;AAAA,MAEd,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,MAAM;AAAA,MAEN,WAAW;AAAA,MACX,aAAa;AAAA,MACb,IAAI;AAAA,MACJ,GAAG;AAAA,MACH,IAAI;AAAA,MACJ,GAAG;AAAA,MACH,KAAK;AAAA,MACL,IAAI;AAAA,IACN;AAEA,aAAS,MAAM;AAAA,MACb,GAAG;AAAA,IACL;AAGA,aAAS,OAAO,KAAK,KAAK,MAAM,QAAQ;AAExC,WAAO;AAAA,EACT;AAKO,MAAM,qBAAqB,MAAM;AAEjC,MAAM,qBAAqB,CAAC,aAAa;AAC9C,sBAAkB;AAAA,EACpB;AAEO,MAAM,uBAAuB,MAAM;AACxC,sBAAkB;AAAA,EACpB;AAIO,+BAA6B,UAAU;AAC5C,WAAO,SAAS,MAAM,YAAY;AAAA,EACpC;AAEO,0BAAwB,UAAU;AACvC,UAAM,EAAE,OAAO,aAAa,SAAS;AAErC,UAAM,aAAa,oBAAoB,QAAQ;AAG/C,cAAU,UAAU,OAAO,UAAU;AACrC,cAAU,UAAU,QAAQ;AAG5B,UAAM,cAAc,aAAa,uBAAuB,QAAQ,IAAI;AACpE,WAAO;AAAA,EACT;AAEA,kCAAgC,UAAU;AAExC,UAAM,YAAY,SAAS;AAE3B,aAAS,cAAc,uBAAO,OAAO,IAAI;AAEzC,aAAS,QAAQ,IAAI,MAAM,SAAS,KAAK,2BAA2B;AAapE,UAAM,EAAE,UAAU;AAClB,QAAI,OAAO;AAET,YAAM,eAAgB,SAAS,eAC7B,MAAM,SAAS,IAAI,mBAAmB,QAAQ,IAAI;AAGpD,yBAAmB,QAAQ;AAG3B,YAAM,cAAc,MAAM,SAAS,OAAO,YAAY;AAGtD,2BAAqB;AAGrB,wBAAkB,UAAU,WAAW;AAAA,IACzC,OAAO;AAEL,2BAAqB,QAAQ;AAAA,IAC/B;AAAA,EACF;AAEA,6BAA2B,UAAU,aAAa;AAEhD,QAAI,WAAW,WAAW,GAAG;AAC3B,eAAS,SAAS;AAAA,IACpB,WAAW,SAAS,WAAW,GAAG;AAEhC,eAAS,aAAa,UAAU,WAAW;AAAA,IAC7C;AAGA,yBAAqB,QAAQ;AAAA,EAC/B;AAEA,gCAA8B,UAAU;AACtC,UAAM,YAAY,SAAS;AAE3B,QAAI,CAAC,SAAS,QAAQ;AAIpB,eAAS,SAAS,UAAU,UAAU;AAAA,IACxC;AAIA,iBAAa,QAAQ;AAAA,EACvB;AAGO,8BAA4B,UAAU;AAC3C,UAAM,SAAS,CAAC,YAAW;AACzB,eAAS,SAAS,WAAU,CAAC;AAAA,IAC/B;AACA,WAAO;AAAA,MACL,OAAO,SAAS;AAAA,MAChB,OAAO,SAAS;AAAA,MAChB,MAAM,SAAS;AAAA,MACf;AAAA,IACF;AAAA,EACF;;;AC3LO,+BAA6B,UAAU;AAC5C,UAAM,EAAE,MAAM,WAAW,OAAO,OAAO,OAAO,oBAAW;AACzD,QAAI;AAEJ,UAAM,aAAa;AAGnB,QAAI,MAAM,YAAY,4BAA+B;AAGnD,eAAS,eAAe,QAAQ,KAAK,YAAY,UAAU,CAAC;AAAA,IAC9D,OAAO;AAGL,YAAM,UAAS;AAEf,eAAS,eAAe,QAAO,KAAK,CAAC;AAAA,IACvC;AAEA,WAAO;AAAA,EACT;AAGO,iCACL,WACA,WACS;AACT,UAAM,EAAE,OAAO,WAAW,UAAU,iBAAiB;AACrD,UAAM,EAAE,OAAO,WAAW,UAAU,iBAAiB;AAKrD,QAAI,gBAAgB,cAAc;AAChC,UAAI,CAAC,gBAAgB,CAAE,aAAqB,SAAS;AACnD,eAAO;AAAA,MACT;AAAA,IACF;AAGA,QAAI,cAAc,WAAW;AAC3B,aAAO;AAAA,IACT;AAEA,QAAI,CAAC,WAAW;AACd,aAAO,CAAC,CAAC;AAAA,IACX;AAEA,QAAI,CAAC,WAAW;AACd,aAAO;AAAA,IACT;AAGA,WAAO,gBAAgB,WAAW,SAAS;AAAA,EAC7C;AAGA,2BAAyB,WAAW,WAAoB;AACtD,UAAM,WAAW,OAAO,KAAK,SAAS;AACtC,UAAM,WAAW,OAAO,KAAK,SAAS;AAGtC,QAAI,SAAS,WAAW,SAAS,QAAQ;AACvC,aAAO;AAAA,IACT;AAEA,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACxC,YAAM,MAAM,SAAS;AACrB,UAAI,UAAU,SAAS,UAAU,MAAM;AACrC,eAAO;AAAA,MACT;AAAA,IACF;AACA,WAAO;AAAA,EACT;;;AC/EA,MAAM,QAAQ,CAAC;AACf,MAAI,aAAa;AACjB,MAAM,kBAAkB,QAAQ,QAAQ;AAGjC,oBAAkB,KAAK;AAC5B,QAAI,CAAC,MAAM,UAAU,CAAC,MAAM,SAAS,GAAG,GAAG;AACzC,YAAM,KAAK,GAAG;AAEd,iBAAW;AAAA,IACb;AAAA,EACF;AAEA,wBAAsB;AACpB,QAAI,CAAC,YAAY;AACf,mBAAa;AACb,sBAAgB,KAAK,SAAS;AAAA,IAChC;AAAA,EACF;AAEA,uBAAqB;AACnB,QAAI;AACF,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,cAAM,MAAM,MAAM;AAClB,YAAI,OAAO,IAAI,WAAW,OAAO;AAC/B,cAAI;AAAA,QACN;AAAA,MACF;AAAA,IACF,UAAE;AACA,YAAM,SAAS;AACf,mBAAa;AAAA,IACf;AAAA,EACF;;;ACxBO,sBAAqB,MAAM,MAAM,SAAS,iBAAiB;AAEhE,QAAI,QAAQ;AACV,YAAM,QAAQ,OAAO,SAAU,QAAO,QAAQ,CAAC;AAC/C,YAAM,aAAa,IAAI,SAAS;AAE9B,YAAI,OAAO;AAAa;AAGxB,2BAAmB,MAAM;AAGzB,cAAM,MAAM,KAAK,GAAG,IAAI;AAExB,6BAAqB;AACrB,eAAO;AAAA,MACT;AAEA,YAAM,KAAK,UAAU;AAErB,aAAO;AAAA,IACT;AAAA,EACF;AAEO,MAAM,cAAc,CAAC,cAAc,CAAC,MAAM,SAAS,oBAAoB,WAAW,WAAW,MAAM,MAAM;AAEzG,MAAM,gBAAgB,YAAY,uBAA2B;AAC7D,MAAM,YAAY,YAAY,iBAAsB;AACpD,MAAM,iBAAiB,YAAY,wBAA4B;AAC/D,MAAM,YAAY,YAAY,iBAAsB;AACpD,MAAM,kBAAkB,YAAY,0BAA6B;AACjE,MAAM,cAAc,YAAY,oBAAwB;;;AChCxD,MAAM,cAAc,CAAC,UAAU,MAAM,KAAK;AAGjD,MAAM,gBAAgB;AAAA,IACpB,eAAe;AAAA,IACf,OAAO;AAAA,MAEL,SAAS,CAAC,QAAQ,QAAQ,KAAK;AAAA,MAC/B,SAAS,CAAC,QAAQ,QAAQ,KAAK;AAAA,MAC/B,KAAK,CAAC,QAAQ,QAAQ,KAAK;AAAA,IAC7B;AAAA,IAEA,MAAM,OAAO,EAAE,SAAS;AACtB,YAAM,WAAW,mBAAmB;AAGpC,YAAM,eAAe,SAAS;AAE9B,YAAM,QAAQ,oBAAI,IAAI;AACtB,YAAM,OAAO,oBAAI,IAAI;AACrB,UAAI,UAAU;AAEd,YAAM;AAAA,QACJ,UAAU;AAAA,UACR,GAAG;AAAA,UACH,GAAG;AAAA,UACH,IAAI;AAAA,UACJ,GAAG,EAAE;AAAA;AAAA,UAEL;AAEJ,YAAM,mBAAmB,cAAc,KAAK;AAO5C,mBAAa,WAAW,CAAC,OAAO,WAAW,QAAQ,cAAc;AAC/D,cAAM,YAAW,MAAM;AACvB,aAAK,OAAO,WAAW,MAAM;AAE7B,cACE,UAAS,OACT,OACA,WACA,QACA,WACA,SACF;AAAA,MACF;AACA,mBAAa,aAAa,CAAC,UAAU;AAEnC,aAAK,OAAO,gBAAgB;AAAA,MAC9B;AAGA,uBAAiB,OAAO;AAEtB,uBAAe,KAAK;AAEpB,iBAAS,OAAO,UAAU,IAAI;AAAA,MAChC;AAEA,+BAAyB,KAAK;AAC5B,cAAM,SAAS,MAAM,IAAI,GAAG;AAC5B,YAAI,CAAC,WAAW,OAAO,SAAS,QAAQ,MAAM;AAC5C,kBAAQ,MAAM;AAAA,QAChB,WAAW,SAAS;AAClB,yBAAe,MAAM;AAAA,QACvB;AAGA,aAAK,OAAO,GAAG;AACf,cAAM,OAAO,GAAG;AAAA,MAClB;AAGA,UAAI,kBAAkB;AAEtB,YAAM,eAAe,MAAM;AACzB,YAAI,mBAAmB,MAAM;AAE3B,gBAAM,IAAI,iBAAiB,SAAS,OAAO;AAAA,QAC7C;AAAA,MACF;AAIA,gBAAU,YAAY;AACtB,gBAAU,YAAY;AAEtB,oBAAc,MAAM;AAClB,cAAM,QAAQ,YAAU;AACtB,gBAAM,EAAE,YAAY;AACpB,gBAAM,QAAQ,QAAQ;AACtB,cAAI,OAAO,SAAS,MAAM,MAAM;AAC9B,2BAAe,MAAM;AACrB;AAAA,UACF;AACA,kBAAQ,MAAM;AAAA,QAChB,CAAC;AAAA,MACH,CAAC;AAID,aAAO,MAAM;AACX,0BAAkB;AAElB,cAAM,WAAW,MAAM,QAAQ;AAC/B,cAAM,QAAQ,SAAS;AAGvB,YAAI,CAAC,QAAQ,KAAK,KAAK,CAAE,OAAM,YAAY,6BAAgC;AACzE,oBAAU;AACV,iBAAO;AAAA,QACT;AAGA,cAAM,OAAO,MAAM;AACnB,cAAM,OAAO,KAAK;AAClB,gBAAQ,IAAI,6DAAsD,IAAI;AAEtE,cAAM,EAAE,SAAS,SAAS,QAAQ;AAGlC,YACE,WAAY,EAAC,QAAQ,CAAC,QAAQ,SAAS,IAAI,MAC3C,WAAW,QAAQ,QAAQ,SAAS,IAAI,GACxC;AACA,oBAAU;AACV,iBAAO;AAAA,QACT;AAGA,cAAM,MAAM,MAAM,OAAO,OAAO,OAAO,MAAM;AAC7C,cAAM,aAAa,MAAM,IAAI,GAAG;AAGhC,0BAAkB;AAGlB,YAAI,YAAY;AAEd,gBAAM,KAAK,WAAW;AACtB,gBAAM,YAAY,WAAW;AAE7B,gBAAM,aAAa;AAGnB,eAAK,OAAO,GAAG;AACf,eAAK,IAAI,GAAG;AAAA,QACd,OAAO;AAEL,eAAK,IAAI,GAAG;AAEZ,cAAI,OAAO,KAAK,OAAO,KAAK;AAE1B,4BAAgB,KAAK,OAAO,EAAE,KAAK,EAAE,KAAK;AAAA,UAC5C;AAAA,QAEF;AAGA,cAAM,aAAa;AAEnB,kBAAU;AAEV,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAEO,MAAM,YAAY;AAKzB,mBAAiB,SAAS,MAAM;AAC9B,QAAI,QAAQ,OAAO,GAAG;AACpB,aAAO,QAAQ,KAAK,OAAK,QAAQ,GAAG,IAAI,CAAC;AAAA,IAC3C,WAAW,SAAS,OAAO,GAAG;AAC5B,aAAO,QAAQ,MAAM,GAAG,EAAE,SAAS,IAAI;AAAA,IACzC,WAAW,QAAQ,MAAM;AACvB,aAAO,QAAQ,KAAK,IAAI;AAAA,IAC1B;AAAA,EACF;AAGA,0BAAwB,OAAO;AAC7B,QAAI,YAAY,MAAM;AACtB,QAAI,YAAY,uCAAwC;AACtD,mBAAa;AAAA,IACf,WAAW,YAAY,gCAAiC;AACtD,mBAAa;AAAA,IACf;AACA,UAAM,YAAY;AAAA,EACpB;;;ACzMO,8BAA4B;AACjC,WAAO;AAAA,MACL,KAAK;AAAA,MACL,QAAQ,CAAC;AAAA,MACT,YAAY,CAAC;AAAA,MACb,YAAY,CAAC;AAAA,IACf;AAAA,EACF;AAEO,wBAAsB,SAAQ;AACnC,WAAO,oBAAmB,eAAe,YAAY,MAAM;AAEzD,UAAI,CAAC,WAAW,aAAa,GAAG;AAC9B,wBAAgB,mBAAI;AAAA,MACtB;AAGA,UAAI,aAAa,QAAQ,CAAC,SAAS,SAAS,GAAG;AAC7C,oBAAY;AAAA,MACd;AAGA,YAAM,UAAU,iBAAiB;AAEjC,YAAM,mBAAmB,oBAAI,IAAI;AAEjC,UAAI,YAAY;AAEhB,YAAM,MAAO,QAAQ,MAAM;AAAA,QACzB,YAAY;AAAA,QACZ,YAAY;AAAA,QAEZ,IAAI,WAAW,SAAS;AACtB,cAAI,iBAAiB,IAAI,MAAM,GAAG;AAChC,oBAAQ,KAAK,YAAY;AAAA,UAC3B,WAAW,UAAU,WAAW,OAAO,OAAO,GAAG;AAE/C,6BAAiB,IAAI,MAAM;AAC3B,mBAAO,QAAQ,KAAK,GAAG,OAAO;AAAA,UAChC,WAAW,WAAW,MAAM,GAAG;AAE7B,6BAAiB,IAAI,MAAM;AAC3B,mBAAO,KAAK,GAAG,OAAO;AAAA,UACxB;AAGA,iBAAO;AAAA,QACT;AAAA,QAEA,MAAM,OAAO;AACX,cAAI,CAAC,QAAQ,OAAO,SAAS,KAAK,GAAG;AACnC,oBAAQ,OAAO,KAAK,KAAK;AAAA,UAC3B;AAEA,iBAAO;AAAA,QACT;AAAA,QAEA,UAAU,MAAM,WAAY;AAE1B,cAAI,CAAC,WAAW;AACd,mBAAO,QAAQ,WAAW;AAAA,UAC5B;AAEA,kBAAQ,WAAW,QAAQ;AAE3B,iBAAO;AAAA,QACT;AAAA,QAEA,UAAU,MAAM,WAAW;AACzB,cAAI,CAAC,WAAW;AACd,mBAAO,QAAQ,WAAW;AAAA,UAC5B;AAEA,kBAAQ,WAAW,QAAQ;AAE3B,iBAAO;AAAA,QACT;AAAA,QAGA,MAAM,eAAe;AAEnB,cAAI,CAAC,WAAW;AACd,kBAAM,QAAQ,YAAY,eAAe,SAAS;AAGlD,kBAAM,aAAa;AAGnB,oBAAO,OAAO,aAAa;AAC3B,gBAAI,aAAa;AAEjB,wBAAY;AAAA,UACd;AAAA,QACF;AAAA,QAEA,UAAU;AAER,cAAI,WAAW;AACb,oBAAO,MAAM,IAAI,UAAU;AAAA,UAC7B;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,IACT;AAAA,EACF;;;AC7FO,MAAM,iBAAiB,CAAC,YAAY;AACzC,UAAM;AAAA,MACJ,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,WAAW;AAAA,MACX,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,SAAS;AAAA,MACT,gBAAgB;AAAA,MAChB,YAAY;AAAA,MACZ,aAAa;AAAA,MACb,eAAe;AAAA,QACb;AAKJ,UAAM,QAAQ,CACZ,IACA,IACA,WACA,SAAS,MACT,kBAAkB,MAClB,YAAY,CAAC,CAAC,GAAG,oBACd;AAEH,UAAI,OAAO,IAAI;AACb;AAAA,MACF;AAGA,UAAI,MAAM,CAAC,gBAAgB,IAAI,EAAE,GAAG;AAElC,iBAAS,gBAAgB,EAAE;AAE3B,gBAAQ,IAAI,iBAAiB,IAAI;AACjC,aAAK;AAAA,MACP;AAGA,UAAI,GAAG,cAAc,eAAiB;AACpC,oBAAY;AACZ,WAAG,kBAAkB;AAAA,MACvB;AAEA,YAAM,EAAE,MAAM,cAAc;AAC5B,cAAQ;AAAA,aACD;AACH,sBAAY,IAAI,IAAI,WAAW,MAAM;AACrC;AAAA,aACG;AACH,6BAAmB,IAAI,IAAI,WAAW,MAAM;AAC5C;AAAA,aACG;AACH,0BAAgB,IAAI,IAAI,WAAW,QAAQ,iBAAiB,SAAS;AACrE;AAAA;AAGA,cAAI,YAAY,iBAAoB;AAClC,2BAAe,IAAI,IAAI,WAAW,QAAQ,iBAAiB,SAAS;AAAA,UACtE,WAAW,YAAY,mBAAsB;AAE3C,6BACE,IACA,IACA,WACA,QACA,iBACA,SACF;AAAA,UACF,WAAW,YAAY,mBAAqB;AAE1C,iBAAK,QACH,IAAI,IAAI,WAAW,QAAQ,iBAAiB,WAAW,SACzD;AAAA,UACF;AAAA;AAAA,IAEN;AAGA,UAAM,qBAAqB,CAAC,IAAI,IAAI,WAAW,WAAW;AACxD,UAAI,MAAM,MAAM;AACd,mBACG,GAAG,KAAK,kBAAkB,GAAG,YAAY,EAAE,GAC5C,WACA,MACF;AAAA,MACF,OAAO;AAEL,WAAG,KAAK,GAAG;AAAA,MACb;AAAA,IACF;AAMA,UAAM,mBAAmB,CACvB,IACA,IACA,WACA,QACA,iBACA,cACG;AACH,UAAI,MAAM,MAAM;AAEd,YAAI,GAAG,YAAY,gCAAiC;AAClD,0BAAgB,IAAI,SAAS,IAAI,WAAW,QAAQ,SAAS;AAAA,QAC/D,OAAO;AAEL,yBAAe,IAAI,WAAW,QAAQ,iBAAiB,SAAS;AAAA,QAClE;AAAA,MACF,OAAO;AAGL,wBAAgB,IAAI,IAAI,SAAS;AAAA,MACnC;AAAA,IACF;AASA,UAAM,iBAAiB,CAAC,cAAc,WAAW,QAAQ,iBAAiB,cAAc;AAEtF,YAAM,WAAY,aAAa,YAC7B,wBAAwB,cAAc,eAAe;AAGvD,UAAI,YAAY,YAAY,GAAG;AAC7B,QAAC,SAAS,IAAY,WAAW;AAAA,MACnC;AAIA,qBAAe,QAAQ;AAGvB,wBAAkB,UAAU,cAAc,WAAW,QAAQ,SAAS;AAAA,IACxE;AAWA,UAAM,oBAAoB,CACxB,UACA,cACA,WACA,QACA,cACG;AAEH,YAAM,oBAAoB,MAAM;AAE9B,YAAI,CAAC,SAAS,WAAW;AACvB,gBAAM,EAAE,IAAI,MAAM;AAGlB,cAAI,IAAI;AACN,2BAAe,EAAE;AAAA,UACnB;AAEA,gBAAM,UAAW,SAAS,UAAU,oBAAoB,QAAQ;AAEhE,gBAAM,MAAM,SAAS,WAAW,QAAQ,QAAQ;AAGhD,uBAAa,KAAK,QAAQ;AAE1B,cAAI,GAAG;AACL,2BAAe,CAAC;AAAA,UAClB;AACA,mBAAS,YAAY;AAAA,QACvB,OAAO;AAEL,cAAI,EAAE,MAAM,OAAO,OAAO,IAAI,MAAM;AAGpC,cAAI,MAAM;AACR,iBAAK,KAAK,MAAM;AAGhB,qCAAyB,UAAU,MAAM,SAAS;AAAA,UACpD,OAAO;AACL,mBAAO;AAAA,UACT;AAGA,cAAI,IAAI;AACN,2BAAe,EAAE;AAAA,UACnB;AAEA,gBAAM,WAAW,oBAAoB,QAAQ;AAC7C,gBAAM,WAAW,SAAS;AAC1B,mBAAS,UAAU;AAEnB,gBAAM,UAAU,UAAU,WAAW,QAAQ,QAAQ;AACrD,eAAK,KAAK,SAAS;AAGnB,cAAI,GAAG;AACL,2BAAe,CAAC;AAAA,UAClB;AAAA,QACF;AAAA,MACF;AAIA,YAAM,UAAU,SAAS,SAAS,IAAI,eACpC,mBACA,MAAM,SAAS,MAAM,CACvB;AAEA,YAAM,SAAU,SAAS,SAAS,QAAO,IAAI,KAAK,OAAM;AAExD,aAAO;AAAA,IACT;AAEA,UAAM,2BAA2B,CAAC,UAAU,WAAW,cAAc;AACnE,YAAM,YAAY,SAAS,MAAM;AAEjC,eAAS,QAAQ;AAEjB,eAAS,OAAO;AAEhB,kBAAY,UAAU,UAAU,OAAO,WAAW,SAAS;AAE3D,kBAAY,UAAU,UAAU,UAAU,SAAS;AAAA,IACrD;AAGA,UAAM,kBAAkB,CAAC,IAAI,IAAI,cAAc;AAC7C,YAAM,WAAY,GAAG,YAAY,GAAG;AAEpC,UAAI,sBAAsB,IAAI,EAAE,GAAG;AAGjC,iBAAS,OAAO;AAChB,iBAAS,OAAO;AAAA,MAClB,OAAO;AAEL,WAAG,KAAK,GAAG;AACX,iBAAS,QAAQ;AAAA,MACnB;AAAA,IACF;AAQA,UAAM,mBAAmB,CAAC,UAAU,aAAc;AAChD,YAAM,EAAE,KAAK,IAAI,QAAQ,YAAY;AAGrC,UAAI,KAAK;AACP,uBAAe,GAAG;AAAA,MACpB;AAEA,UAAI,QAAQ;AAEV,eAAO,SAAS;AAGhB,gBAAQ,SAAS,UAAU,QAAQ;AAAA,MACrC;AAGA,UAAI,IAAI;AACN,uBAAe,EAAE;AAAA,MACnB;AAEA,eAAS,cAAc;AAAA,IACzB;AAOA,UAAM,kBAAkB,CACtB,IACA,IACA,WACA,QACA,iBACA,cACG;AAGH,YAAM,sBAAuB,GAAG,KAAK,KAAK,GAAG,KAAK,eAAe,EAAE;AAEnE,YAAM,oBAAqB,GAAG,SAAS,KAAK,GAAG,SAAS,eAAe,EAAE;AAEzE,UAAI,EAAE,WAAW,oBAAoB;AAErC,UAAI,MAAM,MAAM;AAEd,mBAAW,qBAAqB,WAAW,MAAM;AACjD,mBAAW,mBAAmB,WAAW,MAAM;AAE/C,sBACE,GAAG,UACH,WACA,mBACA,iBACA,SACF;AAAA,MACF,OAAO;AAGL,YACE,YAAY,KACZ,YAAY,4BACZ,mBACA,GAAG,iBACH;AACA,6BACE,GAAG,iBACH,iBACA,WACA,eACF;AAAA,QACF,OAAO;AAEL,wBACE,IACA,IACA,WACA,mBACA,iBACA,SACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAKA,UAAM,cAAc,CAAC,IAAkB,IAAW,WAAW,WAAW;AAEtE,UAAI,OAAO,MAAM;AACf,mBAAY,GAAG,KAAK,eAAe,GAAG,QAAQ,GAAI,WAAW,MAAM;AAAA,MACrE,OAAO;AAEL,cAAM,KAAM,GAAG,KAAK,GAAG;AACvB,YAAI,GAAG,aAAa,GAAG,UAAU;AAC/B,sBAAY,IAAI,GAAG,QAAQ;AAAA,QAC7B;AAAA,MACF;AAAA,IACF;AAKA,UAAM,iBAAiB,CACrB,IACA,IACA,WACA,QACA,iBACA,cACG;AAEH,UAAI,OAAO,MAAM;AACf,qBAAa,IAAI,WAAW,QAAQ,iBAAiB,SAAS;AAAA,MAChE,OAAO;AAEL,qBAAa,IAAI,IAAI,iBAAiB,SAAS;AAAA,MACjD;AAAA,IACF;AAOA,UAAM,eAAe,CAAC,IAAI,IAAI,iBAAiB,cAAc;AAC3D,YAAM,KAAM,GAAG,KAAK,GAAG;AACvB,UAAI,EAAE,WAAW,oBAAoB;AAErC,YAAM,WAAW,GAAG,SAAS,CAAC;AAC9B,YAAM,WAAW,GAAG,SAAS,CAAC;AAG9B,UAAI,iBAAiB;AAEnB,2BAAmB,GAAG,iBAAiB,iBAAiB,IAAI,eAAe;AAAA,MAC7E,WAAW,CAAC,WAAW;AAIrB,sBAAc,IAAI,IAAI,IAAI,MAAM,iBAAiB,SAAS;AAAA,MAC5D;AAGA,UAAI,YAAY,GAAG;AAGjB,YAAI,YAAY,qBAAuB;AACrC,qBAAW,IAAI,IAAI,UAAU,QAAQ;AAAA,QACvC,OAAO;AAEL,cAAI,YAAY,eAAkB;AAChC,gBAAI,SAAS,UAAU,SAAS,OAAO;AACrC,4BAAc,IAAI,SAAS,MAAM,SAAS,KAAK;AAAA,YACjD;AAAA,UACF;AAGA,cAAI,YAAY,eAAkB;AAChC,0BAAc,IAAI,SAAS,SAAS,OAAO,SAAS,KAAK;AAAA,UAC3D;AAGA,cAAI,YAAY,eAAkB;AAEhC,kBAAM,gBAAgB,GAAG;AAGzB,qBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK;AAC7C,oBAAM,MAAM,cAAc;AAC1B,oBAAM,OAAO,SAAS;AACtB,oBAAM,OAAO,SAAS;AAEtB,kBAAI,SAAS,MAAM;AACjB,8BAAc,IAAI,KAAK,MAAM,IAAI;AAAA,cACnC;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAGA,YAAI,YAAY,cAAiB;AAC/B,cAAI,GAAG,aAAa,GAAG,UAAU;AAC/B,+BAAmB,IAAI,GAAG,QAAkB;AAAA,UAC9C;AAAA,QACF;AAAA,MACF,WAAW,CAAC,aAAa,oBAAoB,MAAM;AAIjD,mBAAW,IAAI,IAAI,UAAU,QAAQ;AAAA,MACvC;AAAA,IACF;AAOA,UAAM,qBAAqB,CACzB,aACA,aACA,IACA,oBACG;AACH,eAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAC3C,cAAM,WAAW,YAAY;AAC7B,cAAM,WAAW,YAAY;AAE7B,cAAM,YACJ,SAAS,MAER,UAAS,SAAS,YAEjB,CAAC,gBAAgB,UAAU,QAAQ,KAEnC,SAAS,YAAY,qBACnB,eAAe,SAAS,EAAE,IAC1B;AAEN,cAAM,UAAU,UAAU,WAAW,MAAM,iBAAiB,IAAI;AAAA,MAClE;AAAA,IACF;AAKA,UAAM,aAAa,CAAC,IAAI,OAAO,UAAU,aAAa;AACpD,UAAI,aAAa,UAAU;AACzB,mBAAW,OAAO,UAAU;AAC1B,gBAAM,OAAO,SAAS;AACtB,gBAAM,OAAO,SAAS;AAEtB,cAAI,SAAS,MAAM;AACjB,0BAAc,IAAI,KAAK,MAAM,IAAI;AAAA,UACnC;AAAA,QACF;AAEA,mBAAW,OAAO,UAAU;AAC1B,cAAI,CAAE,QAAO,WAAW;AACtB,0BAAc,IAAI,KAAK,SAAS,MAAM,IAAI;AAAA,UAC5C;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAKA,UAAM,eAAe,CAAC,OAAc,WAAW,QAAQ,iBAAiB,cAAc;AACpF,UAAI;AACJ,YAAM,EAAE,MAAM,OAAO,cAAc;AAKnC,WAAK,MAAM,KAAK,kBAAkB,IAAI;AAGtC,UAAI,YAAY,uBAA0B;AAExC,2BAAmB,IAAI,MAAM,QAAkB;AAAA,MACjD,WAAW,YAAY,yBAA2B;AAEhD,sBAAc,MAAM,UAAU,IAAI,QAAQ,iBAAiB,SAAS;AAAA,MACtE;AAGA,UAAI,OAAO;AACT,mBAAW,OAAO,OAAO;AACvB,wBAAc,IAAI,KAAK,MAAM,MAAM,IAAI;AAAA,QACzC;AAAA,MACF;AAGA,iBAAW,IAAI,WAAW,MAAM;AAAA,IAClC;AAKA,UAAM,gBAAgB,CACpB,UACA,WACA,QACA,iBACA,WACA,QAAQ,MACL;AACH,eAAS,IAAI,OAAO,IAAI,SAAS,QAAQ,KAAK;AAI5C,YAAI,QAAS,SAAS,KAAK,eAAe,SAAS,EAAE;AAGrD,cAAM,MAAM,OAAO,WAAW,QAAQ,iBAAiB,SAAS;AAAA,MAClE;AAAA,IACF;AAMA,UAAM,gBAAgB,CACpB,IACA,IACA,WACA,QACA,iBACA,cACG;AACH,YAAM,KAAK,MAAM,GAAG;AACpB,YAAM,eAAe,KAAK,GAAG,YAAY;AAEzC,YAAM,EAAE,WAAW,WAAW,UAAU,OAAO;AAG/C,UAAI,YAAY,GAAG;AACjB,YAAI,YAAY,0BAA2B;AAEzC,6BACE,IACA,IACA,WACA,QACA,iBACA,SACF;AAAA,QACF,WAAW,YAAY,4BAA6B;AAElD,+BACE,IACA,IACA,WACA,QACA,iBACA,SACF;AAAA,QACF;AAAA,MACF;AAGA,UAAI,YAAY,uBAA0B;AAExC,YAAI,eAAe,yBAA2B;AAC5C,0BAAgB,IAAI,eAAe;AAAA,QACrC;AACA,YAAI,OAAO,IAAI;AACb,6BAAmB,WAAW,EAAY;AAAA,QAC5C;AAAA,MACF,OAAO;AAGL,YAAI,eAAe,yBAA2B;AAE5C,cAAI,YAAY,yBAA2B;AACzC,+BACE,IACA,IACA,WACA,QACA,iBACA,SACF;AAAA,UACF,OAAO;AAEL,4BAAgB,IAAI,iBAAiB,IAAI;AAAA,UAC3C;AAAA,QACF,OAAO;AAGL,cAAI,eAAe,uBAA0B;AAC3C,+BAAmB,WAAW,EAAE;AAAA,UAClC;AACA,cAAI,YAAY,yBAA2B;AACzC,0BAAc,IAAI,WAAW,QAAQ,iBAAiB,SAAS;AAAA,UACjE;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAGA,UAAM,uBAAuB,CAC3B,IACA,IACA,WACA,QACA,iBACA,cACG;AACH,YAAM,YAAY,GAAG;AACrB,YAAM,YAAY,GAAG;AACrB,YAAM,eAAe,KAAK,IAAI,WAAW,SAAS;AAGlD,eAAS,IAAI,GAAG,IAAI,cAAc,KAAK;AACrC,cAAM,YAAa,GAAG,KAAK,eAAe,GAAG,EAAE;AAC/C,cAAM,GAAG,IAAI,WAAW,WAAW,MAAM,iBAAiB,SAAS;AAAA,MACrE;AAEA,UAAI,YAAY,WAAW;AAEzB,wBAAgB,IAAI,iBAAiB,MAAM,YAAY;AAAA,MACzD,OAAO;AAEL,sBACE,IACA,WACA,QACA,iBACA,WACA,YACF;AAAA,MACF;AAAA,IACF;AAGA,UAAM,qBAAqB,CACzB,IACA,IACA,WACA,cACA,iBACA,cACG;AACH,UAAI,IAAI;AACR,UAAI,KAAK,GAAG;AACZ,UAAI,KAAK,GAAG,SAAS;AACrB,UAAI,KAAK,KAAK;AAKd,aAAO,KAAK,MAAM,KAAK,IAAI;AACzB,cAAM,KAAK,GAAG;AAEd,cAAM,KAAM,GAAG,KAAK,eAAe,GAAG,EAAE;AACxC,YAAI,gBAAgB,IAAI,EAAE,GAAG;AAC3B,gBAAM,IAAI,IAAI,WAAW,MAAM,iBAAiB,SAAS;AAAA,QAC3D,OAAO;AACL;AAAA,QACF;AACA;AAAA,MACF;AAKA,aAAO,KAAK,MAAM,KAAK,IAAI;AACzB,cAAM,KAAK,GAAG;AAEd,cAAM,KAAM,GAAG,MAAM,eAAe,GAAG,GAAG;AAC1C,YAAI,gBAAgB,IAAI,EAAE,GAAG;AAC3B,gBAAM,IAAI,IAAI,WAAW,MAAM,iBAAiB,SAAS;AAAA,QAC3D,OAAO;AACL;AAAA,QACF;AACA;AACA;AAAA,MACF;AAUA,UAAI,IAAI,IAAI;AACV,YAAI,KAAK,IAAI;AAeX,gBAAM,UAAU,KAAK;AACrB,gBAAM,SAAS,UAAU,KAAK,GAAG,SAAS,KAAK;AAC/C,iBAAO,KAAK,IAAI;AACd,kBACE,MACC,GAAG,KAAK,eAAe,GAAG,EAAE,GAC7B,WACA,QACA,iBACA,SACF;AACA;AAAA,UACF;AAAA,QACF;AAAA,MACF,WASS,IAAI,IAAI;AACf,eAAO,KAAK,IAAI;AACd,kBAAQ,GAAG,IAAI,iBAAiB,IAAI;AACpC;AAAA,QACF;AAAA,MACF,OAYK;AACH,YAAI,KAAK;AACT,YAAI,KAAK;AAGT,cAAM,mBAAmB,oBAAI,IAAI;AAIjC,aAAK,IAAI,IAAI,KAAK,IAAI,KAAK;AACzB,gBAAM,YAAa,GAAG,KAAK,eAAe,GAAG,EAAE;AAE/C,cAAI,UAAU,QAAQ,MAAM;AAC1B,6BAAiB,IAAI,UAAU,KAAK,CAAC;AAAA,UACvC,OAAO;AAAA,UAEP;AAAA,QACF;AAGA,cAAM,cAAc,KAAK,KAAK;AAE9B,cAAM,wBAAwB,IAAI,MAAM,WAAW,EAAE,KAAK,CAAC;AAC3D,aAAK,IAAI,IAAI,KAAK,IAAI,KAAK;AACzB,gBAAM,WAAW,GAAG;AACpB,cAAI,WAAW,iBAAiB,IAAI,SAAS,GAAG;AAEhD,cAAI,aAAa,QAAW;AAE1B,kCAAsB,WAAW,MAAM,IAAI;AAE3C,kBACE,UACA,GAAG,WACH,WACA,MACA,iBACA,SACF;AAAA,UACF,OAAO;AAEL,oBAAQ,UAAU,iBAAiB,IAAI;AAAA,UACzC;AAAA,QACF;AAIA,cAAM,6BAA6B,YAAY,qBAAqB;AACpE,YAAI,IAAI,2BAA2B,SAAS;AAC5C,aAAK,IAAI,cAAc,GAAG,KAAK,GAAG,KAAK;AACrC,gBAAM,QAAQ,IAAI;AAClB,cAAI,UAAU,GAAG;AACjB,cAAI,SAAS,QAAQ,IAAI,KAAK,GAAG,QAAQ,GAAG,KAAK;AACjD,cAAI,sBAAsB,OAAO,GAAG;AAElC,kBAAM,MAAM,SAAS,WAAW,QAAQ,iBAAiB,SAAS;AAAA,UACpE,OAAO;AAEL,gBAAI,IAAI,KAAK,MAAM,2BAA2B,IAAI;AAEhD,mBAAK,SAAS,WAAW,MAAM;AAAA,YACjC,OAAO;AACL,sBAAQ,IAAI,KAAK,CAAC;AAClB;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAGA,UAAM,UAAU,CAAC,OAAO,iBAAiB,WAAW,UAAU;AAC5D,YAAM,EAAE,MAAM,UAAU,cAAc;AAEtC,UAAI,YAAY,uCAAwC;AAEtD,wBAAgB,IAAI,WAAW,KAAK;AACpC;AAAA,MACF;AAGA,UAAI,YAAY,mBAAsB;AAEpC,yBAAiB,MAAM,WAAW,QAAQ;AAAA,MAC5C,OAAO;AAEL,YAAI,SAAS,YAAY,YAAY,yBAA2B;AAC9D,0BAAgB,UAAU,eAAe;AAAA,QAC3C;AAEA,YAAI,UAAU;AACZ,iBAAO,KAAK;AAAA,QACd;AAAA,MACF;AAAA,IACF;AAEA,UAAM,SAAS,CAAC,UAAU;AACxB,YAAM,EAAE,MAAM,IAAI,WAAW;AAE7B,UAAI,SAAS,UAAU;AACrB,uBAAe,IAAI,MAAM;AACzB;AAAA,MACF;AAEA,iBAAW,EAAE;AAAA,IACf;AAGA,UAAM,iBAAiB,CAAC,KAAK,QAAQ;AACnC,UAAI;AACJ,aAAO,QAAQ,KAAK;AAClB,eAAO,gBAAgB,GAAG;AAC1B,mBAAW,GAAG;AACd,cAAM;AAAA,MACR;AACA,iBAAW,GAAG;AAAA,IAChB;AAEA,UAAM,kBAAkB,CAAC,UAAU,iBAAiB,WAAW,OAAO,QAAQ,MAAM;AAClF,eAAS,IAAI,OAAO,IAAI,SAAS,QAAQ,KAAK;AAC5C,gBAAQ,SAAS,IAAI,iBAAiB,QAAQ;AAAA,MAChD;AAAA,IACF;AAEA,UAAM,OAAO,CAAC,OAAO,WAAW,WAAW;AACzC,YAAM,EAAE,OAAO;AACf,iBAAW,IAAI,WAAW,MAAM;AAAA,IAClC;AAEA,UAAM,kBAAkB,CAAC,UAAiB;AACxC,aAAO,gBAAgB,MAAM,UAAU,MAAM,EAAE;AAAA,IACjD;AAOA,UAAM,UAAS,CAAC,OAAc,cAAc;AAC1C,UAAI,SAAS,MAAM;AAEjB,YAAI,UAAU,QAAQ;AACpB,kBAAQ,UAAU,QAAQ,MAAM,IAAI;AAAA,QACtC;AAAA,MACF,OAAO;AAEL,cAAM,UAAU,UAAU,MAAM,OAAO,WAAW,MAAM,IAAI;AAAA,MAC9D;AAEA,gBAAU,SAAS;AAAA,IACrB;AAGA,UAAM,YAAY;AAAA,MAChB,GAAG;AAAA,MACH,IAAI;AAAA,MACJ,GAAG;AAAA,MACH,GAAG;AAAA,MACH,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,IAAI;AAAA,MACJ,KAAK;AAAA,MACL,GAAG;AAAA,MACH,GAAG;AAAA,IACL;AAEA,WAAO;AAAA,MACL;AAAA,MACA,WAAW,aAAa,OAAM;AAAA,IAChC;AAAA,EACF;AAuEA,uBAAqB,KAAyB;AAE5C,UAAM,IAAI,IAAI,MAAM;AAEpB,UAAM,SAAS,CAAC,CAAC;AACjB,UAAM,MAAM,IAAI;AAChB,QAAI,GAAG,GAAG,OAAO,KAAK;AACtB,SAAK,IAAI,GAAG,IAAI,KAAK,KAAK;AACxB,YAAM,OAAO,IAAI;AACjB,UAAI,SAAS,GAAG;AACd,YAAI,OAAO,OAAO,SAAS;AAE3B,YAAI,IAAI,KAAK,MAAM;AACjB,YAAE,KAAK;AACP,iBAAO,KAAK,CAAC;AACb;AAAA,QACF;AAGA,gBAAQ;AACR,cAAM,OAAO,SAAS;AAGtB,eAAO,QAAQ,KAAK;AAElB,mBAAU,QAAQ,OAAQ;AAK1B,cAAI,IAAI,OAAO,WAAW,MAAM;AAC9B,oBAAQ,SAAS;AAAA,UACnB,OAAO;AACL,kBAAM;AAAA,UACR;AAAA,QACF;AAGA,YAAI,OAAO,IAAI,OAAO,SAAS;AAE7B,cAAI,QAAQ,GAAG;AAEb,cAAE,KAAK,OAAO,QAAQ;AAAA,UAExB;AACA,iBAAO,SAAS;AAAA,QAClB;AAAA,MACF;AAAA,IACF;AAEA,QAAI,IAAI,OAAO;AACf,UAAM,OAAO,IAAI;AAEjB,WAAO,MAAM,GAAG;AACd,aAAO,KAAK;AACZ,YAAM,EAAE;AAAA,IACV;AAEA,WAAO;AAAA,EACT;;;ACrkCO,aAAW,MAAM,iBAAkB,UAAW;AAEnD,UAAM,IAAI,UAAU;AAEpB,QAAI,MAAM,GAAG;AAEX,UAAI,SAAS,eAAe,KAAK,CAAC,QAAQ,eAAe,GAAG;AAC1D,YAAI,QAAQ,eAAe,GAAG;AAE5B,iBAAO,YAAY,MAAM,MAAM,CAAC,eAAe,CAAC;AAAA,QAClD;AAEA,eAAO,YAAY,MAAM,eAAe;AAAA,MAC1C,OAAO;AAGL,eAAO,YAAY,MAAM,MAAM,eAAe;AAAA,MAChD;AAAA,IACF,OAAO;AAEL,UAAI,IAAI,GAAG;AACT,mBAAW,MAAM,KAAK,SAAS,EAAE,MAAM,CAAC;AAAA,MAC1C,WAAW,MAAM,KAAK,QAAQ,QAAQ,GAAG;AACvC,mBAAW,CAAC,QAAQ;AAAA,MACtB;AAEA,aAAO,YAAY,MAAM,iBAAiB,QAAQ;AAAA,IACpD;AAAA,EACF;;;ACjCO,mBAAiB,KAAK,OAAO;AAElC,QAAI,iBAAiB;AACnB,UAAI,WAAW,gBAAgB;AAE/B,YAAM,iBACJ,gBAAgB,UAAU,gBAAgB,OAAO;AAGnD,UAAI,aAAa,gBAAgB;AAC/B,mBAAW,gBAAgB,WAAW,OAAO,OAAO,cAAc;AAAA,MACpE;AAGA,eAAS,OAAO;AAAA,IAClB;AAAA,EACF;AAEO,kBAAgB,KAAK;AAE1B,UAAM,WAAW,gBAAgB,UAAU,gBAAgB,OAAO;AAClE,QAAI,YAAa,OAAO,UAAW;AACjC,aAAO,SAAS;AAAA,IAClB;AAAA,EACF;;;AC5BO,2BAAyB,SAAS;AACvC,WAAO,WAAW,OAAO,IAAI,EAAC,OAAO,SAAS,MAAM,QAAQ,KAAI,IAAI;AAAA,EACtE;;;ACGO,gCAA8B,QAAQ;AAC3C,QAAI,WAAW,MAAM,GAAG;AACtB,eAAS,EAAE,QAAQ,OAAO;AAAA,IAC5B;AAEA,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,MACR;AAAA,MACA;AAAA,MACA,SAAS;AAAA,QACP;AAGJ,QAAI,iBAAiB;AAErB,QAAI;AAGJ,QAAI,UAAU;AACd,UAAM,QAAQ,MAAM;AAClB;AAEA,uBAAiB;AAEjB,aAAO,KAAK;AAAA,IACd;AAEA,UAAM,OAAO,MAAM;AACjB,UAAI;AACJ,aACE,kBACC,eAAc,iBACb,OAAO,EACJ,KAAK,CAAC,SAAS;AAEd,YAAI,kBAAkB,mBAAmB,aAAa;AACpD,iBAAO;AAAA,QACT;AAGA,sBAAc;AACd,eAAO;AAAA,MACT,CAAC,GACA,MAAM,SAAO;AAEZ,YAAI,aAAa;AACf,gBAAM,eAAe,QAAQ,MAAM,IAAI,MAAM,OAAO,GAAG,CAAC;AAExD,iBAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,kBAAM,YAAY,MAAM,QAAQ,MAAM,CAAC;AACvC,kBAAM,WAAW,MAAM,OAAO,GAAG;AACjC,wBAAY,KAAK,WAAW,UAAU,UAAU,CAAC;AAAA,UACnD,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAAA,IAET;AAEA,WAAO,gBAAgB;AAAA,MACrB,MAAM;AAAA,MACN,QAAQ;AAEN,cAAM,WAAW;AAGjB,YAAI,aAAa;AACf,iBAAO,MAAM,gBAAgB,aAAa,QAAQ;AAAA,QACpD;AAGA,cAAM,SAAS,IAAI,KAAK;AAExB,cAAM,QAAQ,IAAI;AAElB,cAAM,UAAU,IAAI,CAAC,CAAC,KAAK;AAG3B,YAAI,SAAS;AACX,qBAAW,MAAM;AAEf,oBAAQ,QAAQ;AAAA,UAClB,GAAG,KAAK;AAAA,QACV;AAGA,YAAI,WAAW,MAAM;AACnB,qBAAW,MAAM;AAEf,gBAAI,CAAC,OAAO,SAAS,CAAC,MAAM,OAAO;AACjC,+BAAiB;AAEjB,oBAAM,QAAQ,IAAI,MAChB,mCAAmC,YACrC;AAAA,YACF;AAAA,UACF,GAAG,OAAO;AAAA,QACZ;AAEA,aAAK,EACF,KAAK,MAAM;AACV,iBAAO,QAAQ;AAAA,QACjB,CAAC,EACA,MAAM,SAAO;AACZ,gBAAM,QAAQ;AAAA,QAChB,CAAC;AAEH,eAAO,MAAM;AACX,cAAI,OAAO,SAAS,aAAa;AAC/B,mBAAO,gBAAgB,aAAa,QAAQ;AAAA,UAC9C,WAAW,MAAM,SAAS,gBAAgB;AACxC,mBAAO,gBAAgB,gBAAgB,QAAQ;AAAA,UACjD,WAAW,CAAC,QAAQ,SAAS,kBAAkB;AAC7C,mBAAO,gBAAgB,kBAAkB,QAAQ;AAAA,UACnD;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AAGA,2BAAyB,MAAM,EAAE,OAAO,EAAE,OAAO,cAAc;AAE7D,UAAM,QAAQ,YAAY,MAAM,OAAO,QAAQ;AAC/C,WAAO;AAAA,EACT;;;AClIO,uBAAqB,SAAQ,SAAU;AAC5C,WAAO,QAAQ,SAAQ,MAAM,OAAO;AAAA,EACtC;AAEO,iBAAe,QAAQ,IAAI,SAAU;AAC1C,WAAO,QAAQ,QAAQ,IAAI,OAAO;AAAA,EACpC;AAEA,MAAM,YAA6C,CAAC;AAOpD,mBACE,QACA,IACA,EAAE,WAAW,SAAS,WACtB;AAEA,UAAM,WAAW;AAEjB,QAAI;AAEJ,QAAI,eAAe;AAEnB,QAAI,gBAAgB;AAGpB,QAAI,MAAM,MAAM,GAAG;AACjB,eAAS,MAAM,OAAO;AAEtB,qBAAe,UAAU,MAAM;AAAA,IACjC,WAAW,WAAW,MAAM,GAAG;AAC7B,eAAS,MAAM;AACf,aAAO;AAAA,IACT,WAAW,QAAQ,MAAM,GAAG;AAC1B,sBAAgB;AAEhB,qBAAe,OAAO,KAAK,OAAK,WAAW,CAAC,KAAK,UAAU,CAAC,CAAC;AAC7D,eAAS,MAAM;AACb,eAAO,IAAI,OAAK;AACd,cAAI,MAAM,CAAC,GAAG;AACZ,mBAAO,EAAE;AAAA,UACX,WAAW,WAAW,CAAC,GAAG;AAExB,mBAAO,SAAS,CAAC;AAAA,UACnB,WAAW,WAAW,CAAC,GAAG;AACxB,mBAAO,EAAE,QAAQ;AAAA,UACnB;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,WAAW,WAAW,MAAM,GAAG;AAE7B,UAAI,IAAI;AACN,iBAAS,MAAM,OAAO;AAAA,MACxB,OAAO;AAEL,iBAAS,MAAM;AAEb,cAAI,YAAY,SAAS,aAAa;AACpC;AAAA,UACF;AAEA,cAAI,SAAS;AACX,oBAAQ;AAAA,UACV;AAGA,iBAAO,OAAO,SAAS;AAAA,QACzB;AAAA,MACF;AAAA,IACF,OAAO;AACL,eAAS,MAAM;AAAA,MAAC;AAAA,IAClB;AAGA,QAAI,MAAM,MAAM;AACd,YAAM,aAAa;AAEnB,eAAS,MAAM,SAAS,WAAW,CAAC;AAAA,IACtC;AAEA,QAAI;AACJ,QAAI,YAAY,CAAC,OAAO;AAEtB,gBAAU,QAAO,SAAS,MAAM;AAC9B,WAAG;AAAA,MACL;AAAA,IACF;AAEA,QAAI,WAAW,gBAAgB,CAAC,IAAI,CAAC;AACrC,UAAM,MAAM,MAAM;AAEhB,UAAI,CAAC,QAAO,QAAQ;AAClB;AAAA,MACF;AAGA,UAAI,IAAI;AAEN,cAAM,WAAW,QAAO,IAAI;AAG5B,YAAI,QAAQ,gBACT,iBACG,SAAS,KAAK,CAAC,GAAG,MAClB,WAAW,GAAG,SAAS,EAAE,CAC3B,IACE,WAAW,UAAU,QAAQ,IACjC;AAEA,cAAI,SAAS;AACX,oBAAQ;AAAA,UACV;AAGA,aAAG,UAAU,UAAU,SAAS;AAGhC,qBAAW;AAAA,QACb;AAAA,MACF,OAAO;AAEL,gBAAO,IAAI;AAAA,MACb;AAAA,IACF;AAGA,QAAI,YAAY,MAAM,SAAS,GAAG;AAGlC,UAAM,UAAS,IAAI,eAAe,QAAQ,SAAS;AAGnD,QAAI,IAAI;AAEN,UAAI,WAAW;AACb,YAAI;AAAA,MACN,OAAO;AAEL,mBAAW,QAAO,IAAI;AAAA,MACxB;AAAA,IACF,OAAO;AAEL,cAAO,IAAI;AAAA,IACb;AAGA,WAAO,MAAM;AACX,cAAO,KAAK;AAAA,IACd;AAAA,EACF;AAGO,oBAAkB,OAAO,MAAO;AACrC,QAAI,CAAC,SAAS,KAAK,GAAG;AACpB,aAAO;AAAA,IACT;AACA,WAAO,QAAQ,oBAAI,IAAI;AACvB,QAAI,KAAK,IAAI,KAAK,GAAG;AACnB,aAAO;AAAA,IACT;AACA,SAAK,IAAI,KAAK;AACd,QAAI,MAAM,KAAK,GAAG;AAChB,eAAS,MAAM,OAAO,IAAI;AAAA,IAC5B,WAAW,QAAQ,KAAK,GAAG;AACzB,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,iBAAS,MAAM,IAAI,IAAI;AAAA,MACzB;AAAA,IACF,WAAW,SAAS,KAAK,GAAG;AAC1B,iBAAW,OAAO,OAAO;AACvB,iBAAS,MAAM,MAAM,IAAI;AAAA,MAC3B;AAAA,IACF;AACA,WAAO;AAAA,EACT;;;ACnLO,MAAM,UAAU;AAAA,IAErB,QAAQ,CAAC,OAAO,QAAQ,WAAW;AACjC,aAAO,aAAa,OAAO,UAAU,IAAI;AAAA,IAC3C;AAAA,IAGA,QAAQ,CAAC,UAAU;AACjB,YAAM,SAAS,MAAM;AACrB,UAAI,QAAQ;AACV,eAAO,YAAY,KAAK;AAAA,MAC1B;AAAA,IACF;AAAA,IAGA,eAAe,CAAC,QAAiB;AAC/B,YAAM,KAAK,SAAS,cAAc,GAAG;AACrC,aAAO;AAAA,IACT;AAAA,IAEA,YAAY,CAAC,SAAS,SAAS,eAAe,IAAI;AAAA,IAGlD,eAAe,UAAQ,SAAS,cAAc,IAAI;AAAA,IAGlD,SAAS,CAAC,MAAM,SAAS;AACvB,WAAK,YAAY;AAAA,IACnB;AAAA,IAGA,gBAAgB,CAAC,IAAI,SAAS;AAC5B,SAAG,cAAc;AAAA,IACnB;AAAA,IAGA,YAAY,UAAQ,KAAK;AAAA,IAGzB,aAAa,UAAQ,KAAK;AAAA,IAE1B,eAAe,cAAY,SAAS,cAAc,QAAQ;AAAA,EAC5D;;;AC5CO,sBAAoB,IAAa,OAAsB;AAC5D,QAAI,UAAU,MAAM;AAClB,SAAG,gBAAgB,OAAO;AAAA,IAC5B,OAAO;AACL,SAAG,YAAY;AAAA,IACjB;AAAA,EACF;;;ACCO,sBAAoB,IAAa,MAAc,MAAc;AAClE,UAAM,QAAS,GAAmB;AAClC,UAAM,cAAc,SAAS,IAAI;AAEjC,QAAI,QAAQ,CAAC,aAAa;AAExB,iBAAW,OAAO,MAAM;AACtB,iBAAS,OAAO,KAAK,KAAK,IAAI;AAAA,MAChC;AAGA,UAAI,QAAQ,CAAC,SAAS,IAAI,GAAG;AAC3B,mBAAW,OAAO,MAAM;AACtB,cAAI,KAAK,QAAQ,MAAM;AACrB,qBAAS,OAAO,KAAK,EAAE;AAAA,UACzB;AAAA,QACF;AAAA,MACF;AAAA,IACF,OAAO;AACL,UAAI,aAAa;AAEf,YAAI,SAAS,MAAM;AACjB,gBAAM,UAAU;AAAA,QAClB;AAAA,MACF,WAAW,MAAM;AAEf,WAAG,gBAAgB,OAAO;AAAA,MAC5B;AAAA,IACF;AAAA,EACF;AAEA,oBAAkB,OAA4B,MAAc,KAAa;AAEvE,QAAI,QAAQ,OAAO;AACjB,YAAM,QAAQ;AAAA,IAChB;AAAA,EACF;;;AC9BO,sBACL,IACA,SACA,WACA;AAEA,UAAM,WAAW,GAAG,QAAS,IAAG,OAAO,CAAC;AACxC,UAAM,kBAAkB,SAAS;AACjC,QAAI,aAAa,iBAAiB;AAEhC,sBAAgB,QAAQ;AAAA,IAC1B,OAAO;AAEL,YAAM,OAAO,QAAQ,MAAM,CAAC,EAAE,YAAY;AAC1C,UAAI,WAAW;AAEb,cAAM,UAAW,SAAS,WAAW,cAAc,SAAS;AAC5D,WAAG,iBAAiB,MAAM,OAAO;AAAA,MACnC,WAAW,iBAAiB;AAE1B,WAAG,oBAAoB,MAAM,eAAe;AAE5C,iBAAS,WAAW;AAAA,MACtB;AAAA,IACF;AAAA,EACF;AAGA,yBAAuB,cAA0B;AAC/C,UAAM,UAAmB,CAAC,MAAa;AACrC,YAAM,QAAQ,QAAQ;AACtB,UAAI,QAAQ,KAAK,GAAG;AAClB,cAAM,IAAI,CAAC,OAAO,MAAM,GAAG,CAAC,CAAC;AAAA,MAC/B,OAAO;AACL,cAAM,CAAC;AAAA,MACT;AAAA,IACF;AACA,YAAQ,QAAQ;AAChB,WAAO;AAAA,EACT;;;ACpDO,qBAAmB,IAAa,KAAa,OAAY;AAC9D,QAAI,UAAU,MAAM;AAClB,SAAG,aAAa,KAAK,KAAK;AAAA,IAC5B,OAAO;AACL,SAAG,gBAAgB,GAAG;AAAA,IACxB;AAAA,EACF;;;ACQO,MAAM,YAAY,CAAC,IAAI,KAAK,WAAW,cAAc;AAC1D,QAAI,QAAQ,SAAS;AACnB,iBAAW,IAAI,SAAS;AAAA,IAC1B,WAAW,QAAQ,SAAS;AAC1B,iBAAW,IAAI,WAAW,SAAS;AAAA,IACrC,WAAW,KAAK,GAAG,GAAG;AACpB,iBAAW,IAAI,KAAK,SAAS;AAAA,IAC/B,OAAO;AACL,gBAAU,IAAI,KAAK,SAAS;AAAA,IAC9B;AAAA,EACF;;;AlCXA,MAAM,kBAAkB,OAAO,SAAS,EAAE,UAAU,CAAC;AAErD,MAAI;AAEJ,4BAA0B;AACxB,WAAO,YAAa,YAAW,eAAe,eAAe;AAAA,EAC/D;AAGO,MAAM,SAAS,IAAI,SAAS;AACjC,mBAAe,EAAE,OAAO,GAAG,IAAI;AAAA,EACjC;AAEO,MAAM,YAAY,IAAI,SAAS;AACpC,UAAM,MAAM,eAAe,EAAE,UAAU,GAAG,IAAI;AAE9C,UAAM,EAAE,UAAU;AAElB,QAAI,QAAQ,CAAC,wBAAwB;AACnC,YAAM,YAAY,mBAAmB,mBAAmB;AACxD,UAAI,CAAC;AAAW;AAGhB,gBAAU,YAAY;AACtB,YAAM,SAAS;AAAA,IACjB;AACA,WAAO;AAAA,EACT;AAGA,8BAA4B,WAAW;AACrC,QAAI,SAAS,SAAS,GAAG;AACvB,YAAM,MAAM,SAAS,cAAc,SAAS;AAC5C,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;",
  "names": []
}
